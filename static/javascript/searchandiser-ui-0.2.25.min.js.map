{"version":3,"sources":["webpack:///searchandiser-ui-0.2.25.min.js","webpack:///webpack/bootstrap ae247e71d3d1f9118da9","webpack:///./src/pkg-index.ts","webpack:///./src/polyfills.ts","webpack:///external \"array.of\"","webpack:///external \"array.from\"","webpack:///external \"array-includes\"","webpack:///external \"string.prototype.repeat\"","webpack:///external \"string.prototype.startswith\"","webpack:///./~/ts-helpers/index.js","webpack:///./src/searchandiser.ts","webpack:///./src/services/init.ts","webpack:///./src/services/collections.ts","webpack:///./src/utils/common.ts","webpack:///external \"debounce\"","webpack:///external \"query-string\"","webpack:///external \"filter-object\"","webpack:///external \"oget\"","webpack:///external \"groupby-api\"","webpack:///./src/services/filter.ts","webpack:///./src/services/redirect.ts","webpack:///./src/services/tracker.ts","webpack:///./src/utils/product-transformer.ts","webpack:///external \"gb-tracker-client\"","webpack:///external \"js-cookie\"","webpack:///external \"node-uuid\"","webpack:///./src/services/url.ts","webpack:///./src/utils/simple-beautifier.ts","webpack:///./~/parseUri/index.js","webpack:///./src/utils/url-beautifier.ts","webpack:///./src/tags/tag.ts","webpack:///external \"sayt\"","webpack:///external \"riot\"","webpack:///./src/tags/index.ts","webpack:///./src/tags/breadcrumbs/gb-breadcrumbs.tag.html","webpack:///./src/tags/breadcrumbs/gb-query-crumb.tag.html","webpack:///./src/tags/list/gb-list.tag.html","webpack:///./src/tags/breadcrumbs/gb-refinement-crumb.tag.html","webpack:///./src/tags/breadcrumbs/gb-breadcrumbs.ts","webpack:///./src/tags/carousel/gb-carousel.tag.html","webpack:///./src/tags/carousel/gb-carousel.ts","webpack:///./src/tags/category-menu/gb-category-menu.tag.html","webpack:///./src/tags/category-menu/gb-category-dropdown.tag.html","webpack:///./src/tags/category-menu/gb-category-section.tag.html","webpack:///./src/tags/collections/gb-collections.tag.html","webpack:///./src/tags/collections/gb-collection-item.tag.html","webpack:///./src/tags/badge/gb-badge.tag.html","webpack:///./src/tags/collections/gb-collection-dropdown-item.tag.html","webpack:///./src/tags/select/gb-select.tag.html","webpack:///./src/tags/select/gb-native-select.tag.html","webpack:///./src/tags/select/gb-select.ts","webpack:///./src/tags/select/arrow-down.png","webpack:///./src/tags/select/gb-custom-select.tag.html","webpack:///./src/tags/select/gb-select-button.tag.html","webpack:///./src/tags/select/gb-option-list.tag.html","webpack:///./src/tags/select/gb-option.tag.html","webpack:///./src/tags/collections/gb-collections.ts","webpack:///./src/tags/details/gb-details.tag.html","webpack:///./src/tags/details/gb-details.ts","webpack:///external \"clone\"","webpack:///./src/tags/did-you-mean/gb-did-you-mean.tag.html","webpack:///./src/tags/did-you-mean/gb-did-you-mean.ts","webpack:///./src/tags/filter/gb-filter.tag.html","webpack:///./src/tags/filter/gb-filter.ts","webpack:///./src/tags/navigation/gb-navigation.tag.html","webpack:///./src/tags/navigation/gb-refinement-list.tag.html","webpack:///./src/tags/navigation/gb-available-refinement.tag.html","webpack:///./src/tags/navigation/gb-refinement.ts","webpack:///./src/tags/navigation/gb-selected-refinement.tag.html","webpack:///./src/tags/navigation/gb-navigation.ts","webpack:///./src/tags/page-size/gb-page-size.tag.html","webpack:///./src/tags/page-size/gb-page-size.ts","webpack:///./src/tags/paging/gb-pager.tag.html","webpack:///./src/tags/icon/gb-icon.tag.html","webpack:///./src/tags/icon/gb-icon.ts","webpack:///./src/tags/paging/gb-pager.ts","webpack:///./src/tags/paging/gb-pages.tag.html","webpack:///./src/tags/paging/gb-pages.ts","webpack:///./src/tags/paging/gb-paging.tag.html","webpack:///./src/tags/paging/gb-terminal-pager.tag.html","webpack:///./src/tags/paging/gb-terminal-pager.ts","webpack:///./src/tags/paging/gb-paging.ts","webpack:///./src/tags/paging/double-arrow-left.png","webpack:///./src/tags/paging/arrow-left.png","webpack:///./src/tags/paging/arrow-right.png","webpack:///./src/tags/paging/double-arrow-right.png","webpack:///./src/tags/query/gb-query.tag.html","webpack:///./src/tags/query/gb-search-box.tag.html","webpack:///./src/tags/submit/gb-submit.tag.html","webpack:///./src/tags/submit/gb-submit.ts","webpack:///./src/tags/reset/gb-reset.tag.html","webpack:///./src/tags/reset/gb-reset.ts","webpack:///./src/tags/sayt/gb-sayt.tag.html","webpack:///./src/tags/sayt/gb-sayt-autocomplete.tag.html","webpack:///./src/tags/sayt/gb-sayt-categories.tag.html","webpack:///./src/tags/sayt/gb-sayt-link.tag.html","webpack:///./src/tags/raw/gb-raw.tag.html","webpack:///./src/tags/raw/gb-raw.ts","webpack:///./src/tags/sayt/gb-sayt-search-terms.tag.html","webpack:///./src/tags/sayt/gb-sayt-refinements.tag.html","webpack:///./src/tags/sayt/gb-sayt-divider.tag.html","webpack:///./src/tags/sayt/gb-sayt-products.tag.html","webpack:///./src/tags/product/gb-product.tag.html","webpack:///./src/tags/product/gb-product-image.tag.html","webpack:///./src/tags/product/gb-product-info.tag.html","webpack:///./src/tags/product/gb-variant-switcher.tag.html","webpack:///./src/tags/product/gb-product.ts","webpack:///./src/tags/sayt/gb-sayt.ts","webpack:///./src/tags/sayt/autocomplete.ts","webpack:///external \"escape-string-regexp\"","webpack:///./src/tags/query/gb-query.ts","webpack:///./src/tags/record-count/gb-record-count.tag.html","webpack:///./src/tags/record-count/gb-record-count.ts","webpack:///./src/tags/related-queries/gb-related-queries.tag.html","webpack:///./src/tags/related-queries/gb-related-queries.ts","webpack:///./src/tags/results/gb-results.tag.html","webpack:///./src/tags/results/gb-results.ts","webpack:///./src/tags/snippet/gb-snippet.tag.html","webpack:///./src/tags/snippet/gb-snippet.ts","webpack:///./src/tags/sort/gb-sort.tag.html","webpack:///./src/tags/sort/gb-sort.ts","webpack:///./src/tags/template/gb-template.tag.html","webpack:///./src/tags/template/gb-content-zone.tag.html","webpack:///./src/tags/template/gb-rich-content-zone.tag.html","webpack:///./src/tags/template/gb-record-zone.tag.html","webpack:///./src/tags/template/gb-template.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","searchandiser_1","Searchandiser","utils","groupby_api_1","BrowserBridge","CloudBridge","FluxCapacitor","Query","sayt_1","Sayt","searchandiser","initSearchandiser","shim","require","__assignFn","t","s","i","n","arguments","length","Object","prototype","hasOwnProperty","__extendsFn","d","b","__","this","constructor","create","__decorateFn","decorators","target","key","desc","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadataFn","k","v","metadata","__paramFn","paramIndex","decorator","__awaiterFn","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","throw","result","done","then","apply","__global","__assign","assign","__extends","__decorate","__metadata","__param","__awaiter","window","WorkerGlobalScope","self","global","Function","configure","rawConfig","config","applyDefaultConfig","validateConfig","flux","initCapacitor","Events","services","init_1","initServices","riot","mixin","tag_1","MixinFlux","finalConfig","transformConfig","customerId","CONFIGURATION_MASK","DEFAULT_CONFIG","url","DEFAULT_URL_CONFIG","structure","Error","struct","_variantStructure","title","trim","price","pageSizes","pageSize","bridge","bridgeConfig","headers","skipCache","skipSemantish","common_1","checkNested","sort","tags","options","map","val","initialSearch","queryParam","searchUrl","init","search","attach","tagName","selectorOrOpts","tag","cssAttach","simpleAttach","compile","query","_this","emit","PAGE_CHANGED","pageNumber","finalPage","page","mount","riotTagName","cssSelector","startsWith","collections","collections_1","Collections","filter","filter_1","Filter","redirect","redirect_1","Redirect","tracker","tracker_1","Tracker","url_1","Url","startServices","service","COLLECTIONS_UPDATED_EVENT","counts","collectionsConfig","getPath","fetchCounts","unless","isLabeled","collection","on","QUERY_CHANGED","updateCollectionCounts","RESULTS","results","updateSelectedCollectionCount","inProgress","cancelled","searches","isSelected","raw","refinements","fields","promises_1","all","extractCounts","res","reduce","_a","_b","totalRecordCount","selectedCollection","get","enumerable","configurable","findSearchBox","oget","findTag","document","querySelector","toRefinement","ref","nav","filterObject","navigationName","name","displayRefinement","type","low","high","obj","keys","_i","Array","slice","arg","getParam","param","queryString","parse","LOCATION","getSearch","defaultObjs","undefined","splice","concat","path","remap","mapping","acc","checkBooleanAttr","attribute","opts","debounce","href","location","setSearch","pathname","replace","FILTER_UPDATED_EVENT","fluxClone","clone","filterConfig","updateFluxClone","searchRequest","withConfiguration","filteredRefinements","isTargetNav","withSelectedRefinements","navName","field","REDIRECT","product_transformer_1","GbTracker","Cookies","uuid","MAX_COOKIE_AGE","VISITOR_COOKIE_KEY","SESSION_COOKIE_KEY","_config","area","transformer","ProductTransformer","setVisitorInfo","listenForViewProduct","visitorId","v1","sessionId","setVisitor","DETAILS","allMeta","productMeta","transform","sendViewProductEvent","product","productId","category","set","expires","sendSearchEvent","didYouMean","sayt","addToCart","productsInfo","sendAddToCartEvent","order","sendOrderEvent","origin","originalQuery","DEFAULT_STRUCTURE","setTransform","hasVariants","variantStruct","idField","extractIdField","transformedMeta","productTransform","variants","unpackVariants","variant","remappedMeta","variantMapping","remapVariant","isArray","variantsArray","remappedVariant","_transform","defaultTransform","simple_beautifier_1","url_beautifier_1","parseUri","urlConfig","beautify","beautifier","UrlBeautifier","simple","SimpleBeautifier","parseBeautifiedUrl","parseUrl","active","update","queryObj","build","setLocation","queryParams","queryFromUrl","JSON","request","stringify","re","parts","str","src","indexOf","substring","exec","uri","source","host","authority","ipv6uri","searchandiserConfig","refinementMapping","extraRefinementsParam","queryToken","suffix","UrlGenerator","parser","UrlParser","match","push","origRefinements","of","countMap","generateRefinementMap","keys_1","convertRefinement","referenceKey_1","forEach","repeat","lhs","rhs","localeCompare","stringifyRefinement","join","encodeURIComponent","refinementMap","refinementKeys","_loop_1","matchingRefinements","refinement","suffixRegex","RegExp","rawUrl","paths","split","pop","generateRefinementMapping","keys_2","withQuery","decode","extractRefinements","unmappedRefinements","extractUnmapped","refinementString","refinementStrings","Number","decodeURIComponent","setTagName","htmlTagName","root","toLowerCase","dataset","getAttribute","_tagName","_simpleTagName","_camelTagName","toUpperCase","setParents","_parents","parent","_parentsList","currTag","setScope","scope","_scope","parent_1","_top","FluxTag","_style","stylish","_mixin","mixins","__proto__","_scopeTo","findParent","parentTag","localName","defaultConfig","SaytTag","_gbBreadcrumbs","tag2","Breadcrumbs","isActive","activation","remove","hideQuery","hideRefinements","labels","resultsLabel","noResultsLabel","correctedResultsLabel","toView","updateQueryState","RESET","clearRefinements","selected","selectedNavigation","correctedQuery","unrefine","_gbCarousel","Carousel","currentIndex","index","Math","min","prev","max","parentOpts","saytConfig","products","subdomain","autocomplete","productSearch","numProducts","updateSectionImages","event","console","dir","updateCategoryImages","_gbCollections","_typeof","Symbol","iterator","selectDropdown","option","selectCustom","label","_gbSelect","Select","optionLabel","optionValue","iconUrl","clearOption","clear","callback","onselect","default","selectedOption","updateOptions","selectLabel","prepFocus","focused","selectButton","nativeSelect","selector","unfocus","hover","blur","selectOption","selectNative","from","selectedOptions","disabled","text","clearSelection","addEventListener","unFocus","send","dropdown","collectionsService","extractLabels","updateCounts","switchCollection","element","parentElement","_gbDetails","Details","idParam","updateRecord","details","_gbDidYouMean","DidYouMean","updateDidYouMean","rewrite","_gbFilter","updateValues","convertRefinements","navigations","found","find","converted","availableNavigation","skipSearch","reset","refine","_gbNavigation","Navigation","moreRefinements","_gbRefinement","AvailableRefinement","Refinement","_super","SelectedRefinement","badge","showSelected","updateNavigations","REFINEMENT_RESULTS","updateRefinements","processed","processNavigations","replaceRefinements","navigation","selNav","availNav","unshift","_gbPageSize","PageSize","resetOffset","resize","_gbPager","Pager","_gbIcon","Icon","IMAGE_PATTERN","DATA_URL_PREFIX","isImage","classes","matches","_gbPages","Pages","jumpTo","pager","switchPage","_gbPaging","Paging","_gbTerminalPager","TerminalPager","limit","pages","numeric","terminals","icons","first_label","prev_label","next_label","last_label","first_icon","prev_icon","next_icon","last_icon","backDisabled","currentPage","wrapPager","updateCurrentPage","pageInfo","pageNumbers","lastPage","updatePageInfo","lowOverflow","highOverflow","forwardDisabled","first","emitEvent","last","_gbQuery","_gbSubmit","Submit","staticSearch","setSearchBox","submitQuery","searchBox","inputValue","_gbReset","Reset","clearQuery","_gbSayt","_tag","_gbRaw","Raw","updateContent","innerHTML","content","isVisible","nextElementSibling","previousElementSibling","_gbProduct","Product","imageLink","image","variantIndex","detailsUrl","transformRecord","all_meta","link","imageObj","switchVariant","autocomplete_1","escapeStringRegexp","allCategoriesLabel","queries","minimumCharacters","delay","autoSearch","highlight","https","navigationNames","allowedNavigations","MIN_DELAY","showProducts","generateSaytConfig","initializeAutocomplete","AUTOCOMPLETE_HIDE_EVENT","Autocomplete","numSearchTerms","language","fetchSuggestions","handleSuggestions","catch","err","error","processResults","matchesInput","searchProducts","rewriteQuery","REWRITE_QUERY","notifier","isRefinement","categoryField","categoryResults","searchTerms","categoryQuery","extractCategoryResults","displayName","includes","additionalInfo","noRefine","searchRefinement","resetRecall","searchCategory","highlightCurrentQuery","regexReplacement","enhanceCategoryQuery","node","doRefinement","listenForInput","input","debouncedSearch","KEY_UP","KEY_DOWN","KEY_ENTER","KEY_ESCAPE","ACTIVE","searchInput","indexOfSelected","links","selectLink","swapAttributes","linkAbove","linkBelow","querySelectorAll","isSelectedInAutocomplete","removeActiveClass","classList","add","resetSelected","keyboardListener","submitDefault","keyCode","preventDefault","preautocompleteValue","click","enterKeyHandlers","attachListeners","keydownListener","listenForStaticSearch","listenForSubmit","resetToInputValue","onSubmit","f","_gbRecordCount","RecordCount","recordStart","recordEnd","total","_gbRelatedQueries","RelatedQueries","updatedRelatedQueries","relatedQueries","_gbResults","Results","updateRecords","records","userStyle","css","_gbSnippet","Snippet","loadFile","req","XMLHttpRequest","onload","responseText","open","_gbSort","Sort","DEFAULT_SORTS","sortValues","_gbTemplate","Template","updateActive","template","zoneMap","zones","sortZones","list","zone"],"mappings":"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","file":"searchandiser-ui-0.2.25.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t__webpack_require__(1);\r\n\tvar searchandiser_1 = __webpack_require__(8);\r\n\texports.Searchandiser = searchandiser_1.Searchandiser;\r\n\t__webpack_require__(31);\r\n\tvar utils = __webpack_require__(11);\r\n\texports.utils = utils;\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.BrowserBridge = groupby_api_1.BrowserBridge;\r\n\texports.CloudBridge = groupby_api_1.CloudBridge;\r\n\texports.FluxCapacitor = groupby_api_1.FluxCapacitor;\r\n\texports.Query = groupby_api_1.Query;\r\n\tvar sayt_1 = __webpack_require__(29);\r\n\texports.Sayt = sayt_1.Sayt;\r\n\tvar searchandiser = searchandiser_1.initSearchandiser();\r\n\texports.searchandiser = searchandiser;\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t__webpack_require__(2);\r\n\t__webpack_require__(3).shim();\r\n\t__webpack_require__(4).shim();\r\n\t__webpack_require__(5);\r\n\t__webpack_require__(6);\r\n\t__webpack_require__(7);\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"array.of\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"array.from\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"array-includes\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"string.prototype.repeat\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"string.prototype.startswith\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tfunction __assignFn(t) {\n\t    for (var s, i = 1, n = arguments.length; i < n; i++) {\n\t        s = arguments[i];\n\t        for (var p in s)\n\t            if (Object.prototype.hasOwnProperty.call(s, p))\n\t                t[p] = s[p];\n\t    }\n\t    return t;\n\t}\n\tfunction __extendsFn(d, b) {\n\t    for (var p in b)\n\t        if (b.hasOwnProperty(p))\n\t            d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t}\n\tfunction __decorateFn(decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n\t        r = Reflect.decorate(decorators, target, key, desc);\n\t    else\n\t        for (var i = decorators.length - 1; i >= 0; i--)\n\t            if (d = decorators[i])\n\t                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t}\n\tfunction __metadataFn(k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\")\n\t        return Reflect.metadata(k, v);\n\t}\n\tfunction __paramFn(paramIndex, decorator) {\n\t    return function (target, key) { decorator(target, key, paramIndex); };\n\t}\n\tfunction __awaiterFn(thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try {\n\t            step(generator.next(value));\n\t        }\n\t        catch (e) {\n\t            reject(e);\n\t        } }\n\t        function rejected(value) { try {\n\t            step(generator.throw(value));\n\t        }\n\t        catch (e) {\n\t            reject(e);\n\t        } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t}\n\t// hook global helpers\n\t(function (__global) {\n\t    __global.__assign = (__global && __global.__assign) || Object.assign || __assignFn;\n\t    __global.__extends = (__global && __global.__extends) || __extendsFn;\n\t    __global.__decorate = (__global && __global.__decorate) || __decorateFn;\n\t    __global.__metadata = (__global && __global.__metadata) || __metadataFn;\n\t    __global.__param = (__global && __global.__param) || __paramFn;\n\t    __global.__awaiter = (__global && __global.__awaiter) || __awaiterFn;\n\t})(typeof window !== \"undefined\" ? window :\n\t    typeof WorkerGlobalScope !== \"undefined\" ? self :\n\t        typeof global !== \"undefined\" ? global :\n\t            Function(\"return this;\")());\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar init_1 = __webpack_require__(9);\r\n\tvar tag_1 = __webpack_require__(28);\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar riot = __webpack_require__(30);\r\n\texports.CONFIGURATION_MASK = '{collection,area,language,pageSize,sort,fields,customUrlParams,pruneRefinements,disableAutocorrection}'; // tslint:disable:max-line-length\r\n\texports.DEFAULT_CONFIG = { initialSearch: true };\r\n\texports.DEFAULT_URL_CONFIG = { queryParam: 'q', searchUrl: 'search' };\r\n\tfunction initSearchandiser() {\r\n\t    return function configure(rawConfig) {\r\n\t        if (rawConfig === void 0) { rawConfig = {}; }\r\n\t        var config = applyDefaultConfig(rawConfig);\r\n\t        validateConfig(config);\r\n\t        var flux = Object.assign(initCapacitor(config), groupby_api_1.Events);\r\n\t        var services = init_1.initServices(flux, config);\r\n\t        riot.mixin(tag_1.MixinFlux(flux, config, services));\r\n\t        Object.assign(configure, { flux: flux, services: services, config: config }, new Searchandiser()['__proto__']);\r\n\t    };\r\n\t}\r\n\texports.initSearchandiser = initSearchandiser;\r\n\tfunction initCapacitor(config) {\r\n\t    var finalConfig = transformConfig(config);\r\n\t    return new groupby_api_1.FluxCapacitor(finalConfig.customerId, finalConfig, exports.CONFIGURATION_MASK);\r\n\t}\r\n\texports.initCapacitor = initCapacitor;\r\n\tfunction applyDefaultConfig(rawConfig) {\r\n\t    var config = Object.assign({}, exports.DEFAULT_CONFIG, rawConfig);\r\n\t    config.url = Object.assign(exports.DEFAULT_URL_CONFIG, config.url);\r\n\t    return config;\r\n\t}\r\n\texports.applyDefaultConfig = applyDefaultConfig;\r\n\tfunction validateConfig(config) {\r\n\t    if (!config.structure) {\r\n\t        throw new Error('must provide a record structure');\r\n\t    }\r\n\t    var struct = Object.assign(config.structure, config.structure._variantStructure);\r\n\t    if (!(struct.title && struct.title.trim())) {\r\n\t        throw new Error('structure.title must be the path to the title field');\r\n\t    }\r\n\t    if (!(struct.price && struct.price.trim())) {\r\n\t        throw new Error('structure.price must be the path to the price field');\r\n\t    }\r\n\t}\r\n\texports.validateConfig = validateConfig;\r\n\tfunction transformConfig(config) {\r\n\t    var finalConfig = config;\r\n\t    if (config.pageSizes)\r\n\t        finalConfig.pageSize = config.pageSizes[0];\r\n\t    if (config.bridge) {\r\n\t        var bridgeConfig = {};\r\n\t        var headers = config.bridge.headers || {};\r\n\t        if (config.bridge.skipCache)\r\n\t            headers['Skip-Caching'] = 'true';\r\n\t        if (config.bridge.skipSemantish)\r\n\t            headers['Skip-Semantish'] = 'true';\r\n\t        bridgeConfig.headers = headers;\r\n\t        Object.assign(finalConfig.bridge, bridgeConfig);\r\n\t    }\r\n\t    if (common_1.checkNested(config, 'tags', 'sort', 'options')) {\r\n\t        finalConfig.sort = [config.tags.sort.options.map(function (val) { return val.value; })[0]];\r\n\t    }\r\n\t    return finalConfig;\r\n\t}\r\n\texports.transformConfig = transformConfig;\r\n\tvar Searchandiser = (function () {\r\n\t    function Searchandiser() {\r\n\t    }\r\n\t    Searchandiser.prototype.init = function () {\r\n\t        if (this.config.initialSearch)\r\n\t            this.search();\r\n\t    };\r\n\t    Searchandiser.prototype.attach = function (tagName, selectorOrOpts, options) {\r\n\t        var tag;\r\n\t        if (typeof selectorOrOpts === 'string') {\r\n\t            tag = this.cssAttach(tagName, selectorOrOpts, options);\r\n\t        }\r\n\t        else {\r\n\t            tag = this.simpleAttach(tagName, selectorOrOpts);\r\n\t        }\r\n\t        if (tag) {\r\n\t            return tag.length === 1 ? tag[0] : tag;\r\n\t        }\r\n\t        else {\r\n\t            return null;\r\n\t        }\r\n\t    };\r\n\t    Searchandiser.prototype.compile = function () {\r\n\t        riot.compile(function () { return null; });\r\n\t    };\r\n\t    Searchandiser.prototype.search = function (query) {\r\n\t        var _this = this;\r\n\t        return this.flux.search(query)\r\n\t            .then(function () { return _this.flux.emit(groupby_api_1.Events.PAGE_CHANGED, { pageNumber: 1, finalPage: _this.flux.page.finalPage }); });\r\n\t    };\r\n\t    Searchandiser.prototype.simpleAttach = function (tagName, options) {\r\n\t        if (options === void 0) { options = {}; }\r\n\t        return riot.mount(this.riotTagName(tagName), options);\r\n\t    };\r\n\t    Searchandiser.prototype.cssAttach = function (tagName, cssSelector, options) {\r\n\t        if (cssSelector === void 0) { cssSelector = \".\" + tagName; }\r\n\t        if (options === void 0) { options = {}; }\r\n\t        return riot.mount(cssSelector, this.riotTagName(tagName), options);\r\n\t    };\r\n\t    Searchandiser.prototype.riotTagName = function (tagName) {\r\n\t        return tagName.startsWith('gb-') ? tagName : \"gb-\" + tagName;\r\n\t    };\r\n\t    return Searchandiser;\r\n\t}());\r\n\texports.Searchandiser = Searchandiser;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar collections_1 = __webpack_require__(10);\r\n\tvar filter_1 = __webpack_require__(17);\r\n\tvar redirect_1 = __webpack_require__(18);\r\n\tvar tracker_1 = __webpack_require__(19);\r\n\tvar url_1 = __webpack_require__(24);\r\n\tfunction initServices(flux, config) {\r\n\t    var services = {};\r\n\t    services.collections = new collections_1.Collections(flux, config);\r\n\t    services.filter = new filter_1.Filter(flux, config);\r\n\t    services.redirect = new redirect_1.Redirect(flux);\r\n\t    services.tracker = new tracker_1.Tracker(flux, config);\r\n\t    services.url = new url_1.Url(flux, config, services);\r\n\t    startServices(services);\r\n\t    return services;\r\n\t}\r\n\texports.initServices = initServices;\r\n\tfunction startServices(services) {\r\n\t    for (var service in services) {\r\n\t        if (services.hasOwnProperty(service)) {\r\n\t            services[service].init();\r\n\t        }\r\n\t    }\r\n\t}\r\n\texports.startServices = startServices;\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.COLLECTIONS_UPDATED_EVENT = 'collections_updated';\r\n\tvar Collections = (function () {\r\n\t    function Collections(flux, config) {\r\n\t        this.flux = flux;\r\n\t        this.config = config;\r\n\t        this.counts = {};\r\n\t        this.collectionsConfig = common_1.getPath(config, 'tags.collections') || {};\r\n\t        this.fetchCounts = common_1.unless(this.collectionsConfig.counts, true);\r\n\t        this.options = this.collectionsConfig.options || [];\r\n\t        this.isLabeled = this.options.length !== 0\r\n\t            && typeof this.options[0] === 'object';\r\n\t        this.collections = this.isLabeled\r\n\t            ? this.options.map(function (collection) { return collection.value; })\r\n\t            : this.options;\r\n\t    }\r\n\t    Collections.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        this.flux.on(groupby_api_1.Events.QUERY_CHANGED, function (query) { return _this.updateCollectionCounts(query); });\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, function (results) { return _this.updateSelectedCollectionCount(results); });\r\n\t        this.updateCollectionCounts();\r\n\t    };\r\n\t    Collections.prototype.updateCollectionCounts = function (query) {\r\n\t        var _this = this;\r\n\t        if (query === void 0) { query = ''; }\r\n\t        if (this.fetchCounts) {\r\n\t            if (this.inProgress) {\r\n\t                this.inProgress.cancelled = true;\r\n\t            }\r\n\t            var searches = this.collections\r\n\t                .filter(function (collection) { return !_this.isSelected(collection); })\r\n\t                .map(function (collection) { return _this.flux.bridge\r\n\t                .search(Object.assign(_this.flux.query.raw, { query: query, collection: collection, refinements: [], pageSize: 0, fields: '' }))\r\n\t                .then(function (results) { return ({ results: results, collection: collection }); }); });\r\n\t            var promises_1 = this.inProgress = Promise.all(searches);\r\n\t            promises_1.then(this.extractCounts)\r\n\t                .then(function (counts) {\r\n\t                if (!promises_1.cancelled) {\r\n\t                    Object.assign(_this.counts, counts);\r\n\t                    _this.flux.emit(exports.COLLECTIONS_UPDATED_EVENT, _this.counts);\r\n\t                }\r\n\t            });\r\n\t        }\r\n\t    };\r\n\t    Collections.prototype.extractCounts = function (res) {\r\n\t        return res.reduce(function (counts, _a) {\r\n\t            var results = _a.results, collection = _a.collection;\r\n\t            return Object.assign(counts, (_b = {}, _b[collection] = results.totalRecordCount, _b));\r\n\t            var _b;\r\n\t        }, {});\r\n\t    };\r\n\t    Collections.prototype.updateSelectedCollectionCount = function (res) {\r\n\t        Object.assign(this.counts, (_a = {}, _a[this.selectedCollection] = res.totalRecordCount, _a));\r\n\t        this.flux.emit(exports.COLLECTIONS_UPDATED_EVENT, this.counts);\r\n\t        var _a;\r\n\t    };\r\n\t    Collections.prototype.isSelected = function (collection) {\r\n\t        return collection === this.selectedCollection;\r\n\t    };\r\n\t    Object.defineProperty(Collections.prototype, \"selectedCollection\", {\r\n\t        get: function () {\r\n\t            return common_1.getPath(this.flux, 'query.raw.collection') || this.config.collection;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return Collections;\r\n\t}());\r\n\texports.Collections = Collections;\r\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar debounce = __webpack_require__(12);\r\n\texports.debounce = debounce;\r\n\tvar queryString = __webpack_require__(13);\r\n\tvar filterObject = __webpack_require__(14);\r\n\tvar oget = __webpack_require__(15);\r\n\texports.LOCATION = {\r\n\t    href: function () { return window.location.href; },\r\n\t    setSearch: function (search) { return window.location.search = search; },\r\n\t    getSearch: function () { return window.location.search; },\r\n\t    pathname: function () { return window.location.pathname; },\r\n\t    replace: function (url) { return window.location.replace(url); },\r\n\t    assign: function (url) { return window.location.assign(url); }\r\n\t};\r\n\tfunction findSearchBox() {\r\n\t    return oget(findTag('gb-query'), '_tag.searchBox');\r\n\t}\r\n\texports.findSearchBox = findSearchBox;\r\n\tfunction findTag(tagName) {\r\n\t    return document.querySelector(tagName)\r\n\t        || document.querySelector(\"[data-is=\\\"\" + tagName + \"\\\"]\")\r\n\t        || document.querySelector(\"[riot-tag=\\\"\" + tagName + \"\\\"]\");\r\n\t}\r\n\texports.findTag = findTag;\r\n\tfunction toRefinement(ref, nav) {\r\n\t    return Object.assign({}, filterObject(ref, '{type,value,low,high}'), { navigationName: nav.name });\r\n\t}\r\n\texports.toRefinement = toRefinement;\r\n\tfunction displayRefinement(ref) {\r\n\t    return ref.type === 'Value' ? ref.value : ref.low + \" - \" + ref.high;\r\n\t}\r\n\texports.displayRefinement = displayRefinement;\r\n\tfunction checkNested(obj) {\r\n\t    var keys = [];\r\n\t    for (var _i = 1; _i < arguments.length; _i++) {\r\n\t        keys[_i - 1] = arguments[_i];\r\n\t    }\r\n\t    return Array.prototype.slice.call(arguments, 1)\r\n\t        .reduce(function (res, arg) {\r\n\t        if (!obj || !obj.hasOwnProperty(arg))\r\n\t            return false;\r\n\t        obj = obj[arg];\r\n\t        return res;\r\n\t    }, true);\r\n\t}\r\n\texports.checkNested = checkNested;\r\n\tfunction getParam(param) {\r\n\t    return queryString.parse(exports.LOCATION.getSearch())[param] || null;\r\n\t}\r\n\texports.getParam = getParam;\r\n\tfunction unless(obj) {\r\n\t    var defaultObjs = [];\r\n\t    for (var _i = 1; _i < arguments.length; _i++) {\r\n\t        defaultObjs[_i - 1] = arguments[_i];\r\n\t    }\r\n\t    return obj !== undefined ? obj : unless.apply(void 0, [defaultObjs.splice(0, 1)[0]].concat(defaultObjs));\r\n\t}\r\n\texports.unless = unless;\r\n\tfunction getPath(obj, path) {\r\n\t    if (path === void 0) { path = ''; }\r\n\t    return oget(obj, path);\r\n\t}\r\n\texports.getPath = getPath;\r\n\t/**\r\n\t * Example:\r\n\t * ({x: 3, y: 4, h: 8}, {z: 'x', i: 'h'}) -> {z: 3, i: 8}\r\n\t *\r\n\t * N.B. It removes keys that do not appear in the mapping\r\n\t */\r\n\tfunction remap(obj, mapping) {\r\n\t    if (mapping) {\r\n\t        return Object.keys(mapping).reduce(function (acc, key) {\r\n\t            var value = getPath(obj, mapping[key]);\r\n\t            if (value) {\r\n\t                return Object.assign(acc, (_a = {}, _a[key] = value, _a));\r\n\t            }\r\n\t            else {\r\n\t                return acc;\r\n\t            }\r\n\t            var _a;\r\n\t        }, {});\r\n\t    }\r\n\t    else {\r\n\t        return obj;\r\n\t    }\r\n\t}\r\n\texports.remap = remap;\r\n\tfunction checkBooleanAttr(attribute, opts) {\r\n\t    return typeof opts === 'object'\r\n\t        && attribute in opts\r\n\t        && opts[attribute] != 'false' // tslint:disable-line:triple-equals\r\n\t        && opts[attribute] !== false;\r\n\t}\r\n\texports.checkBooleanAttr = checkBooleanAttr;\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"debounce\");\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"query-string\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"filter-object\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"oget\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"groupby-api\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar searchandiser_1 = __webpack_require__(8);\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.FILTER_UPDATED_EVENT = 'filter_updated';\r\n\tvar Filter = (function () {\r\n\t    function Filter(flux, config) {\r\n\t        this.flux = flux;\r\n\t        this.config = config;\r\n\t        this.fluxClone = this.clone();\r\n\t        this.filterConfig = common_1.getPath(config, 'tags.filter') || {};\r\n\t    }\r\n\t    Filter.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, function () { return _this.updateFluxClone(); });\r\n\t    };\r\n\t    Filter.prototype.updateFluxClone = function () {\r\n\t        var _this = this;\r\n\t        var searchRequest = this.flux.query.raw;\r\n\t        // TODO: this is probably broken in terms of state propagation\r\n\t        this.fluxClone.query.withConfiguration({ refinements: [] });\r\n\t        if (searchRequest.refinements) {\r\n\t            var filteredRefinements = searchRequest.refinements\r\n\t                .filter(function (_a) {\r\n\t                var navigationName = _a.navigationName;\r\n\t                return !_this.isTargetNav(navigationName);\r\n\t            });\r\n\t            (_a = this.fluxClone.query).withSelectedRefinements.apply(_a, filteredRefinements);\r\n\t        }\r\n\t        this.fluxClone.search(searchRequest.query)\r\n\t            .then(function (res) { return _this.flux.emit(exports.FILTER_UPDATED_EVENT, res); });\r\n\t        var _a;\r\n\t    };\r\n\t    Filter.prototype.isTargetNav = function (navName) {\r\n\t        return navName === this.filterConfig.field;\r\n\t    };\r\n\t    Filter.prototype.clone = function () {\r\n\t        return searchandiser_1.initCapacitor(this.config);\r\n\t    };\r\n\t    return Filter;\r\n\t}());\r\n\texports.Filter = Filter;\r\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar Redirect = (function () {\r\n\t    function Redirect(flux) {\r\n\t        this.flux = flux;\r\n\t    }\r\n\t    Redirect.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        this.flux.on(groupby_api_1.Events.REDIRECT, function (redirect) { return _this.redirect(redirect); });\r\n\t    };\r\n\t    Redirect.prototype.redirect = function (url) {\r\n\t        common_1.LOCATION.assign(url);\r\n\t    };\r\n\t    return Redirect;\r\n\t}());\r\n\texports.Redirect = Redirect;\r\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar product_transformer_1 = __webpack_require__(20);\r\n\tvar GbTracker = __webpack_require__(21);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar Cookies = __webpack_require__(22);\r\n\tvar uuid = __webpack_require__(23);\r\n\texports.MAX_COOKIE_AGE = 365; // days\r\n\texports.VISITOR_COOKIE_KEY = 'visitor';\r\n\texports.SESSION_COOKIE_KEY = 'session';\r\n\tvar Tracker = (function () {\r\n\t    function Tracker(flux, config) {\r\n\t        this.flux = flux;\r\n\t        this.config = config;\r\n\t        this._config = this.config.tracker || {};\r\n\t        this.tracker = new GbTracker(this.config.customerId, this.config.area);\r\n\t        this.transformer = new product_transformer_1.ProductTransformer(this.config.structure || {});\r\n\t    }\r\n\t    Tracker.prototype.init = function () {\r\n\t        this.setVisitorInfo();\r\n\t        this.listenForViewProduct();\r\n\t    };\r\n\t    Tracker.prototype.setVisitorInfo = function () {\r\n\t        var visitorId = this._config.visitorId\r\n\t            || Cookies.get(exports.VISITOR_COOKIE_KEY)\r\n\t            || uuid.v1();\r\n\t        var sessionId = this._config.sessionId\r\n\t            || Cookies.get(exports.SESSION_COOKIE_KEY)\r\n\t            || uuid.v1();\r\n\t        this.setVisitor(visitorId, sessionId);\r\n\t    };\r\n\t    Tracker.prototype.listenForViewProduct = function () {\r\n\t        var _this = this;\r\n\t        this.flux.on(groupby_api_1.Events.DETAILS, function (_a) {\r\n\t            var allMeta = _a.allMeta;\r\n\t            var productMeta = _this.transformer.transform(allMeta);\r\n\t            _this.tracker.sendViewProductEvent({\r\n\t                product: {\r\n\t                    productId: productMeta().id,\r\n\t                    title: productMeta().title,\r\n\t                    price: productMeta().price,\r\n\t                    category: 'NONE'\r\n\t                }\r\n\t            });\r\n\t        });\r\n\t    };\r\n\t    Tracker.prototype.setVisitor = function (visitorId, sessionId) {\r\n\t        this.tracker.setVisitor(visitorId, sessionId);\r\n\t        Cookies.set(exports.VISITOR_COOKIE_KEY, visitorId, { expires: exports.MAX_COOKIE_AGE });\r\n\t        Cookies.set(exports.SESSION_COOKIE_KEY, sessionId);\r\n\t    };\r\n\t    Tracker.prototype.search = function () {\r\n\t        this.sendSearchEvent();\r\n\t    };\r\n\t    Tracker.prototype.didYouMean = function () {\r\n\t        this.sendSearchEvent('dym');\r\n\t    };\r\n\t    Tracker.prototype.sayt = function () {\r\n\t        this.sendSearchEvent('sayt');\r\n\t    };\r\n\t    Tracker.prototype.addToCart = function (productsInfo) {\r\n\t        this.tracker.sendAddToCartEvent(productsInfo);\r\n\t    };\r\n\t    Tracker.prototype.order = function (productsInfo) {\r\n\t        this.tracker.sendOrderEvent(productsInfo);\r\n\t    };\r\n\t    Tracker.prototype.sendSearchEvent = function (origin) {\r\n\t        if (origin === void 0) { origin = 'search'; }\r\n\t        this.tracker.sendSearchEvent({\r\n\t            search: Object.assign({\r\n\t                origin: (_a = {}, _a[origin] = true, _a),\r\n\t                query: this.flux.results.originalQuery || ''\r\n\t            }, this.flux.results)\r\n\t        });\r\n\t        var _a;\r\n\t    };\r\n\t    return Tracker;\r\n\t}());\r\n\texports.Tracker = Tracker;\r\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar filterObject = __webpack_require__(14);\r\n\tvar DEFAULT_STRUCTURE = {\r\n\t    id: 'id'\r\n\t};\r\n\tvar ProductTransformer = (function () {\r\n\t    function ProductTransformer(struct) {\r\n\t        this.struct = Object.assign({}, DEFAULT_STRUCTURE, struct);\r\n\t        this.setTransform();\r\n\t        this.hasVariants = 'variants' in struct;\r\n\t        this.variantStruct = this.struct._variantStructure || this.struct;\r\n\t        this.idField = this.extractIdField();\r\n\t    }\r\n\t    ProductTransformer.prototype.transform = function (allMeta) {\r\n\t        var transformedMeta = this.productTransform(allMeta);\r\n\t        var variants = this.unpackVariants(transformedMeta);\r\n\t        var productMeta = function (variant) {\r\n\t            if (variant === void 0) { variant = 0; }\r\n\t            if (variant >= variants.length) {\r\n\t                throw new Error(\"cannot access the variant at index \" + variant);\r\n\t            }\r\n\t            else {\r\n\t                return variants[variant];\r\n\t            }\r\n\t        };\r\n\t        productMeta.variants = variants;\r\n\t        productMeta.transformedMeta = transformedMeta;\r\n\t        return productMeta;\r\n\t    };\r\n\t    ProductTransformer.prototype.unpackVariants = function (allMeta) {\r\n\t        var struct = filterObject(this.struct, '!_*');\r\n\t        var variantStruct = filterObject(this.variantStruct, '!_*');\r\n\t        var remappedMeta = common_1.remap(allMeta, struct);\r\n\t        var variantMapping = this.remapVariant(remappedMeta, variantStruct);\r\n\t        if (this.hasVariants && Array.isArray(common_1.getPath(allMeta, struct.variants))) {\r\n\t            var variantsArray = common_1.getPath(allMeta, struct.variants)\r\n\t                .filter(function (variant) { return variant; });\r\n\t            if (variantsArray.length > 0) {\r\n\t                return variantsArray.map(variantMapping);\r\n\t            }\r\n\t        }\r\n\t        return [filterObject(remappedMeta, '!variants')];\r\n\t    };\r\n\t    ProductTransformer.prototype.remapVariant = function (remappedMeta, variantStruct) {\r\n\t        return function (variant) {\r\n\t            var remappedVariant = common_1.remap(variant, variantStruct);\r\n\t            return filterObject(Object.assign({}, remappedMeta, remappedVariant), '!variants');\r\n\t        };\r\n\t    };\r\n\t    ProductTransformer.prototype.extractIdField = function () {\r\n\t        // ensure we actually want the nested id\r\n\t        if (this.hasVariants && this.struct._variantStructure && this.variantStruct.id) {\r\n\t            return this.struct.variants + \".\" + this.variantStruct.id;\r\n\t        }\r\n\t        else {\r\n\t            return this.struct.id;\r\n\t        }\r\n\t    };\r\n\t    ProductTransformer.prototype.setTransform = function () {\r\n\t        if (typeof this.struct._transform === 'function') {\r\n\t            this.productTransform = this.struct._transform;\r\n\t        }\r\n\t        else {\r\n\t            this.productTransform = this.defaultTransform;\r\n\t        }\r\n\t    };\r\n\t    ProductTransformer.prototype.defaultTransform = function (allMeta) {\r\n\t        return allMeta;\r\n\t    };\r\n\t    return ProductTransformer;\r\n\t}());\r\n\texports.ProductTransformer = ProductTransformer;\r\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"gb-tracker-client\");\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"js-cookie\");\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"node-uuid\");\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar simple_beautifier_1 = __webpack_require__(25);\r\n\tvar url_beautifier_1 = __webpack_require__(27);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar parseUri = __webpack_require__(26);\r\n\tvar Url = (function () {\r\n\t    function Url(flux, config, services) {\r\n\t        this.flux = flux;\r\n\t        this.config = config;\r\n\t        this.services = services;\r\n\t        this.urlConfig = this.config.url || {};\r\n\t        this.beautify = !!this.urlConfig.beautifier;\r\n\t    }\r\n\t    Url.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        this.beautifier = new url_beautifier_1.UrlBeautifier(this.config);\r\n\t        this.simple = new simple_beautifier_1.SimpleBeautifier(this.config);\r\n\t        if (!this.config.initialSearch) {\r\n\t            var query = void 0;\r\n\t            if (this.beautify) {\r\n\t                query = Url.parseBeautifiedUrl(this.beautifier);\r\n\t            }\r\n\t            else {\r\n\t                query = Url.parseUrl(this.simple);\r\n\t            }\r\n\t            if (query) {\r\n\t                this.flux.query = query;\r\n\t                this.flux.search(query.raw.query)\r\n\t                    .then(function () { return _this.services.tracker.search(); });\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Url.prototype.active = function () {\r\n\t        return common_1.LOCATION.pathname() !== this.urlConfig.searchUrl;\r\n\t    };\r\n\t    // TODO: better way to do this is with browser history rewrites\r\n\t    Url.prototype.update = function (query, refinements) {\r\n\t        if (refinements === void 0) { refinements = this.flux.query.raw.refinements; }\r\n\t        var queryObj = (_a = new groupby_api_1.Query(query)).withSelectedRefinements.apply(_a, refinements);\r\n\t        var url;\r\n\t        if (this.beautify) {\r\n\t            url = this.beautifier.build(queryObj);\r\n\t        }\r\n\t        else {\r\n\t            url = this.simple.build(queryObj);\r\n\t        }\r\n\t        Url.setLocation(url, this.urlConfig);\r\n\t        var _a;\r\n\t    };\r\n\t    Url.parseUrl = function (simple) {\r\n\t        return simple.parse(common_1.LOCATION.href());\r\n\t    };\r\n\t    Url.parseBeautifiedUrl = function (beautifier) {\r\n\t        return beautifier.parse(common_1.LOCATION.href());\r\n\t    };\r\n\t    Url.setLocation = function (url, config) {\r\n\t        if (common_1.LOCATION.pathname() === config.searchUrl) {\r\n\t            common_1.LOCATION.setSearch(\"?\" + parseUri(url).query);\r\n\t        }\r\n\t        else {\r\n\t            common_1.LOCATION.replace(url);\r\n\t        }\r\n\t    };\r\n\t    return Url;\r\n\t}());\r\n\texports.Url = Url;\r\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar searchandiser_1 = __webpack_require__(8);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar parseUri = __webpack_require__(26);\r\n\tvar queryString = __webpack_require__(13);\r\n\tvar SimpleBeautifier = (function () {\r\n\t    function SimpleBeautifier(config) {\r\n\t        this.config = config;\r\n\t        this.urlConfig = config.url || {};\r\n\t    }\r\n\t    SimpleBeautifier.prototype.parse = function (url) {\r\n\t        var queryParams = queryString.parse(parseUri(url).query);\r\n\t        var queryFromUrl = new groupby_api_1.Query(queryParams[this.urlConfig.queryParam] || '')\r\n\t            .withConfiguration(this.config, searchandiser_1.CONFIGURATION_MASK);\r\n\t        if (queryParams.refinements) {\r\n\t            var refinements = JSON.parse(queryParams.refinements);\r\n\t            if (refinements.length > 0) {\r\n\t                queryFromUrl.withSelectedRefinements.apply(queryFromUrl, refinements);\r\n\t            }\r\n\t        }\r\n\t        return queryFromUrl;\r\n\t    };\r\n\t    SimpleBeautifier.prototype.build = function (query) {\r\n\t        var request = query.build();\r\n\t        var queryObj = {};\r\n\t        if ('refinements' in request && request.refinements.length > 0) {\r\n\t            queryObj['refinements'] = JSON.stringify(request.refinements);\r\n\t        }\r\n\t        queryObj[this.urlConfig.queryParam] = request.query;\r\n\t        return this.urlConfig.searchUrl + \"?\" + queryString.stringify(queryObj);\r\n\t    };\r\n\t    return SimpleBeautifier;\r\n\t}());\r\n\texports.SimpleBeautifier = SimpleBeautifier;\r\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t/**\n\t * Parses an URI\n\t *\n\t * @author Steven Levithan <stevenlevithan.com> (MIT license)\n\t * @api private\n\t */\n\t\n\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\t\n\tvar parts = [\n\t    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n\t];\n\t\n\tmodule.exports = function parseuri(str) {\n\t    var src = str,\n\t        b = str.indexOf('['),\n\t        e = str.indexOf(']');\n\t\n\t    if (b != -1 && e != -1) {\n\t        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n\t    }\n\t\n\t    var m = re.exec(str || ''),\n\t        uri = {},\n\t        i = 14;\n\t\n\t    while (i--) {\n\t        uri[parts[i]] = m[i] || '';\n\t    }\n\t\n\t    if (b != -1 && e != -1) {\n\t        uri.source = src;\n\t        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n\t        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n\t        uri.ipv6uri = true;\n\t    }\n\t\n\t    return uri;\n\t};\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar searchandiser_1 = __webpack_require__(8);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar parseUri = __webpack_require__(26);\r\n\tvar queryString = __webpack_require__(13);\r\n\tvar UrlBeautifier = (function () {\r\n\t    function UrlBeautifier(searchandiserConfig) {\r\n\t        if (searchandiserConfig === void 0) { searchandiserConfig = {}; }\r\n\t        this.searchandiserConfig = searchandiserConfig;\r\n\t        this.config = {\r\n\t            refinementMapping: [],\r\n\t            extraRefinementsParam: 'refinements',\r\n\t            queryToken: 'q',\r\n\t            suffix: ''\r\n\t        };\r\n\t        this.generator = new UrlGenerator(this);\r\n\t        this.parser = new UrlParser(this);\r\n\t        var urlConfig = searchandiserConfig.url || {};\r\n\t        var config = typeof urlConfig.beautifier === 'object' ? urlConfig.beautifier : {};\r\n\t        Object.assign(this.config, config);\r\n\t        var keys = [];\r\n\t        for (var _i = 0, _a = this.config.refinementMapping; _i < _a.length; _i++) {\r\n\t            var mapping = _a[_i];\r\n\t            var key = Object.keys(mapping)[0];\r\n\t            if (key.length !== 1) {\r\n\t                throw new Error('refinement mapping token must be a single character');\r\n\t            }\r\n\t            if (key.match(/[aeiouy]/)) {\r\n\t                throw new Error('refinement mapping token must not be a vowel');\r\n\t            }\r\n\t            if (keys.indexOf(key) > -1) {\r\n\t                throw new Error('refinement mapping tokens must be unique');\r\n\t            }\r\n\t            keys.push(key);\r\n\t        }\r\n\t        if (this.config.queryToken.length !== 1) {\r\n\t            throw new Error('query token must be a single character');\r\n\t        }\r\n\t        if (this.config.queryToken.match(/[aeiouy]/)) {\r\n\t            throw new Error('query token must not be a vowel');\r\n\t        }\r\n\t        if (keys.indexOf(this.config.queryToken) > -1) {\r\n\t            throw new Error('query token must be unique from refinement tokens');\r\n\t        }\r\n\t    }\r\n\t    UrlBeautifier.prototype.parse = function (url) {\r\n\t        return this.parser.parse(url);\r\n\t    };\r\n\t    UrlBeautifier.prototype.build = function (query) {\r\n\t        return this.generator.build(query);\r\n\t    };\r\n\t    return UrlBeautifier;\r\n\t}());\r\n\texports.UrlBeautifier = UrlBeautifier;\r\n\tvar UrlGenerator = (function () {\r\n\t    function UrlGenerator(_a) {\r\n\t        var config = _a.config;\r\n\t        this.config = config;\r\n\t    }\r\n\t    UrlGenerator.prototype.build = function (query) {\r\n\t        var request = query.build();\r\n\t        var uri = {\r\n\t            path: [],\r\n\t            query: ''\r\n\t        };\r\n\t        // let url = '';\r\n\t        var origRefinements = Array.of.apply(Array, request.refinements);\r\n\t        var countMap = {};\r\n\t        var _a = this.generateRefinementMap(origRefinements), map = _a.map, keys = _a.keys;\r\n\t        // add query\r\n\t        if (request.query) {\r\n\t            uri.path.push(request.query);\r\n\t        }\r\n\t        // add refinements\r\n\t        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n\t            var key = keys_1[_i];\r\n\t            var refinements = map[key];\r\n\t            countMap[key] = refinements.length;\r\n\t            (_b = uri.path).push.apply(_b, refinements.map(this.convertRefinement).sort());\r\n\t        }\r\n\t        // add reference key\r\n\t        if (keys.length || request.query) {\r\n\t            var referenceKey_1 = '';\r\n\t            if (request.query)\r\n\t                referenceKey_1 += this.config.queryToken;\r\n\t            keys.forEach(function (key) { return referenceKey_1 += key.repeat(countMap[key]); });\r\n\t            uri.path.push(referenceKey_1);\r\n\t        }\r\n\t        // add remaining refinements\r\n\t        if (origRefinements.length) {\r\n\t            uri.query = origRefinements\r\n\t                .sort(function (lhs, rhs) { return lhs.navigationName.localeCompare(rhs.navigationName); })\r\n\t                .map(this.stringifyRefinement)\r\n\t                .join('~');\r\n\t        }\r\n\t        var url = \"/\" + uri.path.map(function (path) { return encodeURIComponent(path); }).join('/');\r\n\t        if (this.config.suffix)\r\n\t            url += \"/\" + this.config.suffix.replace(/^\\/+/, '');\r\n\t        if (uri.query)\r\n\t            url += \"?\" + this.config.extraRefinementsParam + \"=\" + encodeURIComponent(uri.query);\r\n\t        return url.replace(/\\s|%20/g, '+');\r\n\t        var _b;\r\n\t    };\r\n\t    UrlGenerator.prototype.generateRefinementMap = function (refinements) {\r\n\t        var refinementMap = {};\r\n\t        var refinementKeys = [];\r\n\t        var _loop_1 = function(mapping) {\r\n\t            var key = Object.keys(mapping)[0];\r\n\t            var matchingRefinements = refinements.filter(function (refinement) { return refinement.navigationName === mapping[key]; });\r\n\t            if (matchingRefinements.length) {\r\n\t                refinementKeys.push(key);\r\n\t                refinementMap[key] = matchingRefinements;\r\n\t                matchingRefinements.forEach(function (ref) { return refinements.splice(refinements.indexOf(ref), 1); });\r\n\t            }\r\n\t        };\r\n\t        for (var _i = 0, _a = this.config.refinementMapping; _i < _a.length; _i++) {\r\n\t            var mapping = _a[_i];\r\n\t            _loop_1(mapping);\r\n\t        }\r\n\t        return { map: refinementMap, keys: refinementKeys };\r\n\t    };\r\n\t    UrlGenerator.prototype.convertRefinement = function (refinement) {\r\n\t        if (refinement.type === 'Value') {\r\n\t            return refinement.value;\r\n\t        }\r\n\t        else {\r\n\t            throw new Error('cannot map range refinements');\r\n\t        }\r\n\t    };\r\n\t    UrlGenerator.prototype.stringifyRefinement = function (refinement) {\r\n\t        var name = refinement.navigationName;\r\n\t        if (refinement.type === 'Value') {\r\n\t            return name + \"=\" + refinement.value;\r\n\t        }\r\n\t        else {\r\n\t            return name + \":\" + refinement.low + \"..\" + refinement.high;\r\n\t        }\r\n\t    };\r\n\t    return UrlGenerator;\r\n\t}());\r\n\texports.UrlGenerator = UrlGenerator;\r\n\tvar UrlParser = (function () {\r\n\t    function UrlParser(_a) {\r\n\t        var config = _a.config, searchandiserConfig = _a.searchandiserConfig;\r\n\t        this.config = config;\r\n\t        this.searchandiserConfig = searchandiserConfig;\r\n\t        this.suffixRegex = new RegExp(\"^\" + this.config.suffix);\r\n\t    }\r\n\t    UrlParser.prototype.parse = function (rawUrl) {\r\n\t        var url = parseUri(rawUrl);\r\n\t        var paths = url.path.split('/').filter(function (val) { return val; });\r\n\t        if (paths[paths.length - 1] === this.config.suffix)\r\n\t            paths.pop();\r\n\t        var keys = (paths.pop() || '').split('');\r\n\t        var map = this.generateRefinementMapping();\r\n\t        var query = new groupby_api_1.Query().withConfiguration(this.searchandiserConfig, searchandiser_1.CONFIGURATION_MASK);\r\n\t        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\r\n\t            var key = keys_2[_i];\r\n\t            if (!(key in map || key === this.config.queryToken)) {\r\n\t                throw new Error(\"unexpected token '\" + key + \"' found in reference\");\r\n\t            }\r\n\t        }\r\n\t        if (paths.length < keys.length)\r\n\t            throw new Error('token reference is invalid');\r\n\t        // remove prefixed paths\r\n\t        paths.splice(0, paths.length - keys.length);\r\n\t        for (var i = 0; i < keys.length; i++) {\r\n\t            if (keys[i] === this.config.queryToken) {\r\n\t                query.withQuery(this.decode(paths[i]));\r\n\t            }\r\n\t            else {\r\n\t                query.withSelectedRefinements.apply(query, this.extractRefinements(paths[i], map[keys[i]]));\r\n\t            }\r\n\t        }\r\n\t        var unmappedRefinements = queryString.parse(url.query)[this.config.extraRefinementsParam];\r\n\t        if (unmappedRefinements)\r\n\t            query.withSelectedRefinements.apply(query, this.extractUnmapped(unmappedRefinements));\r\n\t        return query;\r\n\t    };\r\n\t    UrlParser.prototype.generateRefinementMapping = function () {\r\n\t        return this.config.refinementMapping.reduce(function (map, mapping) { return Object.assign(map, mapping); }, {});\r\n\t    };\r\n\t    UrlParser.prototype.extractRefinements = function (refinementString, navigationName) {\r\n\t        var _this = this;\r\n\t        var refinementStrings = refinementString.split('~');\r\n\t        return refinementStrings.map(function (value) { return ({ navigationName: navigationName, type: 'Value', value: _this.decode(value) }); });\r\n\t    };\r\n\t    UrlParser.prototype.extractUnmapped = function (refinementString) {\r\n\t        var refinementStrings = refinementString.split('~');\r\n\t        return refinementStrings\r\n\t            .map(this.decode)\r\n\t            .map(function (refinement) {\r\n\t            var _a = refinement.split(/=|:/), navigationName = _a[0], value = _a[1];\r\n\t            if (value.indexOf('..') >= 0) {\r\n\t                var _b = value.split('..'), low = _b[0], high = _b[1];\r\n\t                return { navigationName: navigationName, low: Number(low), high: Number(high), type: 'Range' };\r\n\t            }\r\n\t            else {\r\n\t                return { navigationName: navigationName, value: value, type: 'Value' };\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    UrlParser.prototype.decode = function (value) {\r\n\t        return decodeURIComponent(value.replace('+', ' '));\r\n\t    };\r\n\t    return UrlParser;\r\n\t}());\r\n\texports.UrlParser = UrlParser;\r\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar sayt_1 = __webpack_require__(29);\r\n\tvar sayt = new sayt_1.Sayt();\r\n\tvar FluxTag = (function () {\r\n\t    function FluxTag() {\r\n\t    }\r\n\t    FluxTag.prototype.init = function () {\r\n\t        this._style = this.config.stylish ? 'gb-stylish' : '';\r\n\t        setTagName(this);\r\n\t        setParents(this);\r\n\t        setScope(this);\r\n\t    };\r\n\t    FluxTag.prototype._mixin = function () {\r\n\t        var mixins = [];\r\n\t        for (var _i = 0; _i < arguments.length; _i++) {\r\n\t            mixins[_i - 0] = arguments[_i];\r\n\t        }\r\n\t        this.mixin.apply(this, mixins.map(function (mixin) { return new mixin().__proto__; }));\r\n\t    };\r\n\t    FluxTag.prototype._scopeTo = function (scope) {\r\n\t        this._scope = this._parents[scope];\r\n\t    };\r\n\t    FluxTag.prototype.findParent = function (tag, name) {\r\n\t        var parentTag = tag;\r\n\t        while (parentTag.root.localName !== name && parentTag.parent) {\r\n\t            parentTag = parentTag.parent;\r\n\t        }\r\n\t        return parentTag;\r\n\t    };\r\n\t    FluxTag.prototype.configure = function (defaultConfig) {\r\n\t        if (defaultConfig === void 0) { defaultConfig = {}; }\r\n\t        var rawConfig = Object.assign({}, defaultConfig, common_1.getPath(this.config, \"tags.\" + this._camelTagName), this.opts.__proto__, this.opts);\r\n\t        for (var _i = 0, _a = Object.keys(rawConfig); _i < _a.length; _i++) {\r\n\t            var key = _a[_i];\r\n\t            if (typeof defaultConfig[key] === 'boolean'\r\n\t                || rawConfig[key] == true // tslint:disable-line:triple-equals\r\n\t                || rawConfig[key] == false) {\r\n\t                rawConfig[key] = common_1.checkBooleanAttr(key, rawConfig);\r\n\t            }\r\n\t        }\r\n\t        this._config = rawConfig;\r\n\t    };\r\n\t    return FluxTag;\r\n\t}());\r\n\texports.FluxTag = FluxTag;\r\n\tvar SaytTag = (function () {\r\n\t    function SaytTag() {\r\n\t    }\r\n\t    SaytTag.prototype.init = function () {\r\n\t        this.sayt = sayt;\r\n\t    };\r\n\t    return SaytTag;\r\n\t}());\r\n\texports.SaytTag = SaytTag;\r\n\tfunction setTagName(tag) {\r\n\t    var htmlTagName = tag.root.tagName.toLowerCase();\r\n\t    var tagName = htmlTagName.startsWith('gb-') ?\r\n\t        htmlTagName :\r\n\t        tag.root.dataset['is'] || tag.root.getAttribute('riot-tag');\r\n\t    if (tagName) {\r\n\t        tag._tagName = tagName;\r\n\t        tag._simpleTagName = tag._tagName.replace(/^gb-/, '');\r\n\t        tag._camelTagName = tag._simpleTagName.replace(/-([a-z])/g, function (match) { return match[1].toUpperCase(); });\r\n\t    }\r\n\t}\r\n\texports.setTagName = setTagName;\r\n\tfunction setParents(tag) {\r\n\t    tag._parents = tag.parent ? Object.assign({}, tag.parent['_parents']) : {};\r\n\t    if (tag._tagName) {\r\n\t        tag._parents[tag._tagName] = tag;\r\n\t    }\r\n\t    tag._parentsList = [];\r\n\t    var currTag = tag;\r\n\t    while (currTag = currTag.parent)\r\n\t        tag._parentsList.push(currTag);\r\n\t}\r\n\texports.setParents = setParents;\r\n\t// somehow this function isn't working for the gb-select inside gb-sort\r\n\tfunction setScope(tag) {\r\n\t    if (tag._parents && tag._parents[tag.opts.scope]) {\r\n\t        tag._scope = tag._parents[tag.opts.scope];\r\n\t    }\r\n\t    else if (tag.parent && tag.parent._scope) {\r\n\t        tag._scope = tag.parent._scope;\r\n\t    }\r\n\t    else {\r\n\t        var parent_1 = tag;\r\n\t        while (parent_1.parent)\r\n\t            tag._scope = parent_1 = parent_1.parent;\r\n\t        tag._top = tag._scope;\r\n\t    }\r\n\t}\r\n\texports.setScope = setScope;\r\n\tfunction MixinFlux(flux, config, services) {\r\n\t    return Object.assign(new FluxTag()['__proto__'], { flux: flux, config: config, services: services });\r\n\t}\r\n\texports.MixinFlux = MixinFlux;\r\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"sayt\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"riot\");\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t__webpack_require__(32);\r\n\t__webpack_require__(37);\r\n\t__webpack_require__(39);\r\n\t__webpack_require__(42);\r\n\t__webpack_require__(55);\r\n\t__webpack_require__(58);\r\n\t__webpack_require__(60);\r\n\t__webpack_require__(62);\r\n\t__webpack_require__(68);\r\n\t__webpack_require__(70);\r\n\t__webpack_require__(74);\r\n\t__webpack_require__(76);\r\n\t__webpack_require__(77);\r\n\t__webpack_require__(84);\r\n\t__webpack_require__(94);\r\n\t__webpack_require__(109);\r\n\t__webpack_require__(111);\r\n\t__webpack_require__(88);\r\n\t__webpack_require__(113);\r\n\t__webpack_require__(90);\r\n\t__webpack_require__(46);\r\n\t__webpack_require__(115);\r\n\t__webpack_require__(117);\r\n\t__webpack_require__(86);\r\n\t__webpack_require__(119);\r\n\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(33);\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(35);\n\t\n\tvar _gbBreadcrumbs = __webpack_require__(36);\n\t\n\triot.tag2('gb-breadcrumbs', '<yield> <div class=\"gb-breadcrumbs {_style}\"> <gb-query-crumb if=\"{!_config.hideQuery}\"></gb-query-crumb> <gb-list items=\"{selected}\" if=\"{!_config.hideRefinements}\" scope=\"gb-breadcrumbs\"> <gb-list class=\"gb-navigation-crumb\" items=\"{item.refinements}\" inline> <gb-refinement-crumb nav=\"{parent.item}\" ref=\"{item}\"></gb-refinement-crumb> </gb-list> </gb-list> </div> </yield>', 'gb-breadcrumbs .gb-stylish.gb-breadcrumbs,[riot-tag=\"gb-breadcrumbs\"] .gb-stylish.gb-breadcrumbs,[data-is=\"gb-breadcrumbs\"] .gb-stylish.gb-breadcrumbs{ display: flex; justify-content: flex-start; align-items: baseline; }', '', function (opts) {\n\t    this._mixin(_gbBreadcrumbs.Breadcrumbs);\n\t});\n\n/***/ },\n/* 33 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-query-crumb', '<div if=\"{originalQuery}\"> <span if=\"{!_scope.correctedQuery && _scope._config.labels}\" class=\"gb-query-label\">{_scope._config.resultsLabel}</span> <span if=\"{_scope.correctedQuery && _scope._config.labels}\" class=\"gb-query-label\">{_scope._config.noResultsLabel}</span> <span class=\"gb-original-query\">{originalQuery}</span> </div> <div if=\"{correctedQuery}\"> <span if=\"{_scope._config.labels}\" class=\"gb-query-label\">{_scope._config.correctedResultsLabel}</span> <span class=\"gb-corrected-query\">{correctedQuery}</span> </div>', '', '', function (opts) {\n\t    this._scopeTo('gb-breadcrumbs');\n\t});\n\n/***/ },\n/* 34 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-list', '<ul class=\"{_style} {inline: \\'inline\\' in opts}\"> <li each=\"{item, i in opts.items}\" class=\"{active: isActive(i)}\"> <yield></yield> </li> </ul>', 'gb-list > ul.gb-stylish { list-style: none; margin: 0; padding: 0; } gb-list > ul.gb-stylish > li { margin: 0 10px; } gb-list > ul.gb-stylish.inline > li { display: inline-block; } gb-list > ul.gb-stylish a { color: #888; cursor: pointer; } gb-list > ul.gb-stylish a:hover { color: black; }', '', function (opts) {\n\t    this.isActive = opts.activation;\n\t});\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-refinement-crumb', '<a onclick=\"{remove}\">&times;</a> <b>{nav.displayName}: {_scope.toView(ref)}</b>', '', '', function (opts) {\n\t    var _this = this;\n\t\n\t    this.remove = function () {\n\t        return _this._scope.remove(opts.ref, opts.nav);\n\t    };\n\t    this.nav = opts.nav;\n\t    this.ref = opts.ref;\n\t});\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    hideQuery: false,\r\n\t    hideRefinements: false,\r\n\t    labels: true,\r\n\t    resultsLabel: 'Results for:',\r\n\t    noResultsLabel: 'No results for:',\r\n\t    correctedResultsLabel: 'Showing results for:'\r\n\t};\r\n\tvar Breadcrumbs = (function () {\r\n\t    function Breadcrumbs() {\r\n\t    }\r\n\t    Breadcrumbs.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.toView = common_1.displayRefinement;\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updateQueryState);\r\n\t        this.flux.on(groupby_api_1.Events.RESET, this.clearRefinements);\r\n\t    };\r\n\t    Breadcrumbs.prototype.clearRefinements = function () {\r\n\t        this.update({ selected: [] });\r\n\t    };\r\n\t    Breadcrumbs.prototype.updateQueryState = function (_a) {\r\n\t        var originalQuery = _a.originalQuery, selectedNavigation = _a.selectedNavigation, correctedQuery = _a.correctedQuery;\r\n\t        this.update({ originalQuery: originalQuery, selected: selectedNavigation, correctedQuery: correctedQuery });\r\n\t    };\r\n\t    Breadcrumbs.prototype.remove = function (ref, nav) {\r\n\t        this.flux.unrefine(common_1.toRefinement(ref, nav));\r\n\t    };\r\n\t    return Breadcrumbs;\r\n\t}());\r\n\texports.Breadcrumbs = Breadcrumbs;\r\n\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\tvar _gbCarousel = __webpack_require__(38);\n\t\n\triot.tag2('gb-carousel', '<a class=\"gb-carousel__previous-link\" onclick=\"{prev}\">Prev</a> <gb-list items=\"{options}\" activation=\"{isSelected}\"> <yield></yield> </gb-list> <a class=\"gb-carousel__next-link\" onclick=\"{next}\">Next</a>', 'gb-carousel gb-list > ul > li:not(.active),[riot-tag=\"gb-carousel\"] gb-list > ul > li:not(.active),[data-is=\"gb-carousel\"] gb-list > ul > li:not(.active){ display: none; }', '', function (opts) {\n\t    this._mixin(_gbCarousel.Carousel);\n\t});\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar Carousel = (function () {\r\n\t    function Carousel() {\r\n\t    }\r\n\t    Carousel.prototype.init = function () {\r\n\t        this.configure();\r\n\t        this.currentIndex = 0;\r\n\t        this.options = common_1.unless(this._config.options, this._scope.options, []);\r\n\t    };\r\n\t    Carousel.prototype.isSelected = function (index) {\r\n\t        return this.currentIndex === index;\r\n\t    };\r\n\t    Carousel.prototype.next = function () {\r\n\t        this.update({ currentIndex: Math.min(this.currentIndex + 1, this.options.length - 1) });\r\n\t    };\r\n\t    Carousel.prototype.prev = function () {\r\n\t        this.update({ currentIndex: Math.max(this.currentIndex - 1, 0) });\r\n\t    };\r\n\t    return Carousel;\r\n\t}());\r\n\texports.Carousel = Carousel;\r\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(40);\n\t\n\t__webpack_require__(41);\n\t\n\triot.tag2('gb-category-menu', '<div class=\"gb-menu {_style}\"> <div class=\"gb-menu__item\" each=\"{opts.sections}\"> <gb-category-dropdown class=\"gb-category-dropdown\"></gb-category-dropdown> </div> </div>', 'gb-category-menu .gb-stylish.gb-menu,[riot-tag=\"gb-category-menu\"] .gb-stylish.gb-menu,[data-is=\"gb-category-menu\"] .gb-stylish.gb-menu{ display: flex; flex-direction: row; justify-content: center; }', '', function (opts) {});\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-category-dropdown', '<div class=\"gb-dropdown {_style}\"> <button type=\"button\" class=\"gb-dropdown__button\">{name}</button> <div class=\"gb-dropdown__content\"> <gb-category-section if=\"{items}\"></gb-category-section> <gb-category-section each=\"{subsections}\" named=\"{true}\"></gb-category-section> </div> <div class=\"gb-dropdown__images\"> <img src=\"\" each=\"{results.images}\"> </div> </div>', 'gb-category-dropdown .gb-dropdown,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown,[data-is=\"gb-category-dropdown\"] .gb-dropdown{ position: relative; display: inline-block; } gb-category-dropdown .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-dropdown__content{ display: none; position: absolute; min-width: 160px; background-color: #fff; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); } gb-category-dropdown .gb-dropdown:hover .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown:hover .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-dropdown:hover .gb-dropdown__content{ display: block; } gb-category-dropdown .gb-stylish .gb-dropdown__button,[riot-tag=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__button,[data-is=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__button{ border: none; cursor: pointer; padding: 16px; width: 100%; } gb-category-dropdown .gb-stylish .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__content{ flex-wrap: wrap; background-color: #f9f9f9; min-width: 272px; } gb-category-dropdown .gb-stylish.gb-dropdown:hover .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-stylish.gb-dropdown:hover .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-stylish.gb-dropdown:hover .gb-dropdown__content{ display: flex; }', '', function (opts) {\n\t  var sayt = __webpack_require__(29);\n\t  this.parentOpts = this.parent.opts;\n\t  var saytConfig = Object.assign({ products: 4 }, this.parentOpts.config.sayt);\n\t\n\t  sayt.configure({\n\t    subdomain: this.parentOpts.config.customerId,\n\t    collection: this.parentOpts.config.collection,\n\t    autocomplete: {},\n\t    productSearch: { area: this.parentOpts.config.area, numProducts: saytConfig.products }\n\t  });\n\t\n\t  this.updateSectionImages = function (event) {\n\t    return console.dir(event.target);\n\t  };\n\t  this.updateCategoryImages = function (event) {\n\t    return console.dir(event.target);\n\t  };\n\t});\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-category-section', '<div class=\"gb-category-section {_style}\"> <a if=\"{opts.named}\" class=\"gb-category-section__header\" onmouseover=\"{updateSectionImages}\" data-try=\"{name}\">{name}</a> <a each=\"{item in items}\" class=\"gb-category-section__link\" onmouseover=\"{updateCategoryImages}\">{item}</a> </div>', 'gb-category-section .gb-stylish.gb-category-section,[riot-tag=\"gb-category-section\"] .gb-stylish.gb-category-section,[data-is=\"gb-category-section\"] .gb-stylish.gb-category-section{ min-width: 120px; flex-wrap: wrap; padding: 6px 8px; } gb-category-section .gb-stylish .gb-category-section__header,[riot-tag=\"gb-category-section\"] .gb-stylish .gb-category-section__header,[data-is=\"gb-category-section\"] .gb-stylish .gb-category-section__header{ padding: 6px 4px; margin: 0; font-size: 1.1em; font-weight: bold; } gb-category-section .gb-stylish a,[riot-tag=\"gb-category-section\"] .gb-stylish a,[data-is=\"gb-category-section\"] .gb-stylish a{ padding: 3px 4px; text-decoration: none; display: block; } gb-category-section .gb-stylish a:hover,[riot-tag=\"gb-category-section\"] .gb-stylish a:hover,[data-is=\"gb-category-section\"] .gb-stylish a:hover{ background-color: #f1f1f1; }', '', function (opts) {\n\t    this.parentOpts = this.parent.parent.opts;\n\t    this.updateSectionImages = this.parent.parent.updateSectionImages;\n\t    this.updateCategoryImages = this.parent.parent.updateCategoryImages;\n\t});\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(43);\n\t\n\t__webpack_require__(45);\n\t\n\t__webpack_require__(44);\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(46);\n\t\n\tvar _gbCollections = __webpack_require__(54);\n\t\n\triot.tag2('gb-collections', '<yield> <gb-list class=\"gb-collections {_style}\" items=\"{collections}\" if=\"{!_config.dropdown}\" scope=\"gb-collections\" inline> <gb-collection-item></gb-collection-item> </gb-list> <gb-select if=\"{_config.dropdown}\" scope=\"gb-collections\"> <gb-custom-select> <gb-collection-dropdown-item></gb-collection-dropdown-item> </gb-custom-select> </gb-select> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbCollections.Collections);\n\t});\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(44);\n\t\n\triot.tag2('gb-collection-item', '<a class=\"gb-collection\" data-collection=\"{item}\" onclick=\"{_scope.switchCollection}\"> <span class=\"gb-collection__name\">{_scope.labels[item] || item}</span> <gb-badge if=\"{_scope._config.counts}\">{_scope.counts[item]}</gb-badge> </a>', '', '', function (opts) {});\n\n/***/ },\n/* 44 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-badge', '<span class=\"{_style}\"><yield></yield></span>', 'gb-badge .gb-stylish,[riot-tag=\"gb-badge\"] .gb-stylish,[data-is=\"gb-badge\"] .gb-stylish{ display: inline-block; min-width: 10px; max-height: 20px; padding: 4px 7px; border-radius: 10px; font-size: 12px; font-weight: bold; line-height: 1; color: #fff; background-color: #ccc; text-align: center; white-space: nowrap; vertical-align: middle; }', '', function (opts) {});\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\triot.tag2('gb-collection-dropdown-item', '<a class=\"gb-collection\" onclick=\"{selectDropdown}\"> <span class=\"gb-collection__name\">{option.label || option}</span> <gb-badge>{_scope.counts[option.value || option]}</gb-badge> </a>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.selectDropdown = function () {\n\t    if (_typeof(_this.option) === 'object') {\n\t      _this._scope.selectCustom(_this.option);\n\t    } else {\n\t      _this._scope.selectCustom({\n\t        label: _this.option,\n\t        value: _this.option\n\t      });\n\t    }\n\t  };\n\t});\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(47);\n\t\n\t__webpack_require__(50);\n\t\n\tvar _gbSelect = __webpack_require__(48);\n\t\n\triot.tag2('gb-select', '<yield> <gb-native-select if=\"{_config.native}\"></gb-native-select> <gb-custom-select if=\"{!_config.native}\"></gb-custom-select> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbSelect.Select);\n\t});\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbSelect = __webpack_require__(48);\n\t\n\triot.tag2('gb-native-select', '<select name=\"selector\" onchange=\"{_scope.selectNative}\"> <option if=\"{!_scope.default}\" value=\"\" selected disabled>{_scope.selectLabel()}</option> <option each=\"{option in _scope.options}\" if=\"{!option.clear}\" value=\"{optionValue(option)}\">{optionLabel(option)}</option> </select>', '', '', function (opts) {\n\t    this.optionLabel = _gbSelect.Select.optionLabel;\n\t    this.optionValue = _gbSelect.Select.optionValue;\n\t    this._scopeTo('gb-select');\n\t});\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar Select = (function () {\r\n\t    function Select() {\r\n\t    }\r\n\t    Select.prototype.init = function () {\r\n\t        this._config = this._scope._config;\r\n\t        this.iconUrl = __webpack_require__(49);\r\n\t        this.label = this._config.label || 'Select';\r\n\t        this.clearOption = { label: this._config.clear || 'Unselect', clear: true };\r\n\t        this.options = this._scope.options || [];\r\n\t        this.callback = this._scope.onselect;\r\n\t        this.default = !('clear' in this._config);\r\n\t        if (this.default) {\r\n\t            this.selectedOption = typeof this.options[0] === 'object' ? this.options[0].label : this.options[0];\r\n\t        }\r\n\t    };\r\n\t    Select.prototype.updateOptions = function (options) {\r\n\t        this.update({ options: this.default ? options : [this.clearOption].concat(options) });\r\n\t    };\r\n\t    Select.prototype.selectLabel = function () {\r\n\t        return this.selectedOption || (this.selected ? this.clearOption : this.label);\r\n\t    };\r\n\t    Select.prototype.prepFocus = function () {\r\n\t        return this.focused = false;\r\n\t    };\r\n\t    Select.prototype.selectButton = function () {\r\n\t        return this.tags['gb-custom-select'].tags['gb-select-button'].root;\r\n\t    };\r\n\t    Select.prototype.nativeSelect = function () {\r\n\t        if (this.tags['gb-native-select']) {\r\n\t            return this.tags['gb-native-select'].selector;\r\n\t        }\r\n\t        else {\r\n\t            return this.root.querySelector('select');\r\n\t        }\r\n\t    };\r\n\t    Select.prototype.unfocus = function () {\r\n\t        this.focused = this._config.hover || !this.focused;\r\n\t        if (!this.focused)\r\n\t            this.selectButton().blur();\r\n\t    };\r\n\t    Select.prototype.selectOption = function (selectedOption, value) {\r\n\t        this.update({ selectedOption: selectedOption });\r\n\t        if (this.callback) {\r\n\t            try {\r\n\t                this.callback(JSON.parse(value));\r\n\t            }\r\n\t            catch (e) {\r\n\t                this.callback(value || '*');\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Select.prototype.selectNative = function (event) {\r\n\t        var option = Array.from(event.target.selectedOptions)[0];\r\n\t        var selected = option.value;\r\n\t        this.nativeSelect().options[0].disabled = !selected;\r\n\t        this.update({ selected: selected });\r\n\t        this.selectOption(option.text, selected);\r\n\t    };\r\n\t    Select.prototype.selectCustom = function (_a) {\r\n\t        var value = _a.value, label = _a.label;\r\n\t        this.selectButton().blur();\r\n\t        this.selectOption(label, value);\r\n\t    };\r\n\t    Select.prototype.clearSelection = function () {\r\n\t        return this.selectOption(undefined, '*');\r\n\t    };\r\n\t    Select.optionValue = function (option) {\r\n\t        return typeof option === 'object' ? JSON.stringify(option.value) : option;\r\n\t    };\r\n\t    Select.optionLabel = function (option) {\r\n\t        return typeof option === 'object' ? option.label : option;\r\n\t    };\r\n\t    return Select;\r\n\t}());\r\n\texports.Select = Select;\r\n\n\n/***/ },\n/* 49 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAPFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQLyYwAAAAE3RSTlMADQ46Ozw9SElKS0y5x+zz9Pj5WslQRAAAAQdJREFUeJztzlcOwkAQBFFyxjbM/e9KFsbrNGK3V6Cq/1a/yYSIiIiIiIiIiIiIfqRp8kF/q2LtG+yLedT/yk4uwf5sZUTBsjJzCa7/FlFw//cI7v/xBMvSzCV4/scSLF7/ZueN6z+OoPY/TlD7jyI4mLkEH/9mh68Bs6NL0Pg/zr4G+AQJ/l2CJP8OQaL/ULAV/48UJPwfJUj6P0KQ+H9QkPx/QCD4DwU78X+PQPTfKZD9dwiE/60C6X+LQPwfCtT/gUD+3yfQ/HcLVP9dAt1/u0D53ybQ/ocC9X9ToP//FOT4rwvy/L8Fuf5fgnz/D0HO/5sg7/9VkPmfiIiIiIiIiIiIiP6gC0vzP5P1npi3AAAAAElFTkSuQmCC\"\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(51);\n\t\n\t__webpack_require__(52);\n\t\n\t__webpack_require__(53);\n\t\n\triot.tag2('gb-custom-select', '<div class=\"gb-select {_scope._config.hover ? \\'hoverable\\' : \\'clickable\\'} {_style}\"> <button data-is=\"gb-select-button\" type=\"button\"></button> <gb-option-list> <yield> <gb-option option=\"{option}\" send=\"{option.clear ? _scope.clearSelection : _scope.selectCustom}\"></gb-option> </yield> </gb-option-list> </div>', 'gb-custom-select .gb-select,[riot-tag=\"gb-custom-select\"] .gb-select,[data-is=\"gb-custom-select\"] .gb-select{ position: relative; display: inline-block; } gb-custom-select gb-option-list,[riot-tag=\"gb-custom-select\"] gb-option-list,[data-is=\"gb-custom-select\"] gb-option-list{ display: none; z-index: 100; position: absolute; min-width: 160px; background-color: #f6f6f6; box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); max-height: 300px; overflow-y: scroll; } gb-custom-select .gb-select.hoverable:hover gb-option-list,[riot-tag=\"gb-custom-select\"] .gb-select.hoverable:hover gb-option-list,[data-is=\"gb-custom-select\"] .gb-select.hoverable:hover gb-option-list,gb-custom-select .gb-select.clickable button:focus + gb-option-list,[riot-tag=\"gb-custom-select\"] .gb-select.clickable button:focus + gb-option-list,[data-is=\"gb-custom-select\"] .gb-select.clickable button:focus + gb-option-list,gb-custom-select gb-option-list:hover,[riot-tag=\"gb-custom-select\"] gb-option-list:hover,[data-is=\"gb-custom-select\"] gb-option-list:hover{ display: block; } gb-custom-select .gb-stylish.gb-select:hover button,[riot-tag=\"gb-custom-select\"] .gb-stylish.gb-select:hover button,[data-is=\"gb-custom-select\"] .gb-stylish.gb-select:hover button,gb-custom-select .gb-stylish.gb-select button:focus,[riot-tag=\"gb-custom-select\"] .gb-stylish.gb-select button:focus,[data-is=\"gb-custom-select\"] .gb-stylish.gb-select button:focus{ border-color: #aaa; } gb-custom-select button,[riot-tag=\"gb-custom-select\"] button,[data-is=\"gb-custom-select\"] button{ overflow-x: hidden; display: flex; align-items: center; font-size: 14px; border: none; cursor: pointer; padding: 8px 16px; width: 100%; background-color: #eee; border: 2px solid #ddd; border-radius: 4px; white-space: nowrap; } gb-custom-select .gb-stylish button:focus,[riot-tag=\"gb-custom-select\"] .gb-stylish button:focus,[data-is=\"gb-custom-select\"] .gb-stylish button:focus{ outline: none; }', '', function (opts) {\n\t    this._scopeTo('gb-select');\n\t});\n\n/***/ },\n/* 51 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-select-button', '<yield> <span class=\"gb-button__label\">{_scope.selectLabel()}</span> <img riot-src=\"{_scope.iconUrl}\" alt=\"\"> </yield>', 'gb-select-button img,[riot-tag=\"gb-select-button\"] img,[data-is=\"gb-select-button\"] img{ margin-left: 10px; margin-top: 2px; height: 24px; }', '', function (opts) {\n\t    this.root.addEventListener('focus', this._scope.prepFocus);\n\t    this.root.addEventListener('click', this._scope.unFocus);\n\t});\n\n/***/ },\n/* 52 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-option-list', '<ul> <li each=\"{option in _scope.options}\" class=\"gb-select__option {clear: option.clear}\" if=\"{option.clear ? _scope.selectedOption : true}\"> <yield></yield> </li> </ul>', 'gb-option-list ul,[riot-tag=\"gb-option-list\"] ul,[data-is=\"gb-option-list\"] ul{ margin: 0; padding: 0; list-style: none; } gb-option-list ul:hover,[riot-tag=\"gb-option-list\"] ul:hover,[data-is=\"gb-option-list\"] ul:hover{ display: block; } gb-option-list a,[riot-tag=\"gb-option-list\"] a,[data-is=\"gb-option-list\"] a{ cursor: pointer; display: block; text-decoration: none; color: black; padding: 10px 12px; } gb-option-list a:hover,[riot-tag=\"gb-option-list\"] a:hover,[data-is=\"gb-option-list\"] a:hover{ background-color: #eee; }', '', function (opts) {});\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbSelect = __webpack_require__(48);\n\t\n\triot.tag2('gb-option', '<a onclick=\"{send}\">{label}</a>', '', '', function (opts) {\n\t    var _this = this;\n\t\n\t    this.label = _gbSelect.Select.optionLabel(opts.option);\n\t    this.value = _gbSelect.Select.optionValue(opts.option);\n\t    this.send = function () {\n\t        return opts.send(_this);\n\t    };\n\t});\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar collections_1 = __webpack_require__(10);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    options: [],\r\n\t    counts: true,\r\n\t    dropdown: false\r\n\t};\r\n\tvar Collections = (function () {\r\n\t    function Collections() {\r\n\t    }\r\n\t    Collections.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.options = this._config.options;\r\n\t        var collectionsService = this.services.collections;\r\n\t        this.collections = collectionsService.collections;\r\n\t        this.labels = collectionsService.isLabeled\r\n\t            ? this._config.options.reduce(this.extractLabels, {})\r\n\t            : {};\r\n\t        this.flux.on(collections_1.COLLECTIONS_UPDATED_EVENT, this.updateCounts);\r\n\t    };\r\n\t    Collections.prototype.updateCounts = function (counts) {\r\n\t        this.update({ counts: counts });\r\n\t    };\r\n\t    Collections.prototype.switchCollection = function (event) {\r\n\t        var element = event.target;\r\n\t        while (element.tagName !== 'A')\r\n\t            element = element.parentElement;\r\n\t        this.onselect(element.dataset['collection']);\r\n\t    };\r\n\t    Collections.prototype.onselect = function (collection) {\r\n\t        this.flux.switchCollection(collection);\r\n\t    };\r\n\t    Collections.prototype.extractLabels = function (labels, collection) {\r\n\t        return Object.assign(labels, (_a = {}, _a[collection.value] = collection.label, _a));\r\n\t        var _a;\r\n\t    };\r\n\t    return Collections;\r\n\t}());\r\n\texports.Collections = Collections;\r\n\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbDetails = __webpack_require__(56);\n\t\n\triot.tag2('gb-details', '<div class=\"gb-details\"> <yield></yield> </div>', '', '', function (opts) {\n\t    this._mixin(_gbDetails.Details);\n\t});\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar product_transformer_1 = __webpack_require__(20);\r\n\tvar clone = __webpack_require__(57);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    idParam: 'id'\r\n\t};\r\n\tvar Details = (function () {\r\n\t    function Details() {\r\n\t    }\r\n\t    Details.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.query = common_1.getParam(this._config.idParam);\r\n\t        this.struct = this.config.structure || {};\r\n\t        this.transformer = new product_transformer_1.ProductTransformer(this.struct);\r\n\t        this.flux.on(groupby_api_1.Events.DETAILS, this.updateRecord);\r\n\t        if (this.query)\r\n\t            this.flux.details(this.query, this.transformer.idField);\r\n\t    };\r\n\t    Details.prototype.updateRecord = function (_a) {\r\n\t        var allMeta = _a.allMeta;\r\n\t        var productMeta = this.transformer.transform(clone(allMeta, false));\r\n\t        this.update({ productMeta: productMeta, allMeta: productMeta() });\r\n\t    };\r\n\t    return Details;\r\n\t}());\r\n\texports.Details = Details;\r\n\n\n/***/ },\n/* 57 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"clone\");\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\tvar _gbDidYouMean = __webpack_require__(59);\n\t\n\triot.tag2('gb-did-you-mean', '<yield> <gb-list class=\"{_style}\" items=\"{didYouMean}\" scope=\"gb-did-you-mean\" inline> <a onclick=\"{_scope.send}\">{item}</a> </gb-list> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbDidYouMean.DidYouMean);\n\t});\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar DidYouMean = (function () {\r\n\t    function DidYouMean() {\r\n\t    }\r\n\t    DidYouMean.prototype.init = function () {\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updateDidYouMean);\r\n\t    };\r\n\t    DidYouMean.prototype.send = function (event) {\r\n\t        var _this = this;\r\n\t        this.flux.rewrite(event.target.text)\r\n\t            .then(function () { return _this.services.tracker.didYouMean(); });\r\n\t    };\r\n\t    DidYouMean.prototype.updateDidYouMean = function (_a) {\r\n\t        var didYouMean = _a.didYouMean;\r\n\t        this.update({ didYouMean: didYouMean });\r\n\t    };\r\n\t    return DidYouMean;\r\n\t}());\r\n\texports.DidYouMean = DidYouMean;\r\n\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(46);\n\t\n\tvar _gbFilter = __webpack_require__(61);\n\t\n\triot.tag2('gb-filter', '<yield> <gb-select scope=\"gb-filter\"> </gb-select> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbFilter.Filter);\n\t});\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar filter_1 = __webpack_require__(17);\r\n\tvar common_1 = __webpack_require__(11);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    field: undefined,\r\n\t    label: 'Filter',\r\n\t    clear: 'Unfiltered'\r\n\t};\r\n\tvar Filter = (function () {\r\n\t    function Filter() {\r\n\t    }\r\n\t    Filter.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.flux.on(filter_1.FILTER_UPDATED_EVENT, this.updateValues);\r\n\t    };\r\n\t    Filter.prototype.convertRefinements = function (navigations) {\r\n\t        var _this = this;\r\n\t        var found = navigations.find(function (_a) {\r\n\t            var name = _a.name;\r\n\t            return _this.services.filter.isTargetNav(name);\r\n\t        });\r\n\t        return found ? found.refinements.map(function (ref) { return ({ label: ref.value, value: ref }); }) : [];\r\n\t    };\r\n\t    Filter.prototype.updateValues = function (res) {\r\n\t        var converted = this.convertRefinements(res.availableNavigation);\r\n\t        if (this.tags['gb-select']) {\r\n\t            this.tags['gb-select'].updateOptions(converted);\r\n\t        }\r\n\t        else {\r\n\t            this.update({ options: converted });\r\n\t        }\r\n\t    };\r\n\t    Filter.prototype.onselect = function (value) {\r\n\t        if (this.selected)\r\n\t            this.flux.unrefine(this.selected, { skipSearch: true });\r\n\t        if (value === '*') {\r\n\t            this.flux.reset();\r\n\t        }\r\n\t        else {\r\n\t            this.flux.refine(this.selected = common_1.toRefinement(value, { name: this._config.field }));\r\n\t        }\r\n\t    };\r\n\t    return Filter;\r\n\t}());\r\n\texports.Filter = Filter;\r\n\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(63);\n\t\n\t__webpack_require__(64);\n\t\n\t__webpack_require__(66);\n\t\n\tvar _gbNavigation = __webpack_require__(67);\n\t\n\triot.tag2('gb-navigation', '<yield> <div class=\"gb-side-nav {_style}\"> <gb-refinement-list each=\"{nav in processed}\"></gb-refinement-list> </div> </yield>', 'gb-navigation .gb-stylish.gb-side-nav,[riot-tag=\"gb-navigation\"] .gb-stylish.gb-side-nav,[data-is=\"gb-navigation\"] .gb-stylish.gb-side-nav{ padding: 12px; }', '', function (opts) {\n\t    this._mixin(_gbNavigation.Navigation);\n\t});\n\n/***/ },\n/* 63 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-refinement-list', '<div id=\"{nav.name}\" class=\"{_style}\"> <h4 class=\"gb-navigation-title\">{nav.displayName}</h4> <ul> <gb-selected-refinement if=\"{_config.showSelected}\" each=\"{ref in nav.selected}\"></gb-selected-refinement> <gb-available-refinement each=\"{ref in nav.refinements}\"></gb-available-refinement> <li class=\"gb-more-refinements\" if=\"{nav.moreRefinements}\"> <a href=\"#\" onclick=\"{moreRefinements}\">More</a> </li> </ul> </div>', 'gb-refinement-list .gb-stylish.gb-refinement-list .gb-navigation-title,[riot-tag=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list .gb-navigation-title,[data-is=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list .gb-navigation-title{ font-size: 18px; margin: 10px 0; } gb-refinement-list .gb-stylish.gb-refinement-list ul,[riot-tag=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list ul,[data-is=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list ul{ margin: 0; padding-left: 8px; }', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.moreRefinements = function () {\n\t    _this.flux.refinements(_this.nav.name);\n\t    _this.nav.moreRefinements = false;\n\t  };\n\t});\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(44);\n\t\n\tvar _gbRefinement = __webpack_require__(65);\n\t\n\triot.tag2('gb-available-refinement', '<li class=\"gb-ref {_style}\"> <a class=\"gb-ref__link\" onclick=\"{send}\"> <span class=\"gb-ref__title\">{toView(ref)}</span> <span class=\"gb-filler\"></span> <gb-badge if=\"{_config.badge}\">{ref.count}</gb-badge> </a> </li>', 'gb-available-refinement .gb-stylish,[riot-tag=\"gb-available-refinement\"] .gb-stylish,[data-is=\"gb-available-refinement\"] .gb-stylish{ list-style: none; } gb-available-refinement .gb-stylish .gb-filler,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-filler,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-filler{ flex-grow: 1; } gb-available-refinement .gb-stylish .gb-ref__link,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-ref__link,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-ref__link{ cursor: pointer; display: flex; padding: 4px 6px; border-radius: 4px; color: black; font-size: 14px; text-decoration: none; align-items: baseline; } gb-available-refinement .gb-stylish .gb-ref__link:hover,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-ref__link:hover,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-ref__link:hover{ background-color: #ddd; }', '', function (opts) {\n\t    this._mixin(_gbRefinement.AvailableRefinement);\n\t});\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar Refinement = (function () {\r\n\t    function Refinement() {\r\n\t    }\r\n\t    Refinement.prototype.init = function () {\r\n\t        this._scopeTo('gb-navigation');\r\n\t        this.toView = common_1.displayRefinement;\r\n\t    };\r\n\t    return Refinement;\r\n\t}());\r\n\texports.Refinement = Refinement;\r\n\tvar AvailableRefinement = (function (_super) {\r\n\t    __extends(AvailableRefinement, _super);\r\n\t    function AvailableRefinement() {\r\n\t        _super.apply(this, arguments);\r\n\t    }\r\n\t    AvailableRefinement.prototype.send = function () {\r\n\t        return this._scope.send(this.ref, this.nav);\r\n\t    };\r\n\t    return AvailableRefinement;\r\n\t}(Refinement));\r\n\texports.AvailableRefinement = AvailableRefinement;\r\n\tvar SelectedRefinement = (function (_super) {\r\n\t    __extends(SelectedRefinement, _super);\r\n\t    function SelectedRefinement() {\r\n\t        _super.apply(this, arguments);\r\n\t    }\r\n\t    SelectedRefinement.prototype.remove = function () {\r\n\t        return this._scope.remove(this.ref, this.nav);\r\n\t    };\r\n\t    return SelectedRefinement;\r\n\t}(Refinement));\r\n\texports.SelectedRefinement = SelectedRefinement;\r\n\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbRefinement = __webpack_require__(65);\n\t\n\triot.tag2('gb-selected-refinement', '<li class=\"gb-ref {_style}\"> <a class=\"gb-ref__link\" onclick=\"{remove}\">&times;</a> <span class=\"gb-ref__value\">{toView(ref)}</span> </li>', 'gb-selected-refinement .gb-stylish,[riot-tag=\"gb-selected-refinement\"] .gb-stylish,[data-is=\"gb-selected-refinement\"] .gb-stylish{ position: relative; list-style: none; padding: 4px 6px; font-size: 14px; } gb-selected-refinement .gb-stylish .gb-ref__link,[riot-tag=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link,[data-is=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link{ cursor: pointer; left: -8px; position: absolute; color: black; text-decoration: none; } gb-selected-refinement .gb-stylish .gb-ref__link:hover,[riot-tag=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link:hover,[data-is=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link:hover{ color: red; font-weight: bold; }', '', function (opts) {\n\t    this._mixin(_gbRefinement.SelectedRefinement);\n\t});\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar clone = __webpack_require__(57);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    badge: true,\r\n\t    showSelected: true\r\n\t};\r\n\tvar Navigation = (function () {\r\n\t    function Navigation() {\r\n\t    }\r\n\t    Navigation.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updateNavigations);\r\n\t        this.flux.on(groupby_api_1.Events.REFINEMENT_RESULTS, this.updateRefinements);\r\n\t    };\r\n\t    Navigation.prototype.updateNavigations = function (res) {\r\n\t        this.update({ processed: this.processNavigations(res) });\r\n\t    };\r\n\t    Navigation.prototype.updateRefinements = function (res) {\r\n\t        this.update({ processed: this.replaceRefinements(res) });\r\n\t    };\r\n\t    Navigation.prototype.replaceRefinements = function (res) {\r\n\t        var found = this.processed.find(function (nav) { return nav.name === res.navigation.name; });\r\n\t        if (found) {\r\n\t            found.refinements = res.navigation.refinements;\r\n\t        }\r\n\t        return this.processed;\r\n\t    };\r\n\t    Navigation.prototype.processNavigations = function (_a) {\r\n\t        var selectedNavigation = _a.selectedNavigation, availableNavigation = _a.availableNavigation;\r\n\t        var processed = clone(availableNavigation);\r\n\t        selectedNavigation.forEach(function (selNav) {\r\n\t            var availNav = processed.find(function (nav) { return nav.name === selNav.name; });\r\n\t            if (availNav) {\r\n\t                availNav.selected = selNav.refinements;\r\n\t            }\r\n\t            else {\r\n\t                processed.unshift(Object.assign({}, selNav, { selected: selNav.refinements, refinements: [] }));\r\n\t            }\r\n\t        });\r\n\t        return processed;\r\n\t    };\r\n\t    Navigation.prototype.send = function (ref, nav) {\r\n\t        return this.flux.refine(common_1.toRefinement(ref, nav));\r\n\t    };\r\n\t    Navigation.prototype.remove = function (ref, nav) {\r\n\t        return this.flux.unrefine(common_1.toRefinement(ref, nav));\r\n\t    };\r\n\t    return Navigation;\r\n\t}());\r\n\texports.Navigation = Navigation;\r\n\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(46);\n\t\n\tvar _gbPageSize = __webpack_require__(69);\n\t\n\triot.tag2('gb-page-size', '<yield> <gb-select scope=\"gb-page-size\"> </gb-select> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbPageSize.PageSize);\n\t});\n\n/***/ },\n/* 69 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.DEFAULT_CONFIG = {\r\n\t    resetOffset: false\r\n\t};\r\n\tvar PageSize = (function () {\r\n\t    function PageSize() {\r\n\t    }\r\n\t    PageSize.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.options = this.config.pageSizes || [10, 25, 50, 100];\r\n\t    };\r\n\t    PageSize.prototype.onselect = function (value) {\r\n\t        var _this = this;\r\n\t        this.flux.resize(value, this._config.resetOffset)\r\n\t            .then(function () { return _this.services.tracker.search(); });\r\n\t    };\r\n\t    return PageSize;\r\n\t}());\r\n\texports.PageSize = PageSize;\r\n\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(71);\n\t\n\tvar _gbPager = __webpack_require__(73);\n\t\n\triot.tag2('gb-pager', '<div class=\"gb-pager {_style}\"> <a class=\"gb-pager__link prev {disabled: _scope.backDisabled}\" onclick=\"{_scope.pager.prev}\"> <gb-icon if=\"{_config.icons}\" value=\"{_config.prev_icon}\"></gb-icon> <span if=\"{_config.labels}\">{_config.prev_label}</span> </a> <yield></yield> <a class=\"gb-pager__link next {disabled: _scope.forwardDisabled}\" onclick=\"{_scope.pager.next}\"> <span if=\"{_config.labels}\">{_config.next_label}</span> <gb-icon if=\"{_config.icons}\" value=\"{_config.next_icon}\"></gb-icon> </a> </div>', 'gb-pager .gb-stylish a,[riot-tag=\"gb-pager\"] .gb-stylish a,[data-is=\"gb-pager\"] .gb-stylish a{ cursor: pointer; } gb-pager .gb-stylish.gb-pager,[riot-tag=\"gb-pager\"] .gb-stylish.gb-pager,[data-is=\"gb-pager\"] .gb-stylish.gb-pager{ display: flex; } gb-pager .gb-stylish .gb-pager__link,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link{ display: flex; text-decoration: none; color: #888; padding: 5px 14px; } gb-pager .gb-stylish .gb-pager__link:hover,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link:hover,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link:hover{ color: black; } gb-pager .gb-stylish .gb-pager__link.disabled,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link.disabled,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link.disabled{ color: #ddd; cursor: not-allowed; } gb-pager .gb-stylish gb-pages,[riot-tag=\"gb-pager\"] .gb-stylish gb-pages,[data-is=\"gb-pager\"] .gb-stylish gb-pages{ flex: 1; } gb-pager .gb-stylish gb-icon img,[riot-tag=\"gb-pager\"] .gb-stylish gb-icon img,[data-is=\"gb-pager\"] .gb-stylish gb-icon img{ width: 20px; }', '', function (opts) {\n\t    this._mixin(_gbPager.Pager);\n\t});\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbIcon = __webpack_require__(72);\n\t\n\triot.tag2('gb-icon', '<i if=\"{classes}\" class=\"{classes}\"></i> <img if=\"{url}\" riot-src=\"{url}\"></img>', '', '', function (opts) {\n\t    this._mixin(_gbIcon.Icon);\n\t});\n\n/***/ },\n/* 72 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.IMAGE_PATTERN = /.*\\..*/;\r\n\texports.DATA_URL_PREFIX = 'data:image/';\r\n\tvar Icon = (function () {\r\n\t    function Icon() {\r\n\t    }\r\n\t    Icon.prototype.init = function () {\r\n\t        this.configure();\r\n\t        if (this.isImage(this._config.value)) {\r\n\t            this.url = this._config.value;\r\n\t        }\r\n\t        else {\r\n\t            this.classes = this._config.value;\r\n\t        }\r\n\t    };\r\n\t    Icon.prototype.isImage = function (value) {\r\n\t        var matches = value.match(exports.IMAGE_PATTERN);\r\n\t        return (matches && matches.length > 0) || value.startsWith(exports.DATA_URL_PREFIX);\r\n\t    };\r\n\t    return Icon;\r\n\t}());\r\n\texports.Icon = Icon;\r\n\n\n/***/ },\n/* 73 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Pager = (function () {\r\n\t    function Pager() {\r\n\t    }\r\n\t    Pager.prototype.init = function () {\r\n\t        this._scopeTo('gb-paging');\r\n\t        this._config = this._scope._config;\r\n\t    };\r\n\t    return Pager;\r\n\t}());\r\n\texports.Pager = Pager;\r\n\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbPages = __webpack_require__(75);\n\t\n\triot.tag2('gb-pages', '<ul class=\"gb-pages {_style}\" if=\"{_config.pages}\"> <span class=\"gb-pages__ellipsis\" if=\"{_scope.lowOverflow}\">&hellip;</span> <li each=\"{pageNumber in _scope.pageNumbers}\"> <a class=\"gb-pages__page {selected: _scope.currentPage === pageNumber}\" onclick=\"{jumpTo}\">{pageNumber}</a> </li> <span class=\"gb-pages__ellipsis\" if=\"{_scope.highOverflow}\">&hellip;</span> </ul>', 'gb-pages .gb-stylish a,[riot-tag=\"gb-pages\"] .gb-stylish a,[data-is=\"gb-pages\"] .gb-stylish a{ cursor: pointer; } gb-pages .gb-stylish.gb-pages,[riot-tag=\"gb-pages\"] .gb-stylish.gb-pages,[data-is=\"gb-pages\"] .gb-stylish.gb-pages{ margin: 0; padding: 0; list-style: none; display: flex; align-items: center; justify-content: center; height: 100%; } gb-pages .gb-stylish.gb-pages li,[riot-tag=\"gb-pages\"] .gb-stylish.gb-pages li,[data-is=\"gb-pages\"] .gb-stylish.gb-pages li{ display: inline; } gb-pages .gb-stylish .gb-pages__page,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page,gb-pages .gb-stylish .gb-pages__ellipsis,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__ellipsis,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__ellipsis{ text-decoration: none; color: #888; } gb-pages .gb-stylish .gb-pages__page,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page{ padding: 0 4px; } gb-pages .gb-stylish .gb-pages__page:hover,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page:hover,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page:hover,gb-pages .gb-stylish .gb-pages__page.selected,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page.selected,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page.selected{ color: black; }', '', function (opts) {\n\t    this._mixin(_gbPages.Pages);\n\t});\n\n/***/ },\n/* 75 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Pages = (function () {\r\n\t    function Pages() {\r\n\t    }\r\n\t    Pages.prototype.init = function () {\r\n\t        this._scopeTo('gb-paging');\r\n\t        this._config = this._scope._config;\r\n\t    };\r\n\t    Pages.prototype.jumpTo = function (_a) {\r\n\t        var target = _a.target;\r\n\t        this._scope.pager.switchPage(Number(target.text));\r\n\t    };\r\n\t    return Pages;\r\n\t}());\r\n\texports.Pages = Pages;\r\n\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(77);\n\t\n\t__webpack_require__(70);\n\t\n\t__webpack_require__(74);\n\t\n\tvar _gbPaging = __webpack_require__(79);\n\t\n\triot.tag2('gb-paging', '<yield> <gb-terminal-pager> <gb-pager> <gb-pages></gb-pages> </gb-pager> </gb-terminal-pager> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbPaging.Paging);\n\t});\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(71);\n\t\n\tvar _gbTerminalPager = __webpack_require__(78);\n\t\n\triot.tag2('gb-terminal-pager', '<div class=\"gb-terminal-pager {_style}\"> <a class=\"gb-terminal__link first {disabled: _scope.backDisabled}\" if=\"{_scope._config.terminals}\" onclick=\"{_scope.pager.first}\"> <gb-icon if=\"{_config.icons}\" value=\"{_config.first_icon}\"></gb-icon> <span if=\"{_config.labels}\">{_config.numeric ? 1 : _config.first_label}</span> </a> <yield></yield> <a class=\"gb-terminal__link last {disabled: _scope.forwardDisabled}\" if=\"{_config.terminals}\" onclick=\"{_scope.pager.last}\"> <span if=\"{_config.labels}\">{_config.numeric ? _scope.lastPage : _config.last_label}</span> <gb-icon if=\"{_config.icons}\" value=\"{_config.last_icon}\"></gb-icon> </a> </div>', 'gb-terminal-pager .gb-stylish a,[riot-tag=\"gb-terminal-pager\"] .gb-stylish a,[data-is=\"gb-terminal-pager\"] .gb-stylish a{ cursor: pointer; } gb-terminal-pager .gb-stylish.gb-terminal-pager,[riot-tag=\"gb-terminal-pager\"] .gb-stylish.gb-terminal-pager,[data-is=\"gb-terminal-pager\"] .gb-stylish.gb-terminal-pager{ display: flex; width: 100%; } gb-terminal-pager .gb-stylish .gb-terminal__link,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link{ display: flex; text-decoration: none; color: #888; padding: 5px 14px; } gb-terminal-pager .gb-stylish .gb-terminal__link:hover,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link:hover,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link:hover{ color: black; } gb-terminal-pager .gb-stylish .gb-terminal__link.disabled,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link.disabled,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link.disabled{ color: #ddd; cursor: not-allowed; } gb-terminal-pager .gb-stylish gb-pager,[riot-tag=\"gb-terminal-pager\"] .gb-stylish gb-pager,[data-is=\"gb-terminal-pager\"] .gb-stylish gb-pager{ flex: 1; } gb-terminal-pager .gb-stylish gb-icon img,[riot-tag=\"gb-terminal-pager\"] .gb-stylish gb-icon img,[data-is=\"gb-terminal-pager\"] .gb-stylish gb-icon img{ width: 20px; }', '', function (opts) {\n\t    this._mixin(_gbTerminalPager.TerminalPager);\n\t});\n\n/***/ },\n/* 78 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar TerminalPager = (function () {\r\n\t    function TerminalPager() {\r\n\t    }\r\n\t    TerminalPager.prototype.init = function () {\r\n\t        this._scopeTo('gb-paging');\r\n\t        this._config = this._scope._config;\r\n\t    };\r\n\t    return TerminalPager;\r\n\t}());\r\n\texports.TerminalPager = TerminalPager;\r\n\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    limit: 5,\r\n\t    pages: false,\r\n\t    numeric: false,\r\n\t    terminals: true,\r\n\t    labels: true,\r\n\t    icons: true,\r\n\t    first_label: 'First',\r\n\t    prev_label: 'Prev',\r\n\t    next_label: 'Next',\r\n\t    last_label: 'Last',\r\n\t    first_icon: __webpack_require__(80),\r\n\t    prev_icon: __webpack_require__(81),\r\n\t    next_icon: __webpack_require__(82),\r\n\t    last_icon: __webpack_require__(83)\r\n\t};\r\n\tvar Paging = (function () {\r\n\t    function Paging() {\r\n\t    }\r\n\t    Paging.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        // default initial state\r\n\t        this.backDisabled = true;\r\n\t        this.currentPage = 1;\r\n\t        this.pager = this.wrapPager(this.flux.page);\r\n\t        this.flux.on(groupby_api_1.Events.PAGE_CHANGED, this.updateCurrentPage);\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.pageInfo);\r\n\t    };\r\n\t    Paging.prototype.pageInfo = function () {\r\n\t        var pageNumbers = this.flux.page.pageNumbers(this._config.limit);\r\n\t        var lastPage = this.flux.page.finalPage;\r\n\t        var currentPage = this.flux.page.currentPage;\r\n\t        this.updatePageInfo(pageNumbers, currentPage, lastPage);\r\n\t    };\r\n\t    Paging.prototype.updatePageInfo = function (pageNumbers, currentPage, lastPage) {\r\n\t        this.update({\r\n\t            pageNumbers: pageNumbers,\r\n\t            currentPage: currentPage,\r\n\t            lastPage: lastPage,\r\n\t            lowOverflow: pageNumbers[0] !== 1,\r\n\t            highOverflow: pageNumbers[pageNumbers.length - 1] !== lastPage,\r\n\t            backDisabled: currentPage === 1,\r\n\t            forwardDisabled: currentPage === lastPage\r\n\t        });\r\n\t    };\r\n\t    Paging.prototype.updateCurrentPage = function (_a) {\r\n\t        var pageNumber = _a.pageNumber;\r\n\t        this.update({ currentPage: pageNumber });\r\n\t    };\r\n\t    Paging.prototype.wrapPager = function (pager) {\r\n\t        var _this = this;\r\n\t        return {\r\n\t            first: function () { return !_this.backDisabled && pager.reset().then(_this.emitEvent); },\r\n\t            prev: function () { return !_this.backDisabled && pager.prev().then(_this.emitEvent); },\r\n\t            next: function () { return !_this.forwardDisabled && pager.next().then(_this.emitEvent); },\r\n\t            last: function () { return !_this.forwardDisabled && pager.last().then(_this.emitEvent); },\r\n\t            switchPage: function (page) { return pager.switchPage(page).then(_this.emitEvent); }\r\n\t        };\r\n\t    };\r\n\t    Paging.prototype.emitEvent = function () {\r\n\t        this.services.tracker.search();\r\n\t    };\r\n\t    return Paging;\r\n\t}());\r\n\texports.Paging = Paging;\r\n\n\n/***/ },\n/* 80 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABYmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgIHRpZmY6T3JpZW50YXRpb249IjEiLz4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9InIiPz60J7anAAABhWlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kbtLA0EQhz8TxeADCwNaWKQQBYmiUYJ2miA+CEGigq8mOfMQcslxd0HE0sI2hYUPbBSxsdZO/AcEQVArEWzFQsFG5JxNhIiYWXb329/OzO7Ogmshq+lWbT/oOduMTYR8C4tLvvonPLThpRt/XLOMsZmZCFXt444aNd/2qlzV/f61xtWkpUGNR3hUM0xbeFI4um4bineFvVomvip8Juw35YLCD0pPlPlFcbrELpXTa87FwsJeYV/6Fyd+sZYxdeEh4U49W9B+7qNe0pTMzc8qXXoHFjEmCOFjinHCBBlgRMYgvQTokxVV4gOl+Ch5idVkNNjAZI00GWz8ohYke1LmlOhJaVnxEFN/8Le2VmowUD6haRrqnh3nvQfqD+Br23E+jxzn6xjcUpernUp8fgeGX0UvVrTOQ2jZgvPLipY4gYsitD8acTNektzSXakUvJ1C8yK03kDDcrluP/sc38PcJkSuYW8fusS/ZeUbWh5nYM1tRxkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAGBSURBVHic7d0xblNhEIXRS3qyoCT0QLJhVpDNpDMFVFBZspBj8vxmnm3NOdJrR5a+6/pPAAAAAAAAAAAAAAAAAAAAAK7TfZIfSR5v5C6F7pO8JvmTZJe6WF13KXQYaf/tkjxd6V0KHYtUEavrLoVORdp/P7M8VtddCn0k0mGsLxe+S6ElkZbE6rpLoXMi7b+3JJ83vkuhNZF+Jfm68V0KiT+Y+IOJP9iaSL/TE//UXQqtjfRt47sUEn8w8QcTfzDxBxN/MPEHWxvp+8Z3KST+YOIPJv5g4g8m/mBrIz1vfJdC4g8m/mDiDyb+YOJfgbtL/4AVPt3YXY5Y+2992fguDYwAI8AIiBEQIyBGQIyAGAExAmIExAiIERAjIEZAjIAYATECYgTECIgRECMgRkA8GEHOi7VL8nChuzRYEmtJpK67NPhIrHMidd2lwf8eeDw3UtddGrz3xOvaSF13afDvI89Vkbru0mD/zHt1pK67AAAAAAAAAAAAAAAAAAAAwGB/AYR4hXFo7p5xAAAAAElFTkSuQmCC\"\n\n/***/ },\n/* 81 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACrklEQVR4Ae3dvXLTQBQF4IQeHihAD0leOE+Ql0kHBVSwKjzjIj9er65GZ/V5RpXlq7vfOeOk882NFwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgLoEv7ThP7fo617Gc5hKBJfzndv1r1692KUFDOMrrPPylAKcSfDsKwJHP+Vr4SnCQRrwX/qkEv5uFb4IJC3FJ+Ocl+D6hwWGP1BO+EkxWk2vCP5XgpVl8nszjUMcZCf9Pk/pxKK3JDiv8yQLtOY7we7Qmu1f4kwXac5yR8P+2B/mb36O9s3tHw/+5s/NYp0NA+B1Ys90q/NkS7TiP8DuwZrtV+LMl2nEe4XdgzXar8GdLtOM8o+HfdzzLrTsTEP7OAtlyHeFvqb2zZwl/Z4FsuY7wt9Te2bOEv7NAtlxnNPyHLZf1rHUFhL+uZ9Q04UfFte6ywl/XM2qa8KPiWndZ4a/o+WnFWSmjblMWtefbAqPfAo9vj/ZOioASpCRVuKcSFOKmjFaClKQK91SCQtyU0UqQklThnkpQiJsyWglSkircUwkKcVNGK0FKUoV7KkEhbspoJUhJqnBPJSjETRmtBClJFe6pBIW4KaOVICWpwj2VoBA3ZbQSpCRVuKcSFOKmjFaClKQK91SCQtyU0UqQklThnkpQiJsyeqQEfjAiJeUP9rymBMtvCd59MNfbQQI9JRB+ULA9q15SAuH3iAbe+14JhB8Y6DUrv1YC4V8jGfyZ8xIIPzjIkdWXEiw/H++//RFFnyVAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgS6BP4DIgpCusyEaeEAAAAASUVORK5CYII=\"\n\n/***/ },\n/* 82 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACtklEQVR4Ae3dQW7UQBAF0Ch7OFCAPQQunBNwGXawgBUpLywhFEFc3Ym7ym8kK5uU3f3+z8QjZTI3Nx4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgdcTuItLPcTx9vUu6UqrCGzhf4/jdxxf41CCQLjK48/wtwIowVWSj30+Fb4SXKQA/wpfCZqX4DnhK0HTEhwJXwmaleBN7OdbHHuwR756ddCkDF9iH7+UoEmayW0oQRKu05gSdEozuRclSMJ1GlOCTmkm96IESbhOY0rQKc3kXpQgCddpTAk6pZncixIk4TqNKUGnNJN7UYIkXKcxJeiUZnIvSpCE6zSmBJ3STO5FCZJwncaUoFOayb0oQRKu05gSdEozuRclSMJ1GlOCTmkm96IESbhOY0rQKc3kXi5XgtskVNex7Y0mHhcV+Bz79oYT4R9+25m3nBUvjZ/84gGOLF/4I3rFZ4VfPMCR5d/HsBu+EcHCs8IvHN7o0oU/Klh4XviFwxtduvBHBQvPC79weKNL/xQncLc/qlh0XvhFg5uxbOHPUCx6DuEXDW7GsoU/Q7HoOYRfNLgZyxb+DMWi5/gY6/ZSr2h4o8vewv8Zx5F/Gr1/r7/kGdU/eV74Jwdw5uWFf6b+ydcW/skBnHl5Hxhxpv4i1/4Q6/gRx34z95yvbvgWCW/WMo6UQPiz1Bc7z/tYz/+eCYS/WGizl7OVYP/I2L9/FQh/tvai53uqBMJfNKyXWta7OPH+TCD8l1Je/LxbCR7i8MnhiwdleQQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMAxgUc/cUO5Y0FtKQAAAABJRU5ErkJggg==\"\n\n/***/ },\n/* 83 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,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\"\n\n/***/ },\n/* 84 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(85);\n\t\n\t__webpack_require__(86);\n\t\n\t__webpack_require__(88);\n\t\n\t__webpack_require__(90);\n\t\n\tvar _gbQuery = __webpack_require__(108);\n\t\n\triot.tag2('gb-query', '<yield> <div class=\"gb-query {_style}\"> <gb-search-box></gb-search-box> <gb-submit></gb-submit> <gb-reset></gb-reset> <gb-sayt if=\"{_config.sayt}\"></gb-sayt> </div> </yield>', 'gb-query .gb-stylish.gb-query,[riot-tag=\"gb-query\"] .gb-stylish.gb-query,[data-is=\"gb-query\"] .gb-stylish.gb-query{ position: relative; display: flex; align-items: baseline; } gb-query .gb-stylish.gb-query gb-sayt,[riot-tag=\"gb-query\"] .gb-stylish.gb-query gb-sayt,[data-is=\"gb-query\"] .gb-stylish.gb-query gb-sayt{ top: 31px; left: 0; z-index: 10; position: absolute; min-width: 175px; background-color: #fff; box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); }', '', function (opts) {\n\t    this._mixin(_gbQuery.Query);\n\t});\n\n/***/ },\n/* 85 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-search-box', '<input name=\"searchBox\" class=\"{_style}\" type=\"text\" placeholder=\"Search...\" autofocus>', 'gb-search-box input.gb-stylish,[riot-tag=\"gb-search-box\"] input.gb-stylish,[data-is=\"gb-search-box\"] input.gb-stylish{ padding: 6px 12px; font-size: 14px; }', '', function (opts) {});\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbSubmit = __webpack_require__(87);\n\t\n\triot.tag2('gb-submit', '<yield> <a class=\"gb-submit {_style}\">&#128269;</a> </yield>', 'gb-submit .gb-stylish.gb-submit,[riot-tag=\"gb-submit\"] .gb-stylish.gb-submit,[data-is=\"gb-submit\"] .gb-stylish.gb-submit{ padding: 4px; } gb-submit .gb-stylish.gb-submit:hover,[riot-tag=\"gb-submit\"] .gb-stylish.gb-submit:hover,[data-is=\"gb-submit\"] .gb-stylish.gb-submit:hover{ cursor: pointer; }', '', function (opts) {\n\t    this._mixin(_gbSubmit.Submit);\n\t});\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    label: 'Search',\r\n\t    staticSearch: false\r\n\t};\r\n\tvar Submit = (function () {\r\n\t    function Submit() {\r\n\t    }\r\n\t    Submit.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        if (this.root.tagName === 'INPUT') {\r\n\t            this.root.value = this._config.label;\r\n\t        }\r\n\t        this.on('mount', this.setSearchBox);\r\n\t        this.root.addEventListener('click', this.submitQuery);\r\n\t    };\r\n\t    Submit.prototype.setSearchBox = function () {\r\n\t        this.searchBox = common_1.findSearchBox();\r\n\t    };\r\n\t    Submit.prototype.submitQuery = function () {\r\n\t        var _this = this;\r\n\t        var inputValue = this.searchBox.value;\r\n\t        if (this._config.staticSearch && this.services.url.active()) {\r\n\t            this.services.url.update(inputValue, []);\r\n\t        }\r\n\t        else {\r\n\t            this.flux.reset(inputValue)\r\n\t                .then(function () { return _this.services.tracker.search(); });\r\n\t        }\r\n\t    };\r\n\t    return Submit;\r\n\t}());\r\n\texports.Submit = Submit;\r\n\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbReset = __webpack_require__(89);\n\t\n\triot.tag2('gb-reset', '<yield> <a class=\"gb-reset {_style}\">&times;</a> </yield>', 'gb-reset .gb-stylish.gb-reset,[riot-tag=\"gb-reset\"] .gb-stylish.gb-reset,[data-is=\"gb-reset\"] .gb-stylish.gb-reset{ color: #888; padding: 4px; } gb-reset .gb-stylish.gb-reset:hover,[riot-tag=\"gb-reset\"] .gb-stylish.gb-reset:hover,[data-is=\"gb-reset\"] .gb-stylish.gb-reset:hover{ color: black; cursor: pointer; }', '', function (opts) {\n\t    this._mixin(_gbReset.Reset);\n\t});\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar Reset = (function () {\r\n\t    function Reset() {\r\n\t    }\r\n\t    Reset.prototype.init = function () {\r\n\t        this.on('mount', this.setSearchBox);\r\n\t        this.root.addEventListener('click', this.clearQuery);\r\n\t    };\r\n\t    Reset.prototype.setSearchBox = function () {\r\n\t        this.searchBox = common_1.findSearchBox();\r\n\t    };\r\n\t    Reset.prototype.clearQuery = function () {\r\n\t        var _this = this;\r\n\t        this.flux.reset(this.searchBox.value = '')\r\n\t            .then(function () { return _this.services.tracker.search(); });\r\n\t    };\r\n\t    return Reset;\r\n\t}());\r\n\texports.Reset = Reset;\r\n\n\n/***/ },\n/* 90 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(91);\n\t\n\t__webpack_require__(99);\n\t\n\tvar _gbSayt = __webpack_require__(105);\n\t\n\tvar _tag = __webpack_require__(28);\n\t\n\triot.tag2('gb-sayt', '<yield> <div class=\"{_style}\" if=\"{(queries && queries.length) || (navigations && navigations.length)}\"> <gb-sayt-autocomplete></gb-sayt-autocomplete> <gb-sayt-products if=\"{showProducts}\"></gb-sayt-products> </div> </yield>', 'gb-sayt div.gb-stylish,[riot-tag=\"gb-sayt\"] div.gb-stylish,[data-is=\"gb-sayt\"] div.gb-stylish{ display: flex; } gb-sayt .gb-stylish ul,[riot-tag=\"gb-sayt\"] .gb-stylish ul,[data-is=\"gb-sayt\"] .gb-stylish ul{ list-style: none; margin: 0; padding: 0; } gb-sayt .gb-stylish gb-sayt-link:hover,[riot-tag=\"gb-sayt\"] .gb-stylish gb-sayt-link:hover,[data-is=\"gb-sayt\"] .gb-stylish gb-sayt-link:hover,gb-sayt .gb-stylish gb-sayt-link.active,[riot-tag=\"gb-sayt\"] .gb-stylish gb-sayt-link.active,[data-is=\"gb-sayt\"] .gb-stylish gb-sayt-link.active{ background-color: #f1f1f1; display: block; } gb-sayt .gb-stylish gb-list li,[riot-tag=\"gb-sayt\"] .gb-stylish gb-list li,[data-is=\"gb-sayt\"] .gb-stylish gb-list li{ margin: 0px; }', '', function (opts) {\n\t    this._mixin(_tag.SaytTag, _gbSayt.Sayt);\n\t});\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(92);\n\t\n\t__webpack_require__(96);\n\t\n\t__webpack_require__(97);\n\t\n\t__webpack_require__(98);\n\t\n\triot.tag2('gb-sayt-autocomplete', '<yield> <gb-sayt-categories></gb-sayt-categories> <gb-sayt-divider></gb-sayt-divider> <gb-sayt-search-terms></gb-sayt-search-terms> <gb-sayt-divider></gb-sayt-divider> <gb-sayt-refinements each=\"{navigations}\"></gb-sayt-refinements> </yield>', '.gb-stylish gb-sayt-autocomplete,.gb-stylish [riot-tag=\"gb-sayt-autocomplete\"],.gb-stylish [data-is=\"gb-sayt-autocomplete\"]{ min-width: 210px; }', '', function (opts) {});\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(93);\n\t\n\t__webpack_require__(94);\n\t\n\triot.tag2('gb-sayt-categories', '<gb-list items=\"{categoryResults}\"> <gb-sayt-link send=\"{_scope.searchCategory}\" data-value=\"{item.value}\" data-refinement=\"{item.category}\" data-field=\"{_scope.categoryField}\" data-norefine=\"{item.noRefine}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item.value, \\'<b>$&</b>\\')}\"></gb-raw> in <span class=\"gb-category-query\">{item.category}</span> </yield> </gb-sayt-link> </gb-list>', '.gb-stylish gb-sayt-categories .gb-category-query,.gb-stylish [riot-tag=\"gb-sayt-categories\"] .gb-category-query,.gb-stylish [data-is=\"gb-sayt-categories\"] .gb-category-query{ font-weight: bold; color: darkorange; }', '', function (opts) {\n\t\n\t    this._scopeTo('gb-sayt');\n\t});\n\n/***/ },\n/* 93 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-sayt-link', '<a onclick=\"{opts.send}\"> <yield></yield> </a>', '.gb-stylish gb-sayt-link a,.gb-stylish [riot-tag=\"gb-sayt-link\"] a,.gb-stylish [data-is=\"gb-sayt-link\"] a{ padding: 5px 15px; text-decoration: none; display: block; }', '', function (opts) {});\n\n/***/ },\n/* 94 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbRaw = __webpack_require__(95);\n\t\n\triot.tag2('gb-raw', '<span></span>', '', '', function (opts) {\n\t    this._mixin(_gbRaw.Raw);\n\t});\n\n/***/ },\n/* 95 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Raw = (function () {\r\n\t    function Raw() {\r\n\t    }\r\n\t    Raw.prototype.init = function () {\r\n\t        this.configure();\r\n\t        this.on('update', this.updateContent);\r\n\t        this.on('mount', this.updateContent);\r\n\t    };\r\n\t    Raw.prototype.updateContent = function () {\r\n\t        this.root.innerHTML = this._config.content;\r\n\t    };\r\n\t    return Raw;\r\n\t}());\r\n\texports.Raw = Raw;\r\n\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(93);\n\t\n\t__webpack_require__(94);\n\t\n\triot.tag2('gb-sayt-search-terms', '<gb-list items=\"{_scope.queries}\"> <gb-sayt-link send=\"{_scope.search}\" data-value=\"{item.value}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item.value, \\'<b>$&</b>\\')}\"></gb-raw> </yield> </gb-sayt-link> </gb-list>', '', '', function (opts) {\n\t\n\t    this._scopeTo('gb-sayt');\n\t});\n\n/***/ },\n/* 97 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(93);\n\t\n\t__webpack_require__(94);\n\t\n\triot.tag2('gb-sayt-refinements', '<h4>{displayName}</h4> <gb-list items=\"{values}\"> <gb-sayt-link send=\"{_scope.searchRefinement}\" data-value=\"{displayName}: {item}\" data-refinement=\"{item}\" data-field=\"{name}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item, \\'<b>$&</b>\\')}\"></gb-raw> </yield> </gb-sayt-link> </gb-list>', '.gb-stylish gb-sayt-refinements h4,.gb-stylish [riot-tag=\"gb-sayt-refinements\"] h4,.gb-stylish [data-is=\"gb-sayt-refinements\"] h4{ margin: 4px; }', '', function (opts) {\n\t\n\t    this._scopeTo('gb-sayt');\n\t});\n\n/***/ },\n/* 98 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-sayt-divider', '<div if=\"{isVisible()}\"></div>', '.gb-stylish gb-sayt-divider div,.gb-stylish [riot-tag=\"gb-sayt-divider\"] div,.gb-stylish [data-is=\"gb-sayt-divider\"] div{ display: block; margin: 3px 10%; border-top: 1px solid #777; }', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.isVisible = function () {\n\t    return _this.root.nextElementSibling && _this.root.nextElementSibling.querySelector('li') && _this.root.previousElementSibling && _this.root.previousElementSibling.querySelector('li');\n\t  };\n\t});\n\n/***/ },\n/* 99 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(100);\n\t\n\t__webpack_require__(101);\n\t\n\triot.tag2('gb-sayt-products', '<ul class=\"{_style}\"> <li class=\"gb-sayt-product\" each=\"{products}\"> <yield> <gb-product all_meta=\"{allMeta}\"> <gb-product-image thumbnail></gb-product-image> </gb-product> </yield> </li> </ul>', '.gb-stylish gb-sayt-products,.gb-stylish [riot-tag=\"gb-sayt-products\"],.gb-stylish [data-is=\"gb-sayt-products\"]{ min-width: 300px; } gb-sayt-products ul.gb-stylish,[riot-tag=\"gb-sayt-products\"] ul.gb-stylish,[data-is=\"gb-sayt-products\"] ul.gb-stylish{ display: flex; flex-wrap: wrap; align-items: center; width: calc(86px * 4); align-content: flex-start; } gb-sayt-products .gb-stylish gb-product-image img,[riot-tag=\"gb-sayt-products\"] .gb-stylish gb-product-image img,[data-is=\"gb-sayt-products\"] .gb-stylish gb-product-image img{ vertical-align: bottom; margin: 3px; } gb-sayt-products .gb-stylish gb-product-image img:hover,[riot-tag=\"gb-sayt-products\"] .gb-stylish gb-product-image img:hover,[data-is=\"gb-sayt-products\"] .gb-stylish gb-product-image img:hover{ box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); }', '', function (opts) {\n\t    this._scopeTo('gb-sayt');\n\t});\n\n/***/ },\n/* 100 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(101);\n\t\n\t__webpack_require__(102);\n\t\n\t__webpack_require__(103);\n\t\n\tvar _gbProduct = __webpack_require__(104);\n\t\n\triot.tag2('gb-product', '<yield> <gb-product-image></gb-product-image> <gb-product-info></gb-product-info> <gb-variant-switcher></gb-variant-switcher> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbProduct.Product);\n\t});\n\n/***/ },\n/* 101 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-product-image', '<a class=\"gb-product-image {_style}\" href=\"{_scope.link()}\"> <img class=\"{thumbnail: opts.thumbnail !== undefined}\" riot-src=\"{imageLink()}\" alt=\"\"> </a>', 'gb-product-image .gb-product-image.gb-stylish img,[riot-tag=\"gb-product-image\"] .gb-product-image.gb-stylish img,[data-is=\"gb-product-image\"] .gb-product-image.gb-stylish img{ width: 380px; } gb-product-image .gb-product-image.gb-stylish img.thumbnail,[riot-tag=\"gb-product-image\"] .gb-product-image.gb-stylish img.thumbnail,[data-is=\"gb-product-image\"] .gb-product-image.gb-stylish img.thumbnail{ width: 80px; }', '', function (opts) {\n\t    this._scopeTo('gb-product');\n\t    var _scope = this._scope;\n\t    this.imageLink = function () {\n\t        return _scope.image(_scope.productMeta().image);\n\t    };\n\t});\n\n/***/ },\n/* 102 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-product-info', '<a href=\"{_scope.link()}\"> <p class=\"gb-product__title\">{_scope.productMeta().title}</p> <p class=\"gb-product__price\">{_scope.productMeta().price}</p> </a>', '', '', function (opts) {\n\t    this._scopeTo('gb-product');\n\t});\n\n/***/ },\n/* 103 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-variant-switcher', '<a if=\"{_scope.variants.length > 1}\" each=\"{variant, i in _scope.variants}\" class=\"gb-product__variant-link\" onclick=\"{_scope.switchVariant}\" data-index=\"{i}\"> {i} </a>', '', '', function (opts) {\n\t    this._scopeTo('gb-product');\n\t});\n\n/***/ },\n/* 104 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar product_transformer_1 = __webpack_require__(20);\r\n\tvar clone = __webpack_require__(57);\r\n\tvar oget = __webpack_require__(15);\r\n\tvar Product = (function () {\r\n\t    function Product() {\r\n\t    }\r\n\t    Product.prototype.init = function () {\r\n\t        this.variantIndex = 0;\r\n\t        this.detailsUrl = oget(this.services, 'url.urlConfig.detailsUrl', 'details.html');\r\n\t        this.struct = this._scope.struct || this.config.structure || {};\r\n\t        this.transformer = new product_transformer_1.ProductTransformer(this.struct);\r\n\t        this.transformRecord(this.opts.all_meta);\r\n\t    };\r\n\t    Product.prototype.transformRecord = function (allMeta) {\r\n\t        var _this = this;\r\n\t        var productMeta = this.transformer.transform(clone(allMeta, false));\r\n\t        this.update({\r\n\t            productMeta: function () { return productMeta(_this.variantIndex); },\r\n\t            variants: productMeta.variants || [],\r\n\t            allMeta: productMeta.transformedMeta\r\n\t        });\r\n\t    };\r\n\t    Product.prototype.link = function () {\r\n\t        return this.productMeta().url || this.detailsUrl + \"?id=\" + this.productMeta().id;\r\n\t    };\r\n\t    Product.prototype.image = function (imageObj) {\r\n\t        return Array.isArray(imageObj) ? imageObj[0] : imageObj;\r\n\t    };\r\n\t    Product.prototype.switchVariant = function (event) {\r\n\t        var variantIndex = event.target.dataset['index'];\r\n\t        this.update({ variantIndex: variantIndex });\r\n\t    };\r\n\t    return Product;\r\n\t}());\r\n\texports.Product = Product;\r\n\n\n/***/ },\n/* 105 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar autocomplete_1 = __webpack_require__(106);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar escapeStringRegexp = __webpack_require__(107);\r\n\texports.DEFAULT_CONFIG = {\r\n\t    allCategoriesLabel: 'All Departments',\r\n\t    products: 4,\r\n\t    queries: 5,\r\n\t    minimumCharacters: 1,\r\n\t    delay: 100,\r\n\t    autoSearch: true,\r\n\t    staticSearch: false,\r\n\t    highlight: true,\r\n\t    https: false,\r\n\t    navigationNames: {},\r\n\t    allowedNavigations: []\r\n\t};\r\n\texports.MIN_DELAY = 100;\r\n\tvar Sayt = (function () {\r\n\t    function Sayt() {\r\n\t    }\r\n\t    Sayt.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.struct = Object.assign({}, this.config.structure, this._config.structure);\r\n\t        this.showProducts = this._config.products > 0;\r\n\t        this.sayt.configure(this.generateSaytConfig());\r\n\t        this.on('mount', this.initializeAutocomplete);\r\n\t        this.flux.on(autocomplete_1.AUTOCOMPLETE_HIDE_EVENT, this.reset);\r\n\t    };\r\n\t    Sayt.prototype.initializeAutocomplete = function () {\r\n\t        this.autocomplete = new autocomplete_1.Autocomplete(this);\r\n\t    };\r\n\t    Sayt.prototype.generateSaytConfig = function () {\r\n\t        return {\r\n\t            subdomain: this.config.customerId,\r\n\t            collection: this._config.collection || this.config.collection,\r\n\t            autocomplete: {\r\n\t                numSearchTerms: this._config.queries,\r\n\t                language: this._config.language\r\n\t            },\r\n\t            productSearch: {\r\n\t                area: this._config.area || this.config.area,\r\n\t                numProducts: this._config.products,\r\n\t                language: this._config.language\r\n\t            },\r\n\t            https: this._config.https\r\n\t        };\r\n\t    };\r\n\t    Sayt.prototype.reset = function () {\r\n\t        this.autocomplete.reset();\r\n\t        this.update({ queries: null, navigations: null, products: null });\r\n\t    };\r\n\t    Sayt.prototype.fetchSuggestions = function (originalQuery) {\r\n\t        this.sayt.autocomplete(originalQuery)\r\n\t            .then(function (_a) {\r\n\t            var result = _a.result;\r\n\t            return ({ result: result, originalQuery: originalQuery });\r\n\t        })\r\n\t            .then(this.handleSuggestions)\r\n\t            .catch(function (err) { return console.error(err); });\r\n\t    };\r\n\t    Sayt.prototype.handleSuggestions = function (_a) {\r\n\t        var result = _a.result, originalQuery = _a.originalQuery;\r\n\t        this.update({ originalQuery: originalQuery });\r\n\t        this.processResults(result);\r\n\t        if (this.queries && this.showProducts) {\r\n\t            var query = this.matchesInput ? originalQuery : this.queries[0].value;\r\n\t            this.searchProducts(query);\r\n\t        }\r\n\t    };\r\n\t    Sayt.prototype.searchProducts = function (query, refinements) {\r\n\t        var _this = this;\r\n\t        if (query === void 0) { query = ''; }\r\n\t        if (this.showProducts) {\r\n\t            this.sayt.productSearch(query, { refinements: refinements })\r\n\t                .then(function (res) { return _this.update({ products: res.result.products }); });\r\n\t        }\r\n\t    };\r\n\t    Sayt.prototype.rewriteQuery = function (query) {\r\n\t        this.flux.emit(groupby_api_1.Events.REWRITE_QUERY, query);\r\n\t    };\r\n\t    Sayt.prototype.notifier = function (query, refinement, field) {\r\n\t        var isRefinement = refinement && refinement !== this._config.allCategoriesLabel;\r\n\t        var refinementString = \"~\" + (field || this._config.categoryField) + \"=\" + refinement;\r\n\t        if (this._config.autoSearch)\r\n\t            this.searchProducts(field ? '' : query, isRefinement ? refinementString : undefined);\r\n\t        this.rewriteQuery(query);\r\n\t    };\r\n\t    Sayt.prototype.processResults = function (result) {\r\n\t        var _this = this;\r\n\t        var categoryResults = [];\r\n\t        this.matchesInput = result.searchTerms\r\n\t            && result.searchTerms[0].value.toLowerCase() === this.originalQuery.toLowerCase();\r\n\t        if (this.matchesInput) {\r\n\t            var categoryQuery = result.searchTerms.splice(0, 1)[0];\r\n\t            categoryResults = this.extractCategoryResults(categoryQuery);\r\n\t        }\r\n\t        var navigations = result.navigations ? result.navigations\r\n\t            .map(function (nav) { return Object.assign(nav, { displayName: _this._config.navigationNames[nav.name] || nav.name }); })\r\n\t            .filter(function (_a) {\r\n\t            var name = _a.name;\r\n\t            return _this._config.allowedNavigations.includes(name);\r\n\t        }) : [];\r\n\t        this.update({\r\n\t            results: result,\r\n\t            navigations: navigations,\r\n\t            queries: result.searchTerms,\r\n\t            categoryResults: categoryResults\r\n\t        });\r\n\t    };\r\n\t    Sayt.prototype.extractCategoryResults = function (_a) {\r\n\t        var additionalInfo = _a.additionalInfo, value = _a.value;\r\n\t        var categoryResults = [];\r\n\t        var categoryField = this._config.categoryField;\r\n\t        if (additionalInfo && categoryField && categoryField in additionalInfo) {\r\n\t            categoryResults = additionalInfo[categoryField]\r\n\t                .map(function (category) { return ({ category: category, value: value }); })\r\n\t                .slice(0, 3);\r\n\t            categoryResults.unshift({ category: this._config.allCategoriesLabel, value: value, noRefine: true });\r\n\t        }\r\n\t        return categoryResults;\r\n\t    };\r\n\t    Sayt.prototype.searchRefinement = function (event) {\r\n\t        this.flux.resetRecall();\r\n\t        this.refine(event.target, '');\r\n\t    };\r\n\t    Sayt.prototype.searchCategory = function (event) {\r\n\t        this.flux.resetRecall();\r\n\t        this.refine(event.target, this.originalQuery);\r\n\t    };\r\n\t    Sayt.prototype.highlightCurrentQuery = function (value, regexReplacement) {\r\n\t        return this._config.highlight\r\n\t            ? value.replace(new RegExp(escapeStringRegexp(this.originalQuery), 'i'), regexReplacement)\r\n\t            : value;\r\n\t    };\r\n\t    Sayt.prototype.enhanceCategoryQuery = function (query) {\r\n\t        return \"<b>\" + query.value + \"</b> in <span class=\\\"gb-category-query\\\">\" + query.category + \"</span>\";\r\n\t    };\r\n\t    Sayt.prototype.refine = function (node, query) {\r\n\t        var _this = this;\r\n\t        while (node.tagName !== 'GB-SAYT-LINK')\r\n\t            node = node.parentElement;\r\n\t        var doRefinement = !node.dataset['norefine'];\r\n\t        var refinement = {\r\n\t            navigationName: node.dataset['field'] || this._config.categoryField,\r\n\t            value: node.dataset['refinement'],\r\n\t            type: 'Value'\r\n\t        };\r\n\t        if (this._config.staticSearch && this.services.url.active()) {\r\n\t            this.services.url.update(query, doRefinement ? [refinement] : []);\r\n\t        }\r\n\t        else if (doRefinement) {\r\n\t            this.flux.rewrite(query, { skipSearch: true });\r\n\t            this.flux.refine(refinement)\r\n\t                .then(function () { return _this.services.tracker.sayt(); });\r\n\t        }\r\n\t        else {\r\n\t            this.flux.reset(query)\r\n\t                .then(function () { return _this.services.tracker.sayt(); });\r\n\t        }\r\n\t    };\r\n\t    Sayt.prototype.search = function (event) {\r\n\t        var _this = this;\r\n\t        var node = event.target;\r\n\t        while (node.tagName !== 'GB-SAYT-LINK')\r\n\t            node = node.parentElement;\r\n\t        var query = node.dataset['value'];\r\n\t        if (this._config.staticSearch && this.services.url.active()) {\r\n\t            this.services.url.update(query, []);\r\n\t        }\r\n\t        else {\r\n\t            this.rewriteQuery(query);\r\n\t            this.flux.reset(query)\r\n\t                .then(function () { return _this.services.tracker.sayt(); });\r\n\t        }\r\n\t    };\r\n\t    Sayt.prototype.listenForInput = function (tag) {\r\n\t        var input = tag.searchBox;\r\n\t        input.autocomplete = 'off';\r\n\t        var debouncedSearch = common_1.debounce(this.debouncedSearch(input), Math.max(this._config.delay, exports.MIN_DELAY));\r\n\t        input.addEventListener('input', debouncedSearch);\r\n\t        document.addEventListener('click', this.reset);\r\n\t    };\r\n\t    Sayt.prototype.debouncedSearch = function (input) {\r\n\t        var _this = this;\r\n\t        return function () {\r\n\t            if (input.value.length >= _this._config.minimumCharacters) {\r\n\t                _this.fetchSuggestions(input.value);\r\n\t            }\r\n\t            else {\r\n\t                _this.reset();\r\n\t            }\r\n\t        };\r\n\t    };\r\n\t    return Sayt;\r\n\t}());\r\n\texports.Sayt = Sayt;\r\n\n\n/***/ },\n/* 106 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar KEY_UP = 38;\r\n\tvar KEY_DOWN = 40;\r\n\tvar KEY_ENTER = 13;\r\n\tvar KEY_ESCAPE = 27;\r\n\tvar ACTIVE = 'active';\r\n\texports.AUTOCOMPLETE_HIDE_EVENT = 'autocomplete:hide';\r\n\tvar Autocomplete = (function () {\r\n\t    function Autocomplete(tag) {\r\n\t        this.tag = tag;\r\n\t        this.selected = this.searchInput = common_1.findSearchBox();\r\n\t    }\r\n\t    Autocomplete.prototype.indexOfSelected = function () {\r\n\t        return this.links().indexOf(this.selected);\r\n\t    };\r\n\t    Autocomplete.prototype.selectLink = function (link) {\r\n\t        if (link)\r\n\t            this.selected = this.swapAttributes(link);\r\n\t    };\r\n\t    Autocomplete.prototype.linkAbove = function () {\r\n\t        return this.links()[this.indexOfSelected() - 1];\r\n\t    };\r\n\t    Autocomplete.prototype.linkBelow = function () {\r\n\t        return this.links()[this.indexOfSelected() + 1];\r\n\t    };\r\n\t    Autocomplete.prototype.links = function () {\r\n\t        return Array.from(this.tag.root.querySelectorAll('gb-sayt-autocomplete gb-sayt-link'));\r\n\t    };\r\n\t    Autocomplete.prototype.isSelectedInAutocomplete = function () {\r\n\t        return this.links().indexOf(this.selected) !== -1;\r\n\t    };\r\n\t    Autocomplete.prototype.swapAttributes = function (next) {\r\n\t        this.removeActiveClass();\r\n\t        next.classList.add(ACTIVE);\r\n\t        var value = next.dataset['value'];\r\n\t        var refinement = next.dataset['refinement'];\r\n\t        var field = next.dataset['field'];\r\n\t        if (value || refinement)\r\n\t            this.tag.notifier(value, refinement, field);\r\n\t        return next;\r\n\t    };\r\n\t    Autocomplete.prototype.resetSelected = function () {\r\n\t        this.selected = this.searchInput;\r\n\t    };\r\n\t    Autocomplete.prototype.removeActiveClass = function () {\r\n\t        this.links().forEach(function (element) { return element.classList.remove(ACTIVE); });\r\n\t    };\r\n\t    Autocomplete.prototype.reset = function () {\r\n\t        this.removeActiveClass();\r\n\t        this.resetSelected();\r\n\t    };\r\n\t    Autocomplete.prototype.keyboardListener = function (event, submitDefault) {\r\n\t        switch (event.keyCode) {\r\n\t            case KEY_UP:\r\n\t                // prevent cursor from moving to front of text box\r\n\t                event.preventDefault();\r\n\t                if (this.isSelectedInAutocomplete()) {\r\n\t                    var linkAbove = this.linkAbove();\r\n\t                    if (linkAbove) {\r\n\t                        this.selectLink(linkAbove);\r\n\t                    }\r\n\t                    else {\r\n\t                        this.searchInput.value = this.preautocompleteValue;\r\n\t                        this.reset();\r\n\t                    }\r\n\t                }\r\n\t                else {\r\n\t                    this.tag.flux.emit(exports.AUTOCOMPLETE_HIDE_EVENT);\r\n\t                }\r\n\t                break;\r\n\t            case KEY_DOWN:\r\n\t                if (!this.isSelectedInAutocomplete()) {\r\n\t                    this.preautocompleteValue = this.searchInput.value;\r\n\t                }\r\n\t                this.selectLink(this.linkBelow());\r\n\t                break;\r\n\t            case KEY_ENTER:\r\n\t                if (this.isSelectedInAutocomplete()) {\r\n\t                    this.selected.querySelector('a').click();\r\n\t                    this.reset();\r\n\t                }\r\n\t                else {\r\n\t                    submitDefault();\r\n\t                }\r\n\t                break;\r\n\t            case KEY_ESCAPE:\r\n\t                this.tag.flux.emit(exports.AUTOCOMPLETE_HIDE_EVENT);\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    return Autocomplete;\r\n\t}());\r\n\texports.Autocomplete = Autocomplete;\r\n\n\n/***/ },\n/* 107 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"escape-string-regexp\");\n\n/***/ },\n/* 108 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar autocomplete_1 = __webpack_require__(106);\r\n\t__webpack_require__(90);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar KEY_ENTER = 13;\r\n\texports.DEFAULT_CONFIG = {\r\n\t    sayt: true,\r\n\t    autoSearch: true,\r\n\t    staticSearch: false\r\n\t};\r\n\tvar Query = (function () {\r\n\t    function Query() {\r\n\t    }\r\n\t    Query.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.enterKeyHandlers = [];\r\n\t        this.on('mount', this.attachListeners);\r\n\t        this.flux.on(groupby_api_1.Events.REWRITE_QUERY, this.rewriteQuery);\r\n\t    };\r\n\t    Query.prototype.attachListeners = function () {\r\n\t        this.searchBox = this.findSearchBox();\r\n\t        this.searchBox.addEventListener('keydown', this.keydownListener);\r\n\t        if (this._config.sayt)\r\n\t            this.tags['gb-sayt'].listenForInput(this);\r\n\t        if (this._config.autoSearch) {\r\n\t            this.listenForInput();\r\n\t        }\r\n\t        else if (this._config.staticSearch) {\r\n\t            this.listenForStaticSearch();\r\n\t        }\r\n\t        else {\r\n\t            this.listenForSubmit();\r\n\t        }\r\n\t    };\r\n\t    Query.prototype.rewriteQuery = function (query) {\r\n\t        this.searchBox.value = query;\r\n\t    };\r\n\t    Query.prototype.listenForInput = function () {\r\n\t        this.searchBox.addEventListener('input', this.resetToInputValue);\r\n\t    };\r\n\t    Query.prototype.listenForSubmit = function () {\r\n\t        this.enterKeyHandlers.push(this.resetToInputValue);\r\n\t    };\r\n\t    Query.prototype.resetToInputValue = function () {\r\n\t        var _this = this;\r\n\t        this.flux.reset(this.inputValue())\r\n\t            .then(function () { return _this.services.tracker.search(); });\r\n\t    };\r\n\t    Query.prototype.listenForStaticSearch = function () {\r\n\t        this.enterKeyHandlers.push(this.setLocation);\r\n\t    };\r\n\t    Query.prototype.keydownListener = function (event) {\r\n\t        var sayt = common_1.findTag('gb-sayt');\r\n\t        if (sayt) {\r\n\t            var autocomplete = sayt['_tag'].autocomplete;\r\n\t            autocomplete.keyboardListener(event, this.onSubmit);\r\n\t        }\r\n\t        else if (event.keyCode === KEY_ENTER) {\r\n\t            this.onSubmit();\r\n\t        }\r\n\t    };\r\n\t    Query.prototype.onSubmit = function () {\r\n\t        this.enterKeyHandlers.forEach(function (f) { return f(); });\r\n\t        this.flux.emit(autocomplete_1.AUTOCOMPLETE_HIDE_EVENT);\r\n\t    };\r\n\t    Query.prototype.findSearchBox = function () {\r\n\t        if (this.tags['gb-search-box']) {\r\n\t            return this.tags['gb-search-box'].searchBox;\r\n\t        }\r\n\t        else {\r\n\t            return this.root.querySelector('input');\r\n\t        }\r\n\t    };\r\n\t    Query.prototype.setLocation = function () {\r\n\t        if (this.services.url.active()) {\r\n\t            this.services.url.update(this.inputValue());\r\n\t        }\r\n\t        else {\r\n\t            this.flux.reset(this.inputValue());\r\n\t        }\r\n\t    };\r\n\t    Query.prototype.inputValue = function () {\r\n\t        return this.searchBox.value;\r\n\t    };\r\n\t    return Query;\r\n\t}());\r\n\texports.Query = Query;\r\n\n\n/***/ },\n/* 109 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbRecordCount = __webpack_require__(110);\n\t\n\triot.tag2('gb-record-count', '<yield> <h2>{first} - {last} of {total} Products</h2> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbRecordCount.RecordCount);\n\t});\n\n/***/ },\n/* 110 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar RecordCount = (function () {\r\n\t    function RecordCount() {\r\n\t    }\r\n\t    RecordCount.prototype.init = function () {\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updatePageInfo);\r\n\t    };\r\n\t    RecordCount.prototype.updatePageInfo = function (_a) {\r\n\t        var pageInfo = _a.pageInfo, totalRecordCount = _a.totalRecordCount;\r\n\t        this.update({\r\n\t            first: pageInfo.recordStart,\r\n\t            last: pageInfo.recordEnd,\r\n\t            total: totalRecordCount\r\n\t        });\r\n\t    };\r\n\t    return RecordCount;\r\n\t}());\r\n\texports.RecordCount = RecordCount;\r\n\n\n/***/ },\n/* 111 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\tvar _gbRelatedQueries = __webpack_require__(112);\n\t\n\triot.tag2('gb-related-queries', '<yield> <gb-list class=\"{_style}\" items=\"{relatedQueries}\" scope=\"gb-related-queries\" inline> <a onclick=\"{_scope.send}\">{item}</a> </gb-list> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbRelatedQueries.RelatedQueries);\n\t});\n\n/***/ },\n/* 112 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar RelatedQueries = (function () {\r\n\t    function RelatedQueries() {\r\n\t    }\r\n\t    RelatedQueries.prototype.init = function () {\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updatedRelatedQueries);\r\n\t    };\r\n\t    RelatedQueries.prototype.updatedRelatedQueries = function (_a) {\r\n\t        var relatedQueries = _a.relatedQueries;\r\n\t        this.update({ relatedQueries: relatedQueries });\r\n\t    };\r\n\t    RelatedQueries.prototype.send = function (event) {\r\n\t        return this.flux.rewrite(event.target.text);\r\n\t    };\r\n\t    return RelatedQueries;\r\n\t}());\r\n\texports.RelatedQueries = RelatedQueries;\r\n\n\n/***/ },\n/* 113 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\t__webpack_require__(100);\n\t\n\tvar _gbResults = __webpack_require__(114);\n\t\n\triot.tag2('gb-results', '<yield> <gb-list items=\"{records}\"> <gb-product all_meta=\"{item.allMeta}\"></gb-product> </gb-list> </yield>', 'gb-results .gb-stylish gb-list,[riot-tag=\"gb-results\"] .gb-stylish gb-list,[data-is=\"gb-results\"] .gb-stylish gb-list{ padding: 0; list-style: none; display: flex; flex-wrap: wrap; justify-content: space-around; } gb-results .gb-stylish gb-product,[riot-tag=\"gb-results\"] .gb-stylish gb-product,[data-is=\"gb-results\"] .gb-stylish gb-product{ display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }', '', function (opts) {\n\t    this._mixin(_gbResults.Results);\n\t});\n\n/***/ },\n/* 114 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar common_1 = __webpack_require__(11);\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar Results = (function () {\r\n\t    function Results() {\r\n\t    }\r\n\t    Results.prototype.init = function () {\r\n\t        this.struct = this.config.structure;\r\n\t        this.variantStruct = common_1.unless(this.struct._variantStructure, this.struct);\r\n\t        this.getPath = common_1.getPath;\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updateRecords);\r\n\t    };\r\n\t    Results.prototype.updateRecords = function (_a) {\r\n\t        var records = _a.records;\r\n\t        this.update({ records: records, collection: this.flux.query.raw.collection });\r\n\t    };\r\n\t    Results.prototype.userStyle = function (key) {\r\n\t        return this.opts.css ? this.opts.css[key] : '';\r\n\t    };\r\n\t    return Results;\r\n\t}());\r\n\texports.Results = Results;\r\n\n\n/***/ },\n/* 115 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _gbSnippet = __webpack_require__(116);\n\t\n\triot.tag2('gb-snippet', '<div class=\"gb-snippet\"> {responseText} </div>', '', '', function (opts) {\n\t    this._mixin(_gbSnippet.Snippet);\n\t});\n\n/***/ },\n/* 116 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.DEFAULT_CONFIG = {\r\n\t    raw: false\r\n\t};\r\n\tvar Snippet = (function () {\r\n\t    function Snippet() {\r\n\t    }\r\n\t    Snippet.prototype.init = function () {\r\n\t        this.configure(exports.DEFAULT_CONFIG);\r\n\t        this.on('mount', this.loadFile);\r\n\t    };\r\n\t    Snippet.prototype.loadFile = function () {\r\n\t        var _this = this;\r\n\t        var req = new XMLHttpRequest();\r\n\t        req.onload = function () {\r\n\t            var responseText = req.responseText;\r\n\t            if (_this._config.raw) {\r\n\t                _this.root.innerHTML = responseText;\r\n\t            }\r\n\t            else {\r\n\t                _this.update({ responseText: responseText });\r\n\t            }\r\n\t        };\r\n\t        req.open('get', this._config.url, true);\r\n\t        req.send();\r\n\t    };\r\n\t    return Snippet;\r\n\t}());\r\n\texports.Snippet = Snippet;\r\n\n\n/***/ },\n/* 117 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(46);\n\t\n\tvar _gbSort = __webpack_require__(118);\n\t\n\triot.tag2('gb-sort', '<yield> <gb-select scope=\"gb-sort\"> </gb-select> </yield>', '', '', function (opts) {\n\t    this._mixin(_gbSort.Sort);\n\t});\n\n/***/ },\n/* 118 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.DEFAULT_SORTS = [\r\n\t    { label: 'Name Descending', value: { field: 'title', order: 'Descending' } },\r\n\t    { label: 'Name Ascending', value: { field: 'title', order: 'Ascending' } }\r\n\t];\r\n\tvar Sort = (function () {\r\n\t    function Sort() {\r\n\t    }\r\n\t    Sort.prototype.init = function () {\r\n\t        this.configure();\r\n\t        this.options = this._config.options || exports.DEFAULT_SORTS;\r\n\t    };\r\n\t    Sort.prototype.sortValues = function () {\r\n\t        return this.options.map(function (option) { return option.value; });\r\n\t    };\r\n\t    Sort.prototype.onselect = function (value) {\r\n\t        return this.flux.sort(value, this.sortValues());\r\n\t    };\r\n\t    return Sort;\r\n\t}());\r\n\texports.Sort = Sort;\r\n\n\n/***/ },\n/* 119 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(120);\n\t\n\t__webpack_require__(121);\n\t\n\t__webpack_require__(122);\n\t\n\tvar _gbTemplate = __webpack_require__(123);\n\t\n\triot.tag2('gb-template', '<div if=\"{isActive}\"> <yield> <div each=\"{zone in zones}\" class=\"gb-zone-{zone.name}\"> <gb-content-zone if=\"{zone.type === \\'Content\\'}\"></gb-content-zone> <gb-rich-content-zone if=\"{zone.type === \\'Rich_Content\\'}\"></gb-rich-content-zone> <gb-record-zone if=\"{zone.type === \\'Record\\'}\"></gb-record-zone> </div> </yield> </div>', '', '', function (opts) {\n\t    this._mixin(_gbTemplate.Template);\n\t});\n\n/***/ },\n/* 120 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\triot.tag2('gb-content-zone', '<span>{zone.content}</span>', '', '', function (opts) {});\n\n/***/ },\n/* 121 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(94);\n\t\n\triot.tag2('gb-rich-content-zone', '<gb-raw content=\"{zone.richContent}\"></gb-raw>', '', '', function (opts) {});\n\n/***/ },\n/* 122 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\triot.tag2('gb-record-zone', '<gb-list items=\"{zone.records}\"> <gb-product all_meta=\"{item.allMeta}\"></gb-product> </gb-list>', '', '', function (opts) {});\n\n/***/ },\n/* 123 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar groupby_api_1 = __webpack_require__(16);\r\n\tvar Template = (function () {\r\n\t    function Template() {\r\n\t    }\r\n\t    Template.prototype.init = function () {\r\n\t        this.configure();\r\n\t        this.flux.on(groupby_api_1.Events.RESULTS, this.updateActive);\r\n\t    };\r\n\t    Template.prototype.updateActive = function (_a) {\r\n\t        var template = _a.template;\r\n\t        this.update({\r\n\t            isActive: template.name === this._config.target,\r\n\t            zoneMap: template.zones,\r\n\t            zones: this.sortZones(template.zones)\r\n\t        });\r\n\t    };\r\n\t    Template.prototype.sortZones = function (zones) {\r\n\t        return Object.keys(zones).map(function (key) { return zones[key]; })\r\n\t            .reduce(function (list, zone) {\r\n\t            if (zone.type === 'Record') {\r\n\t                list.push(zone);\r\n\t            }\r\n\t            else {\r\n\t                list.unshift(zone);\r\n\t            }\r\n\t            return list;\r\n\t        }, []);\r\n\t    };\r\n\t    return Template;\r\n\t}());\r\n\texports.Template = Template;\r\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// searchandiser-ui-0.2.25.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ae247e71d3d1f9118da9","import './polyfills';\nimport { initSearchandiser, Searchandiser } from './searchandiser';\nimport './tags/index';\nimport * as utils from './utils/common';\nimport {\n  BrowserBridge,\n  CloudBridge,\n  FluxCapacitor,\n  Query\n} from 'groupby-api';\nimport { Sayt } from 'sayt';\n\nconst searchandiser = initSearchandiser();\n\nexport {\n  searchandiser,\n  utils,\n  BrowserBridge,\n  CloudBridge,\n  FluxCapacitor,\n  Query,\n  Sayt,\n  Searchandiser\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/pkg-index.ts","import 'array.of';\nrequire('array.from').shim();\nrequire('array-includes').shim();\nimport 'string.prototype.repeat';\nimport 'string.prototype.startswith';\nimport 'ts-helpers';\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/polyfills.ts","module.exports = require(\"array.of\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"array.of\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"array.from\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"array.from\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"array-includes\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"array-includes\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"string.prototype.repeat\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string.prototype.repeat\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"string.prototype.startswith\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string.prototype.startswith\"\n// module id = 6\n// module chunks = 0","function __assignFn(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n    }\n    return t;\n}\nfunction __extendsFn(d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nfunction __decorateFn(decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction __metadataFn(k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\")\n        return Reflect.metadata(k, v);\n}\nfunction __paramFn(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction __awaiterFn(thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try {\n            step(generator.next(value));\n        }\n        catch (e) {\n            reject(e);\n        } }\n        function rejected(value) { try {\n            step(generator.throw(value));\n        }\n        catch (e) {\n            reject(e);\n        } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments)).next());\n    });\n}\n// hook global helpers\n(function (__global) {\n    __global.__assign = (__global && __global.__assign) || Object.assign || __assignFn;\n    __global.__extends = (__global && __global.__extends) || __extendsFn;\n    __global.__decorate = (__global && __global.__decorate) || __decorateFn;\n    __global.__metadata = (__global && __global.__metadata) || __metadataFn;\n    __global.__param = (__global && __global.__param) || __paramFn;\n    __global.__awaiter = (__global && __global.__awaiter) || __awaiterFn;\n})(typeof window !== \"undefined\" ? window :\n    typeof WorkerGlobalScope !== \"undefined\" ? self :\n        typeof global !== \"undefined\" ? global :\n            Function(\"return this;\")());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ts-helpers/index.js\n// module id = 7\n// module chunks = 0","import { initServices } from './services/init';\nimport { TrackerConfig } from './services/tracker';\nimport { UrlConfig } from './services/url';\nimport { BreadcrumbsConfig } from './tags/breadcrumbs/gb-breadcrumbs';\nimport { CollectionsConfig } from './tags/collections/gb-collections';\nimport { DetailsConfig } from './tags/details/gb-details';\nimport { FilterConfig } from './tags/filter/gb-filter';\nimport { NavigationConfig } from './tags/navigation/gb-navigation';\nimport { PageSizeConfig } from './tags/page-size/gb-page-size';\nimport { PagingConfig } from './tags/paging/gb-paging';\nimport { QueryConfig } from './tags/query/gb-query';\nimport { SaytConfig } from './tags/sayt/gb-sayt';\nimport { SortConfig } from './tags/sort/gb-sort';\nimport { SubmitConfig } from './tags/submit/gb-submit';\nimport { MixinFlux } from './tags/tag';\nimport { checkNested } from './utils/common';\nimport { ProductStructure } from './utils/product-transformer';\nimport { Events, FluxBridgeConfig, FluxCapacitor, FluxConfiguration, Sort } from 'groupby-api';\nimport * as riot from 'riot';\n\nexport const CONFIGURATION_MASK = '{collection,area,language,pageSize,sort,fields,customUrlParams,pruneRefinements,disableAutocorrection}'; // tslint:disable:max-line-length\nexport const DEFAULT_CONFIG = { initialSearch: true };\nexport const DEFAULT_URL_CONFIG = { queryParam: 'q', searchUrl: 'search' };\n\nexport function initSearchandiser() {\n  return function configure(rawConfig: SearchandiserConfig & any = {}) {\n    const config: SearchandiserConfig = applyDefaultConfig(rawConfig);\n    validateConfig(config);\n    const flux = Object.assign(initCapacitor(config), Events);\n    const services = initServices(flux, config);\n    riot.mixin(MixinFlux(flux, config, services));\n    Object.assign(configure, { flux, services, config }, new Searchandiser()['__proto__']);\n  };\n}\n\nexport function initCapacitor(config: SearchandiserConfig) {\n  const finalConfig = transformConfig(config);\n  return new FluxCapacitor(finalConfig.customerId, finalConfig, CONFIGURATION_MASK);\n}\n\nexport function applyDefaultConfig(rawConfig: SearchandiserConfig): SearchandiserConfig {\n  const config = Object.assign({}, DEFAULT_CONFIG, rawConfig);\n  config.url = Object.assign(DEFAULT_URL_CONFIG, config.url);\n  return config;\n}\n\nexport function validateConfig(config: SearchandiserConfig) {\n  if (!config.structure) {\n    throw new Error('must provide a record structure');\n  }\n  const struct = Object.assign(config.structure, config.structure._variantStructure);\n  if (!(struct.title && struct.title.trim())) {\n    throw new Error('structure.title must be the path to the title field');\n  }\n  if (!(struct.price && struct.price.trim())) {\n    throw new Error('structure.price must be the path to the price field');\n  }\n}\n\nexport function transformConfig(config: SearchandiserConfig): SearchandiserConfig & any {\n  let finalConfig: FluxConfiguration & { sort: any[] } = <any>config;\n  if (config.pageSizes) finalConfig.pageSize = config.pageSizes[0];\n  if (config.bridge) {\n    const bridgeConfig: BridgeConfig = {};\n\n    const headers = config.bridge.headers || {};\n    if (config.bridge.skipCache) headers['Skip-Caching'] = 'true';\n    if (config.bridge.skipSemantish) headers['Skip-Semantish'] = 'true';\n    bridgeConfig.headers = headers;\n\n    Object.assign(finalConfig.bridge, bridgeConfig);\n  }\n  if (checkNested(config, 'tags', 'sort', 'options')) {\n    finalConfig.sort = [config.tags.sort.options.map((val) => val.value)[0]];\n  }\n  return finalConfig;\n}\n\nexport class Searchandiser {\n\n  flux: FluxCapacitor;\n  services: any;\n  config: SearchandiserConfig;\n\n  init() {\n    if (this.config.initialSearch) this.search();\n  }\n\n  attach(tagName: string, opts?: any);\n  attach(tagName: string, cssSelector: string, opts?: any);\n  attach(tagName: string, selectorOrOpts?: any, options?: any) {\n    let tag;\n    if (typeof selectorOrOpts === 'string') {\n      tag = this.cssAttach(tagName, selectorOrOpts, options);\n    } else {\n      tag = this.simpleAttach(tagName, selectorOrOpts);\n    }\n    if (tag) {\n      return tag.length === 1 ? tag[0] : tag;\n    } else {\n      return null;\n    }\n  }\n\n  compile() {\n    riot.compile(() => null);\n  }\n\n  search(query?: string) {\n    return this.flux.search(query)\n      .then(() => this.flux.emit(Events.PAGE_CHANGED, { pageNumber: 1, finalPage: this.flux.page.finalPage }));\n  }\n\n  private simpleAttach(tagName: string, options: any = {}) {\n    return riot.mount(this.riotTagName(tagName), options);\n  }\n\n  private cssAttach(tagName: string, cssSelector: string = `.${tagName}`, options: any = {}) {\n    return riot.mount(cssSelector, this.riotTagName(tagName), options);\n  }\n\n  private riotTagName(tagName: string) {\n    return tagName.startsWith('gb-') ? tagName : `gb-${tagName}`;\n  }\n}\n\nexport interface BridgeConfig extends FluxBridgeConfig {\n  skipCache?: boolean;\n  skipSemantish?: boolean;\n}\n\nexport interface SearchandiserConfig {\n  bridge?: BridgeConfig;\n  url?: UrlConfig;\n  tracker?: TrackerConfig;\n\n  customerId: string;\n  area?: string;\n  collection?: string;\n  customUrlParams?: any[];\n  disableAutocorrection?: boolean;\n  language?: string;\n  pageSize?: number;\n  pageSizes?: number[];\n  sort?: Sort[];\n  tags: {\n    breadcrumbs?: BreadcrumbsConfig;\n    collections?: CollectionsConfig;\n    details?: DetailsConfig;\n    filter?: FilterConfig;\n    navigation?: NavigationConfig;\n    pageSize?: PageSizeConfig;\n    paging?: PagingConfig;\n    query?: QueryConfig;\n    sayt?: SaytConfig;\n    sort?: SortConfig;\n    submit?: SubmitConfig;\n  };\n  stylish?: boolean;\n  initialSearch?: boolean;\n  structure: ProductStructure;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/searchandiser.ts","import { SearchandiserConfig } from '../searchandiser';\nimport { Collections } from './collections';\nimport { Filter } from './filter';\nimport { Redirect } from './redirect';\nimport { Tracker } from './tracker';\nimport { Url } from './url';\nimport { FluxCapacitor } from 'groupby-api';\n\nexport interface Services {\n  collections: Collections;\n  filter: Filter;\n  redirect: Redirect;\n  tracker: Tracker;\n  url: Url;\n}\n\nexport function initServices(flux: FluxCapacitor, config: SearchandiserConfig) {\n  const services: Services = <any>{};\n\n  services.collections = new Collections(flux, config);\n  services.filter = new Filter(flux, config);\n  services.redirect = new Redirect(flux);\n  services.tracker = new Tracker(flux, config);\n  services.url = new Url(flux, config, services);\n\n  startServices(services);\n  return services;\n}\n\nexport function startServices(services: any) {\n  for (let service in services) {\n    if (services.hasOwnProperty(service)) {\n      services[service].init();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/init.ts","import { SearchandiserConfig } from '../searchandiser';\nimport { CollectionsConfig, CollectionOption } from '../tags/collections/gb-collections';\nimport { getPath, unless } from '../utils/common';\nimport { Events, FluxCapacitor, Results } from 'groupby-api';\n\nexport const COLLECTIONS_UPDATED_EVENT = 'collections_updated';\n\nexport type CancelablePromise<T> = Promise<T> & { cancelled: boolean; };\n\nexport class Collections {\n\n  collectionsConfig: CollectionsConfig;\n  fetchCounts: boolean;\n  isLabeled: boolean;\n  counts: any = {};\n  inProgress: CancelablePromise<any>;\n  collections: string[];\n  options: string[] | CollectionOption[];\n\n  constructor(private flux: FluxCapacitor, private config: SearchandiserConfig) {\n    this.collectionsConfig = getPath(config, 'tags.collections') || {};\n    this.fetchCounts = unless(this.collectionsConfig.counts, true);\n    this.options = this.collectionsConfig.options || [];\n    this.isLabeled = this.options.length !== 0\n      && typeof this.options[0] === 'object';\n    this.collections = this.isLabeled\n      ? (<CollectionOption[]>this.options).map((collection) => collection.value)\n      : <string[]>this.options;\n  }\n\n  init() {\n    this.flux.on(Events.QUERY_CHANGED, (query) => this.updateCollectionCounts(query));\n    this.flux.on(Events.RESULTS, (results) => this.updateSelectedCollectionCount(results));\n    this.updateCollectionCounts();\n  }\n\n  updateCollectionCounts(query: string = '') {\n    if (this.fetchCounts) {\n      if (this.inProgress) {\n        this.inProgress.cancelled = true;\n      }\n\n      const searches = this.collections\n        .filter((collection) => !this.isSelected(collection))\n        .map((collection) => this.flux.bridge\n          .search(Object.assign(this.flux.query.raw, { query, collection, refinements: [], pageSize: 0, fields: '' }))\n          .then((results) => ({ results, collection })));\n\n      const promises = this.inProgress = <CancelablePromise<any>>Promise.all(searches);\n\n      promises.then(this.extractCounts)\n        .then((counts) => {\n          if (!promises.cancelled) {\n            Object.assign(this.counts, counts);\n            this.flux.emit(COLLECTIONS_UPDATED_EVENT, this.counts);\n          }\n        });\n    }\n  }\n\n  extractCounts(res: any[]) {\n    return res.reduce((counts, { results, collection }) =>\n      Object.assign(counts, { [collection]: results.totalRecordCount }), {});\n  }\n\n  updateSelectedCollectionCount(res: Results) {\n    Object.assign(this.counts, { [this.selectedCollection]: res.totalRecordCount });\n    this.flux.emit(COLLECTIONS_UPDATED_EVENT, this.counts);\n  }\n\n  isSelected(collection: string) {\n    return collection === this.selectedCollection;\n  }\n\n  get selectedCollection() {\n    return getPath(this.flux, 'query.raw.collection') || this.config.collection;\n  }\n\n  // private extractCounts(counts: any, { results, collection }: { results: Results, collection: string }) {\n  //   return Object.assign(counts, { [collection]: results.totalRecordCount });\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/collections.ts","import * as debounce from 'debounce';\nimport { Navigation, RangeRefinement, ValueRefinement } from 'groupby-api';\nimport * as queryString from 'query-string';\nimport filterObject = require('filter-object');\nimport oget = require('oget');\n\nexport { debounce }\n\nexport type Refinement = ValueRefinement & RangeRefinement;\n\nexport const LOCATION = {\n  href: () => window.location.href,\n  setSearch: (search) => window.location.search = search,\n  getSearch: () => window.location.search,\n  pathname: () => window.location.pathname,\n  replace: (url) => window.location.replace(url),\n  assign: (url) => window.location.assign(url)\n};\n\nexport function findSearchBox() {\n  return <HTMLInputElement>oget(findTag('gb-query'), '_tag.searchBox');\n}\n\nexport function findTag(tagName: string): Element {\n  return document.querySelector(tagName)\n    || document.querySelector(`[data-is=\"${tagName}\"]`)\n    || document.querySelector(`[riot-tag=\"${tagName}\"]`);\n}\n\nexport function toRefinement(ref: Refinement, nav: Navigation) {\n  return Object.assign({}, filterObject(ref, '{type,value,low,high}'), { navigationName: nav.name });\n}\n\nexport function displayRefinement(ref: Refinement) {\n  return ref.type === 'Value' ? ref.value : `${ref.low} - ${ref.high}`;\n}\n\nexport function checkNested(obj: any, ...keys: string[]): boolean {\n  return Array.prototype.slice.call(arguments, 1)\n    .reduce((res, arg) => {\n      if (!obj || !obj.hasOwnProperty(arg)) return false;\n      obj = obj[arg];\n      return res;\n    }, true);\n}\n\nexport function getParam(param: string): string | null {\n  return queryString.parse(LOCATION.getSearch())[param] || null;\n}\n\nexport function unless(obj: any, ...defaultObjs: any[]) {\n  return obj !== undefined ? obj : unless(defaultObjs.splice(0, 1)[0], ...defaultObjs);\n}\n\nexport function getPath(obj: any, path: string = '') {\n  return oget(obj, path);\n}\n\n/**\n * Example:\n * ({x: 3, y: 4, h: 8}, {z: 'x', i: 'h'}) -> {z: 3, i: 8}\n *\n * N.B. It removes keys that do not appear in the mapping\n */\nexport function remap(obj: any, mapping?: any) {\n  if (mapping) {\n    return Object.keys(mapping).reduce((acc, key) => {\n      const value = getPath(obj, mapping[key]);\n      if (value) {\n        return Object.assign(acc, { [key]: value });\n      } else {\n        return acc;\n      }\n    }, {});\n  } else {\n    return obj;\n  }\n}\n\nexport function checkBooleanAttr(attribute: string, opts: any) {\n  return typeof opts === 'object'\n    && attribute in opts\n    && opts[attribute] != 'false' // tslint:disable-line:triple-equals\n    && opts[attribute] !== false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/utils/common.ts","module.exports = require(\"debounce\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debounce\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"query-string\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"query-string\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"filter-object\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"filter-object\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"oget\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"oget\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"groupby-api\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"groupby-api\"\n// module id = 16\n// module chunks = 0","import { initCapacitor, SearchandiserConfig } from '../searchandiser';\nimport { FilterConfig } from '../tags/filter/gb-filter';\nimport { getPath } from '../utils/common';\nimport { Events, FluxCapacitor } from 'groupby-api';\n\nexport const FILTER_UPDATED_EVENT = 'filter_updated';\n\nexport class Filter {\n\n  filterConfig: FilterConfig;\n  fluxClone: FluxCapacitor;\n\n  constructor(private flux: FluxCapacitor, private config: SearchandiserConfig) {\n    this.fluxClone = this.clone();\n    this.filterConfig = getPath(config, 'tags.filter') || {};\n  }\n\n  init() {\n    this.flux.on(Events.RESULTS, () => this.updateFluxClone());\n  }\n\n  updateFluxClone() {\n    const searchRequest = this.flux.query.raw;\n    // TODO: this is probably broken in terms of state propagation\n    this.fluxClone.query.withConfiguration(<any>{ refinements: [] });\n    if (searchRequest.refinements) {\n      const filteredRefinements: any[] = searchRequest.refinements\n        .filter(({ navigationName }) => !this.isTargetNav(navigationName));\n      this.fluxClone.query.withSelectedRefinements(...filteredRefinements);\n    }\n\n    this.fluxClone.search(searchRequest.query)\n      .then((res) => this.flux.emit(FILTER_UPDATED_EVENT, res));\n  }\n\n  isTargetNav(navName: string) {\n    return navName === this.filterConfig.field;\n  }\n\n  clone() {\n    return initCapacitor(this.config);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/filter.ts","import { LOCATION } from '../utils/common';\nimport { Events, FluxCapacitor } from 'groupby-api';\n\nexport class Redirect {\n\n  constructor(private flux: FluxCapacitor) { }\n\n  init() {\n    this.flux.on(Events.REDIRECT, (redirect) => this.redirect(redirect));\n  }\n\n  redirect(url: string) {\n    LOCATION.assign(url);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/redirect.ts","import { SearchandiserConfig } from '../searchandiser';\nimport { ProductTransformer } from '../utils/product-transformer';\nimport * as GbTracker from 'gb-tracker-client';\nimport { Events, FluxCapacitor } from 'groupby-api';\nimport * as Cookies from 'js-cookie';\nimport * as uuid from 'node-uuid';\n\nexport const MAX_COOKIE_AGE = 365; // days\nexport const VISITOR_COOKIE_KEY = 'visitor';\nexport const SESSION_COOKIE_KEY = 'session';\n\nexport interface TrackerConfig {\n  sessionId?: string;\n  visitorId?: string;\n}\n\nexport class Tracker {\n\n  _config: TrackerConfig;\n  tracker: TrackerClient;\n  transformer: ProductTransformer;\n\n  constructor(private flux: FluxCapacitor, private config: SearchandiserConfig) {\n    this._config = this.config.tracker || {};\n    this.tracker = new GbTracker(this.config.customerId, this.config.area);\n    this.transformer = new ProductTransformer(this.config.structure || {});\n  }\n\n  init() {\n    this.setVisitorInfo();\n\n    this.listenForViewProduct();\n  }\n\n  setVisitorInfo() {\n    const visitorId = this._config.visitorId\n      || Cookies.get(VISITOR_COOKIE_KEY)\n      || uuid.v1();\n    const sessionId = this._config.sessionId\n      || Cookies.get(SESSION_COOKIE_KEY)\n      || uuid.v1();\n\n    this.setVisitor(visitorId, sessionId);\n  }\n\n  listenForViewProduct() {\n    this.flux.on(Events.DETAILS, ({ allMeta }) => {\n      const productMeta = this.transformer.transform(allMeta);\n      this.tracker.sendViewProductEvent({\n        product: {\n          productId: productMeta().id,\n          title: productMeta().title,\n          price: productMeta().price,\n          category: 'NONE'\n        }\n      });\n    });\n  }\n\n  setVisitor(visitorId: string, sessionId: string) {\n    this.tracker.setVisitor(visitorId, sessionId);\n\n    Cookies.set(VISITOR_COOKIE_KEY, visitorId, { expires: MAX_COOKIE_AGE });\n    Cookies.set(SESSION_COOKIE_KEY, sessionId);\n  }\n\n  search() {\n    this.sendSearchEvent();\n  }\n\n  didYouMean() {\n    this.sendSearchEvent('dym');\n  }\n\n  sayt() {\n    this.sendSearchEvent('sayt');\n  }\n\n  addToCart(productsInfo: any) {\n    this.tracker.sendAddToCartEvent(productsInfo);\n  }\n\n  order(productsInfo: any) {\n    this.tracker.sendOrderEvent(productsInfo);\n  }\n\n  sendSearchEvent(origin: string = 'search') {\n    this.tracker.sendSearchEvent({\n      search: Object.assign({\n        origin: { [origin]: true },\n        query: this.flux.results.originalQuery || ''\n      }, this.flux.results)\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/tracker.ts","import { getPath, remap } from './common';\nimport filterObject = require('filter-object');\n\nconst DEFAULT_STRUCTURE = {\n  id: 'id'\n};\n\nexport interface BaseStructure {\n  title: string;\n  price: string;\n  id?: string;\n  url?: string;\n  variants?: string;\n  _variantStructure?: any;\n  _transform?: (allMeta: any) => any;\n}\n\nexport interface ProductMeta {\n  (variant?: number): any;\n  variants?: any[];\n  transformedMeta?: any;\n}\n\nexport type ProductStructure = BaseStructure & any;\n\nexport class ProductTransformer {\n\n  struct: ProductStructure;\n  variantStruct: any;\n  hasVariants: boolean;\n  idField: string;\n  productTransform: (allMeta: any) => any;\n  variants: any[];\n\n  constructor(struct: ProductStructure) {\n    this.struct = Object.assign({}, DEFAULT_STRUCTURE, struct);\n    this.setTransform();\n    this.hasVariants = 'variants' in struct;\n    this.variantStruct = this.struct._variantStructure || this.struct;\n    this.idField = this.extractIdField();\n  }\n\n  transform(allMeta: any): ProductMeta {\n    const transformedMeta = this.productTransform(allMeta);\n    const variants = this.unpackVariants(transformedMeta);\n    const productMeta: ProductMeta = (variant: number = 0) => {\n      if (variant >= variants.length) {\n        throw new Error(`cannot access the variant at index ${variant}`);\n      } else {\n        return variants[variant];\n      }\n    };\n    productMeta.variants = variants;\n    productMeta.transformedMeta = transformedMeta;\n\n    return productMeta;\n  }\n\n  unpackVariants(allMeta: any): any[] {\n    const struct = filterObject(this.struct, '!_*');\n    const variantStruct = filterObject(this.variantStruct, '!_*');\n    const remappedMeta = remap(allMeta, struct);\n    const variantMapping = this.remapVariant(remappedMeta, variantStruct);\n\n    if (this.hasVariants && Array.isArray(getPath(allMeta, struct.variants))) {\n      const variantsArray: any[] = getPath(allMeta, struct.variants)\n        .filter((variant) => variant);\n      if (variantsArray.length > 0) {\n        return variantsArray.map(variantMapping);\n      }\n    }\n    return [filterObject(remappedMeta, '!variants')];\n  }\n\n  remapVariant(remappedMeta: any, variantStruct: any) {\n    return (variant) => {\n      const remappedVariant = remap(variant, variantStruct);\n      return filterObject(Object.assign({}, remappedMeta, remappedVariant), '!variants');\n    };\n  }\n\n  extractIdField() {\n    // ensure we actually want the nested id\n    if (this.hasVariants && this.struct._variantStructure && this.variantStruct.id) {\n      return `${this.struct.variants}.${this.variantStruct.id}`;\n    } else {\n      return this.struct.id;\n    }\n  }\n\n  private setTransform() {\n    if (typeof this.struct._transform === 'function') {\n      this.productTransform = this.struct._transform;\n    } else {\n      this.productTransform = this.defaultTransform;\n    }\n  }\n\n  private defaultTransform(allMeta: any) {\n    return allMeta;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/utils/product-transformer.ts","module.exports = require(\"gb-tracker-client\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gb-tracker-client\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"js-cookie\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-cookie\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 23\n// module chunks = 0","import { SearchandiserConfig } from '../searchandiser';\nimport { LOCATION } from '../utils/common';\nimport { SimpleBeautifier } from '../utils/simple-beautifier';\nimport { BeautifierConfig, UrlBeautifier } from '../utils/url-beautifier';\nimport { Services } from './init';\nimport { FluxCapacitor, Query } from 'groupby-api';\nimport * as parseUri from 'parseUri';\n\nexport interface UrlConfig {\n  beautifier?: boolean | BeautifierConfig;\n  queryParam?: string;\n  searchUrl?: string;\n  detailsUrl?: string;\n}\n\nexport class Url {\n\n  urlConfig: UrlConfig;\n  beautifier: UrlBeautifier;\n  simple: SimpleBeautifier;\n  beautify: boolean;\n\n  constructor(private flux: FluxCapacitor, private config: SearchandiserConfig, private services: Services) {\n    this.urlConfig = this.config.url || {};\n    this.beautify = !!this.urlConfig.beautifier;\n  }\n\n  init() {\n    this.beautifier = new UrlBeautifier(this.config);\n    this.simple = new SimpleBeautifier(this.config);\n\n    if (!this.config.initialSearch) {\n\n      let query;\n      if (this.beautify) {\n        query = Url.parseBeautifiedUrl(this.beautifier);\n      } else {\n        query = Url.parseUrl(this.simple);\n      }\n\n      if (query) {\n        this.flux.query = query;\n        this.flux.search(query.raw.query)\n          .then(() => this.services.tracker.search());\n      }\n    }\n  }\n\n  active() {\n    return LOCATION.pathname() !== this.urlConfig.searchUrl;\n  }\n\n  // TODO: better way to do this is with browser history rewrites\n  update(query: string, refinements: any[] = this.flux.query.raw.refinements) {\n    const queryObj = new Query(query).withSelectedRefinements(...refinements);\n\n    let url;\n    if (this.beautify) {\n      url = this.beautifier.build(queryObj);\n    } else {\n      url = this.simple.build(queryObj);\n    }\n\n    Url.setLocation(url, this.urlConfig);\n  }\n\n  static parseUrl(simple: SimpleBeautifier) {\n    return simple.parse(LOCATION.href());\n  }\n\n  static parseBeautifiedUrl(beautifier: UrlBeautifier) {\n    return beautifier.parse(LOCATION.href());\n  }\n\n  static setLocation(url: string, config: UrlConfig) {\n    if (LOCATION.pathname() === config.searchUrl) {\n      LOCATION.setSearch(`?${parseUri(url).query}`);\n    } else {\n      LOCATION.replace(url);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/services/url.ts","import { CONFIGURATION_MASK, SearchandiserConfig, } from '../searchandiser';\nimport { UrlConfig } from '../services/url';\nimport { Query } from 'groupby-api';\nimport * as parseUri from 'parseUri';\nimport * as queryString from 'query-string';\n\nexport class SimpleBeautifier {\n\n  urlConfig: UrlConfig;\n\n  constructor(private config: SearchandiserConfig) {\n    this.urlConfig = config.url || {};\n  }\n\n  parse(url: string) {\n    const queryParams: any = queryString.parse(parseUri(url).query);\n    const queryFromUrl = new Query(queryParams[this.urlConfig.queryParam] || '')\n      .withConfiguration(this.config, CONFIGURATION_MASK);\n\n    if (queryParams.refinements) {\n      const refinements = JSON.parse(queryParams.refinements);\n      if (refinements.length > 0) {\n        queryFromUrl.withSelectedRefinements(...refinements);\n      }\n    }\n\n    return queryFromUrl;\n  }\n\n  build(query: Query) {\n    const request = query.build();\n    const queryObj = {};\n\n    if ('refinements' in request && request.refinements.length > 0) {\n      queryObj['refinements'] = JSON.stringify(request.refinements);\n    }\n\n    queryObj[this.urlConfig.queryParam] = request.query;\n\n    return `${this.urlConfig.searchUrl}?${queryString.stringify(queryObj)}`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/utils/simple-beautifier.ts","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/parseUri/index.js\n// module id = 26\n// module chunks = 0","import { CONFIGURATION_MASK, SearchandiserConfig } from '../searchandiser';\nimport { Query, SelectedRangeRefinement, SelectedRefinement, SelectedValueRefinement } from 'groupby-api';\nimport * as parseUri from 'parseUri';\nimport * as queryString from 'query-string';\n\nexport class UrlBeautifier {\n\n  config: BeautifierConfig = {\n    refinementMapping: [],\n    extraRefinementsParam: 'refinements',\n    queryToken: 'q',\n    suffix: ''\n  };\n  private generator: UrlGenerator = new UrlGenerator(this);\n  private parser: UrlParser = new UrlParser(this);\n\n  constructor(public searchandiserConfig: SearchandiserConfig = <any>{}) {\n    const urlConfig = searchandiserConfig.url || {};\n    const config = typeof urlConfig.beautifier === 'object' ? urlConfig.beautifier : {};\n    Object.assign(this.config, config);\n\n    const keys = [];\n    for (let mapping of this.config.refinementMapping) {\n      const key = Object.keys(mapping)[0];\n      if (key.length !== 1) {\n        throw new Error('refinement mapping token must be a single character');\n      }\n      if (key.match(/[aeiouy]/)) {\n        throw new Error('refinement mapping token must not be a vowel');\n      }\n      if (keys.indexOf(key) > -1) {\n        throw new Error('refinement mapping tokens must be unique');\n      }\n      keys.push(key);\n    }\n    if (this.config.queryToken.length !== 1) {\n      throw new Error('query token must be a single character');\n    }\n    if (this.config.queryToken.match(/[aeiouy]/)) {\n      throw new Error('query token must not be a vowel');\n    }\n    if (keys.indexOf(this.config.queryToken) > -1) {\n      throw new Error('query token must be unique from refinement tokens');\n    }\n  }\n\n  parse(url: string) {\n    return this.parser.parse(url);\n  }\n\n  build(query: Query) {\n    return this.generator.build(query);\n  }\n}\n\nexport class UrlGenerator {\n\n  config: BeautifierConfig;\n\n  constructor({ config }: UrlBeautifier) {\n    this.config = config;\n  }\n\n  build(query: Query): string {\n    const request = query.build();\n    const uri = {\n      path: [],\n      query: ''\n    };\n    // let url = '';\n    const origRefinements = Array.of(...request.refinements);\n    const countMap = {};\n    const { map, keys } = this.generateRefinementMap(origRefinements);\n\n    // add query\n    if (request.query) {\n      uri.path.push(request.query);\n    }\n\n    // add refinements\n    for (let key of keys) {\n      const refinements = <SelectedRefinement[]>map[key];\n      countMap[key] = refinements.length;\n      uri.path.push(...refinements.map(this.convertRefinement).sort());\n    }\n\n    // add reference key\n    if (keys.length || request.query) {\n      let referenceKey = '';\n      if (request.query) referenceKey += this.config.queryToken;\n      keys.forEach((key) => referenceKey += key.repeat(countMap[key]));\n      uri.path.push(referenceKey);\n    }\n\n    // add remaining refinements\n    if (origRefinements.length) {\n      uri.query = origRefinements\n        .sort((lhs, rhs) => lhs.navigationName.localeCompare(rhs.navigationName))\n        .map(this.stringifyRefinement)\n        .join('~');\n    }\n\n    let url = `/${uri.path.map((path) => encodeURIComponent(path)).join('/')}`;\n    if (this.config.suffix) url += `/${this.config.suffix.replace(/^\\/+/, '')}`;\n    if (uri.query) url += `?${this.config.extraRefinementsParam}=${encodeURIComponent(uri.query)}`;\n\n    return url.replace(/\\s|%20/g, '+');\n  }\n\n  private generateRefinementMap(refinements: SelectedRefinement[]): { map: any, keys: string[] } {\n    const refinementMap = {};\n    const refinementKeys = [];\n    for (let mapping of this.config.refinementMapping) {\n      const key = Object.keys(mapping)[0];\n      const matchingRefinements = refinements.filter((refinement) => refinement.navigationName === mapping[key]);\n      if (matchingRefinements.length) {\n        refinementKeys.push(key);\n        refinementMap[key] = matchingRefinements;\n        matchingRefinements.forEach((ref) => refinements.splice(refinements.indexOf(ref), 1));\n      }\n    }\n    return { map: refinementMap, keys: refinementKeys };\n  }\n\n  private convertRefinement(refinement: SelectedRefinement): string {\n    if (refinement.type === 'Value') {\n      return (<SelectedValueRefinement>refinement).value;\n    } else {\n      throw new Error('cannot map range refinements');\n    }\n  }\n\n  private stringifyRefinement(refinement: SelectedRefinement): string {\n    const name = refinement.navigationName;\n    if (refinement.type === 'Value') {\n      return `${name}=${(<SelectedValueRefinement>refinement).value}`;\n    } else {\n      return `${name}:${(<SelectedRangeRefinement>refinement).low}..${(<SelectedRangeRefinement>refinement).high}`;\n    }\n  }\n}\n\nexport class UrlParser {\n\n  searchandiserConfig: SearchandiserConfig;\n  config: BeautifierConfig;\n  suffixRegex: RegExp;\n\n  constructor({ config, searchandiserConfig }: UrlBeautifier) {\n    this.config = config;\n    this.searchandiserConfig = searchandiserConfig;\n    this.suffixRegex = new RegExp(`^${this.config.suffix}`);\n  }\n\n  parse(rawUrl: string): Query {\n    const url = parseUri(rawUrl);\n    const paths = url.path.split('/').filter((val) => val);\n\n    if (paths[paths.length - 1] === this.config.suffix) paths.pop();\n\n    const keys = (paths.pop() || '').split('');\n    const map = this.generateRefinementMapping();\n    const query = new Query().withConfiguration(this.searchandiserConfig, CONFIGURATION_MASK);\n\n    for (let key of keys) {\n      if (!(key in map || key === this.config.queryToken)) {\n        throw new Error(`unexpected token '${key}' found in reference`);\n      }\n    }\n\n    if (paths.length < keys.length) throw new Error('token reference is invalid');\n\n    // remove prefixed paths\n    paths.splice(0, paths.length - keys.length);\n\n    for (let i = 0; i < keys.length; i++) {\n      if (keys[i] === this.config.queryToken) {\n        query.withQuery(this.decode(paths[i]));\n      } else {\n        query.withSelectedRefinements(...this.extractRefinements(paths[i], map[keys[i]]));\n      }\n    }\n\n    const unmappedRefinements = queryString.parse(url.query)[this.config.extraRefinementsParam];\n    if (unmappedRefinements) query.withSelectedRefinements(...this.extractUnmapped(unmappedRefinements));\n\n    return query;\n  }\n\n  private generateRefinementMapping() {\n    return this.config.refinementMapping.reduce((map, mapping) => Object.assign(map, mapping), {});\n  }\n\n  private extractRefinements(refinementString: string, navigationName: string): SelectedValueRefinement[] {\n    const refinementStrings = refinementString.split('~');\n\n    return <any[]>refinementStrings.map((value) => ({ navigationName, type: 'Value', value: this.decode(value) }));\n  }\n\n  private extractUnmapped(refinementString: string): Array<SelectedValueRefinement | SelectedRangeRefinement> {\n    const refinementStrings = refinementString.split('~');\n    return refinementStrings\n      .map(this.decode)\n      .map((refinement) => {\n        const [navigationName, value] = refinement.split(/=|:/);\n        if (value.indexOf('..') >= 0) {\n          const [low, high] = value.split('..');\n          return <any>{ navigationName, low: Number(low), high: Number(high), type: 'Range' };\n        } else {\n          return <any>{ navigationName, value, type: 'Value' };\n        }\n      });\n  }\n\n  private decode(value: string): string {\n    return decodeURIComponent(value.replace('+', ' '));\n  }\n}\n\nexport interface BeautifierConfig {\n  refinementMapping?: any[];\n  extraRefinementsParam?: string;\n  queryToken?: string;\n  suffix?: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/utils/url-beautifier.ts","import { Services } from '../services/init';\nimport { checkBooleanAttr, getPath } from '../utils/common';\nimport { FluxCapacitor } from 'groupby-api';\nimport * as riot from 'riot';\nimport { Sayt } from 'sayt';\n\nconst sayt = new Sayt();\n\nexport interface FluxTag<T> extends riot.Tag.Instance {\n  parent: riot.Tag.Instance & FluxTag<any> & any;\n\n  flux: FluxCapacitor;\n  services: Services;\n  config: any;\n}\n\nexport class FluxTag<T> {\n  _tagName: string;\n  _simpleTagName: string;\n  _camelTagName: string;\n  _parents: any;\n  _parentsList: any[];\n  _scope: FluxTag<any> & any;\n  _top: FluxTag<any> & any;\n  _style: string;\n  _config: T;\n\n  init() {\n    this._style = this.config.stylish ? 'gb-stylish' : '';\n    setTagName(this);\n    setParents(this);\n    setScope(this);\n  }\n\n  _mixin(...mixins: any[]) {\n    this.mixin(...mixins.map((mixin) => new mixin().__proto__));\n  }\n\n  _scopeTo(scope: string) {\n    this._scope = this._parents[scope];\n  }\n\n  findParent(tag: riot.Tag.Instance, name: string) {\n    let parentTag: riot.Tag.Instance = tag;\n    while (parentTag.root.localName !== name && parentTag.parent) {\n      parentTag = parentTag.parent;\n    }\n    return parentTag;\n  }\n\n  configure(defaultConfig: any = {}) {\n    const rawConfig = Object.assign(\n      {},\n      defaultConfig,\n      getPath(this.config, `tags.${this._camelTagName}`),\n      this.opts.__proto__,\n      this.opts);\n    for (let key of Object.keys(rawConfig)) {\n      if (typeof defaultConfig[key] === 'boolean'\n        || rawConfig[key] == true // tslint:disable-line:triple-equals\n        || rawConfig[key] == false) { // tslint:disable-line:triple-equals\n        rawConfig[key] = checkBooleanAttr(key, rawConfig);\n      }\n    }\n    this._config = rawConfig;\n  }\n}\n\nexport interface SaytTag<T> extends FluxTag<T> { }\n\nexport class SaytTag<T> {\n\n  sayt: any;\n\n  init() {\n    this.sayt = sayt;\n  }\n}\n\nexport function setTagName(tag: FluxTag<any>) {\n  const htmlTagName = tag.root.tagName.toLowerCase();\n  const tagName = htmlTagName.startsWith('gb-') ?\n    htmlTagName :\n    tag.root.dataset['is'] || tag.root.getAttribute('riot-tag');\n\n  if (tagName) {\n    tag._tagName = tagName;\n    tag._simpleTagName = tag._tagName.replace(/^gb-/, '');\n    tag._camelTagName = tag._simpleTagName.replace(/-([a-z])/g, (match) => match[1].toUpperCase());\n  }\n}\n\nexport function setParents(tag: FluxTag<any>) {\n  tag._parents = tag.parent ? Object.assign({}, tag.parent['_parents']) : {};\n  if (tag._tagName) {\n    tag._parents[tag._tagName] = tag;\n  }\n\n  tag._parentsList = [];\n  let currTag = tag;\n  while (currTag = currTag.parent) tag._parentsList.push(currTag);\n}\n\n// somehow this function isn't working for the gb-select inside gb-sort\nexport function setScope(tag: FluxTag<any>) {\n  if (tag._parents && tag._parents[tag.opts.scope]) {\n    tag._scope = tag._parents[tag.opts.scope];\n  } else if (tag.parent && tag.parent._scope) {\n    tag._scope = tag.parent._scope;\n  } else {\n    let parent: any = tag;\n    while (parent.parent) tag._scope = parent = parent.parent;\n    tag._top = tag._scope;\n  }\n}\n\nexport function MixinFlux(flux: FluxCapacitor, config: any, services: any): FluxTag<any> {\n  return Object.assign(new FluxTag()['__proto__'], { flux, config, services });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/tag.ts","module.exports = require(\"sayt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sayt\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"riot\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot\"\n// module id = 30\n// module chunks = 0","import './breadcrumbs/gb-breadcrumbs.tag.html';\nimport './carousel/gb-carousel.tag.html';\nimport './category-menu/gb-category-menu.tag.html';\nimport './collections/gb-collections.tag.html';\nimport './details/gb-details.tag.html';\nimport './did-you-mean/gb-did-you-mean.tag.html';\nimport './filter/gb-filter.tag.html';\nimport './navigation/gb-navigation.tag.html';\nimport './page-size/gb-page-size.tag.html';\nimport './paging/gb-pager.tag.html';\nimport './paging/gb-pages.tag.html';\nimport './paging/gb-paging.tag.html';\nimport './paging/gb-terminal-pager.tag.html';\nimport './query/gb-query.tag.html';\nimport './raw/gb-raw.tag.html';\nimport './record-count/gb-record-count.tag.html';\nimport './related-queries/gb-related-queries.tag.html';\nimport './reset/gb-reset.tag.html';\nimport './results/gb-results.tag.html';\nimport './sayt/gb-sayt.tag.html';\nimport './select/gb-select.tag.html';\nimport './snippet/gb-snippet.tag.html';\nimport './sort/gb-sort.tag.html';\nimport './submit/gb-submit.tag.html';\nimport './template/gb-template.tag.html';\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/index.ts","import './gb-query-crumb.tag.html';\nimport '../list/gb-list.tag.html';\nimport './gb-refinement-crumb.tag.html';\nimport { Breadcrumbs } from './gb-breadcrumbs';\nriot.tag2('gb-breadcrumbs', '<yield> <div class=\"gb-breadcrumbs {_style}\"> <gb-query-crumb if=\"{!_config.hideQuery}\"></gb-query-crumb> <gb-list items=\"{selected}\" if=\"{!_config.hideRefinements}\" scope=\"gb-breadcrumbs\"> <gb-list class=\"gb-navigation-crumb\" items=\"{item.refinements}\" inline> <gb-refinement-crumb nav=\"{parent.item}\" ref=\"{item}\"></gb-refinement-crumb> </gb-list> </gb-list> </div> </yield>', 'gb-breadcrumbs .gb-stylish.gb-breadcrumbs,[riot-tag=\"gb-breadcrumbs\"] .gb-stylish.gb-breadcrumbs,[data-is=\"gb-breadcrumbs\"] .gb-stylish.gb-breadcrumbs{ display: flex; justify-content: flex-start; align-items: baseline; }', '', function(opts) {\n    this._mixin(Breadcrumbs);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/breadcrumbs/gb-breadcrumbs.tag.html","riot.tag2('gb-query-crumb', '<div if=\"{originalQuery}\"> <span if=\"{!_scope.correctedQuery && _scope._config.labels}\" class=\"gb-query-label\">{_scope._config.resultsLabel}</span> <span if=\"{_scope.correctedQuery && _scope._config.labels}\" class=\"gb-query-label\">{_scope._config.noResultsLabel}</span> <span class=\"gb-original-query\">{originalQuery}</span> </div> <div if=\"{correctedQuery}\"> <span if=\"{_scope._config.labels}\" class=\"gb-query-label\">{_scope._config.correctedResultsLabel}</span> <span class=\"gb-corrected-query\">{correctedQuery}</span> </div>', '', '', function(opts) {\n    this._scopeTo('gb-breadcrumbs');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/breadcrumbs/gb-query-crumb.tag.html","riot.tag2('gb-list', '<ul class=\"{_style} {inline: \\'inline\\' in opts}\"> <li each=\"{item, i in opts.items}\" class=\"{active: isActive(i)}\"> <yield></yield> </li> </ul>', 'gb-list > ul.gb-stylish { list-style: none; margin: 0; padding: 0; } gb-list > ul.gb-stylish > li { margin: 0 10px; } gb-list > ul.gb-stylish.inline > li { display: inline-block; } gb-list > ul.gb-stylish a { color: #888; cursor: pointer; } gb-list > ul.gb-stylish a:hover { color: black; }', '', function(opts) {\n    this.isActive = opts.activation;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/list/gb-list.tag.html","riot.tag2('gb-refinement-crumb', '<a onclick=\"{remove}\">&times;</a> <b>{nav.displayName}: {_scope.toView(ref)}</b>', '', '', function(opts) {\n    this.remove = () => this._scope.remove(opts.ref, opts.nav);\n    this.nav = opts.nav;\n    this.ref = opts.ref;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/breadcrumbs/gb-refinement-crumb.tag.html","import { displayRefinement, toRefinement } from '../../utils/common';\nimport { FluxTag } from '../tag';\nimport { Events, Results } from 'groupby-api';\n\nexport interface BreadcrumbsConfig {\n  hideQuery?: boolean;\n  hideRefinements?: boolean;\n  labels?: boolean;\n  resultsLabel?: string;\n  noResultsLabel?: string;\n  correctedResultsLabel?: string;\n}\n\nexport const DEFAULT_CONFIG: BreadcrumbsConfig = {\n  hideQuery: false,\n  hideRefinements: false,\n  labels: true,\n  resultsLabel: 'Results for:',\n  noResultsLabel: 'No results for:',\n  correctedResultsLabel: 'Showing results for:'\n};\n\nexport interface Breadcrumbs extends FluxTag<BreadcrumbsConfig> { }\n\nexport class Breadcrumbs {\n\n  selected: any[];\n  originalQuery: string;\n  toView: typeof displayRefinement;\n  correctedQuery: string;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n    this.toView = displayRefinement;\n\n    this.flux.on(Events.RESULTS, this.updateQueryState);\n    this.flux.on(Events.RESET, this.clearRefinements);\n  }\n\n  clearRefinements() {\n    this.update({ selected: [] });\n  }\n\n  updateQueryState({ originalQuery, selectedNavigation, correctedQuery }: Results) {\n    this.update({ originalQuery, selected: selectedNavigation, correctedQuery });\n  }\n\n  remove(ref: any, nav: any) {\n    this.flux.unrefine(toRefinement(ref, nav));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/breadcrumbs/gb-breadcrumbs.ts","import '../list/gb-list.tag.html';\nimport { Carousel } from './gb-carousel';\nriot.tag2('gb-carousel', '<a class=\"gb-carousel__previous-link\" onclick=\"{prev}\">Prev</a> <gb-list items=\"{options}\" activation=\"{isSelected}\"> <yield></yield> </gb-list> <a class=\"gb-carousel__next-link\" onclick=\"{next}\">Next</a>', 'gb-carousel gb-list > ul > li:not(.active),[riot-tag=\"gb-carousel\"] gb-list > ul > li:not(.active),[data-is=\"gb-carousel\"] gb-list > ul > li:not(.active){ display: none; }', '', function(opts) {\n    this._mixin(Carousel);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/carousel/gb-carousel.tag.html","import { unless } from '../../utils/common';\nimport { FluxTag } from '../tag';\n\nexport interface CarouselConfig {\n  options: any[];\n}\n\nexport interface Carousel extends FluxTag<CarouselConfig> { }\n\nexport class Carousel {\n\n  currentIndex: number;\n  options: any[];\n\n  init() {\n    this.configure();\n    this.currentIndex = 0;\n    this.options = unless(this._config.options, this._scope.options, []);\n  }\n\n  isSelected(index: number) {\n    return this.currentIndex === index;\n  }\n\n  next() {\n    this.update({ currentIndex: Math.min(this.currentIndex + 1, this.options.length - 1) });\n  }\n\n  prev() {\n    this.update({ currentIndex: Math.max(this.currentIndex - 1, 0) });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/carousel/gb-carousel.ts","import './gb-category-dropdown.tag.html';\nimport './gb-category-section.tag.html';\nriot.tag2('gb-category-menu', '<div class=\"gb-menu {_style}\"> <div class=\"gb-menu__item\" each=\"{opts.sections}\"> <gb-category-dropdown class=\"gb-category-dropdown\"></gb-category-dropdown> </div> </div>', 'gb-category-menu .gb-stylish.gb-menu,[riot-tag=\"gb-category-menu\"] .gb-stylish.gb-menu,[data-is=\"gb-category-menu\"] .gb-stylish.gb-menu{ display: flex; flex-direction: row; justify-content: center; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/category-menu/gb-category-menu.tag.html","riot.tag2('gb-category-dropdown', '<div class=\"gb-dropdown {_style}\"> <button type=\"button\" class=\"gb-dropdown__button\">{name}</button> <div class=\"gb-dropdown__content\"> <gb-category-section if=\"{items}\"></gb-category-section> <gb-category-section each=\"{subsections}\" named=\"{true}\"></gb-category-section> </div> <div class=\"gb-dropdown__images\"> <img src=\"\" each=\"{results.images}\"> </div> </div>', 'gb-category-dropdown .gb-dropdown,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown,[data-is=\"gb-category-dropdown\"] .gb-dropdown{ position: relative; display: inline-block; } gb-category-dropdown .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-dropdown__content{ display: none; position: absolute; min-width: 160px; background-color: #fff; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); } gb-category-dropdown .gb-dropdown:hover .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-dropdown:hover .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-dropdown:hover .gb-dropdown__content{ display: block; } gb-category-dropdown .gb-stylish .gb-dropdown__button,[riot-tag=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__button,[data-is=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__button{ border: none; cursor: pointer; padding: 16px; width: 100%; } gb-category-dropdown .gb-stylish .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-stylish .gb-dropdown__content{ flex-wrap: wrap; background-color: #f9f9f9; min-width: 272px; } gb-category-dropdown .gb-stylish.gb-dropdown:hover .gb-dropdown__content,[riot-tag=\"gb-category-dropdown\"] .gb-stylish.gb-dropdown:hover .gb-dropdown__content,[data-is=\"gb-category-dropdown\"] .gb-stylish.gb-dropdown:hover .gb-dropdown__content{ display: flex; }', '', function(opts) {\n    const sayt = require('sayt');\n    this.parentOpts = this.parent.opts;\n    const saytConfig = Object.assign({ products: 4 }, this.parentOpts.config.sayt);\n\n    sayt.configure({\n      subdomain: this.parentOpts.config.customerId,\n      collection: this.parentOpts.config.collection,\n      autocomplete: {},\n      productSearch: { area: this.parentOpts.config.area, numProducts: saytConfig.products }\n    });\n\n    this.updateSectionImages = (event) => console.dir(event.target);\n    this.updateCategoryImages = (event) => console.dir(event.target);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/category-menu/gb-category-dropdown.tag.html","riot.tag2('gb-category-section', '<div class=\"gb-category-section {_style}\"> <a if=\"{opts.named}\" class=\"gb-category-section__header\" onmouseover=\"{updateSectionImages}\" data-try=\"{name}\">{name}</a> <a each=\"{item in items}\" class=\"gb-category-section__link\" onmouseover=\"{updateCategoryImages}\">{item}</a> </div>', 'gb-category-section .gb-stylish.gb-category-section,[riot-tag=\"gb-category-section\"] .gb-stylish.gb-category-section,[data-is=\"gb-category-section\"] .gb-stylish.gb-category-section{ min-width: 120px; flex-wrap: wrap; padding: 6px 8px; } gb-category-section .gb-stylish .gb-category-section__header,[riot-tag=\"gb-category-section\"] .gb-stylish .gb-category-section__header,[data-is=\"gb-category-section\"] .gb-stylish .gb-category-section__header{ padding: 6px 4px; margin: 0; font-size: 1.1em; font-weight: bold; } gb-category-section .gb-stylish a,[riot-tag=\"gb-category-section\"] .gb-stylish a,[data-is=\"gb-category-section\"] .gb-stylish a{ padding: 3px 4px; text-decoration: none; display: block; } gb-category-section .gb-stylish a:hover,[riot-tag=\"gb-category-section\"] .gb-stylish a:hover,[data-is=\"gb-category-section\"] .gb-stylish a:hover{ background-color: #f1f1f1; }', '', function(opts) {\n    this.parentOpts = this.parent.parent.opts;\n    this.updateSectionImages = this.parent.parent.updateSectionImages;\n    this.updateCategoryImages = this.parent.parent.updateCategoryImages;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/category-menu/gb-category-section.tag.html","import './gb-collection-item.tag.html';\nimport './gb-collection-dropdown-item.tag.html';\nimport '../badge/gb-badge.tag.html';\nimport '../list/gb-list.tag.html';\nimport '../select/gb-select.tag.html';\nimport { Collections } from './gb-collections';\nriot.tag2('gb-collections', '<yield> <gb-list class=\"gb-collections {_style}\" items=\"{collections}\" if=\"{!_config.dropdown}\" scope=\"gb-collections\" inline> <gb-collection-item></gb-collection-item> </gb-list> <gb-select if=\"{_config.dropdown}\" scope=\"gb-collections\"> <gb-custom-select> <gb-collection-dropdown-item></gb-collection-dropdown-item> </gb-custom-select> </gb-select> </yield>', '', '', function(opts) {\n    this._mixin(Collections);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/collections/gb-collections.tag.html","import '../badge/gb-badge.tag.html';\nriot.tag2('gb-collection-item', '<a class=\"gb-collection\" data-collection=\"{item}\" onclick=\"{_scope.switchCollection}\"> <span class=\"gb-collection__name\">{_scope.labels[item] || item}</span> <gb-badge if=\"{_scope._config.counts}\">{_scope.counts[item]}</gb-badge> </a>', '', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/collections/gb-collection-item.tag.html","riot.tag2('gb-badge', '<span class=\"{_style}\"><yield></yield></span>', 'gb-badge .gb-stylish,[riot-tag=\"gb-badge\"] .gb-stylish,[data-is=\"gb-badge\"] .gb-stylish{ display: inline-block; min-width: 10px; max-height: 20px; padding: 4px 7px; border-radius: 10px; font-size: 12px; font-weight: bold; line-height: 1; color: #fff; background-color: #ccc; text-align: center; white-space: nowrap; vertical-align: middle; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/badge/gb-badge.tag.html","riot.tag2('gb-collection-dropdown-item', '<a class=\"gb-collection\" onclick=\"{selectDropdown}\"> <span class=\"gb-collection__name\">{option.label || option}</span> <gb-badge>{_scope.counts[option.value || option]}</gb-badge> </a>', '', '', function(opts) {\n    this.selectDropdown = () => {\n      if (typeof this.option === 'object') {\n        this._scope.selectCustom(this.option);\n      } else {\n        this._scope.selectCustom({\n          label: this.option,\n          value: this.option\n        });\n      }\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/collections/gb-collection-dropdown-item.tag.html","import './gb-native-select.tag.html';\nimport './gb-custom-select.tag.html';\nimport { Select } from './gb-select';\nriot.tag2('gb-select', '<yield> <gb-native-select if=\"{_config.native}\"></gb-native-select> <gb-custom-select if=\"{!_config.native}\"></gb-custom-select> </yield>', '', '', function(opts) {\n    this._mixin(Select);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-select.tag.html","import { Select } from './gb-select';\nriot.tag2('gb-native-select', '<select name=\"selector\" onchange=\"{_scope.selectNative}\"> <option if=\"{!_scope.default}\" value=\"\" selected disabled>{_scope.selectLabel()}</option> <option each=\"{option in _scope.options}\" if=\"{!option.clear}\" value=\"{optionValue(option)}\">{optionLabel(option)}</option> </select>', '', '', function(opts) {\n    this.optionLabel = Select.optionLabel;\n    this.optionValue = Select.optionValue;\n    this._scopeTo('gb-select');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-native-select.tag.html","import { FluxTag } from '../tag';\n\nexport interface SelectConfig {\n  label?: string;\n  clear?: string;\n  hover?: boolean;\n  native?: boolean;\n}\n\nexport interface SelectTag<T extends SelectConfig> extends FluxTag<T> {\n  options: any[];\n  onselect: Function;\n}\n\nexport interface Select<T extends SelectConfig> extends FluxTag<T> {\n  _scope: SelectTag<T>;\n}\n\nexport class Select<T extends SelectConfig> {\n\n  iconUrl: string;\n  label: string;\n  clearOption: { label: string, clear: boolean };\n  options: any[];\n  callback: Function;\n  selectedOption: any;\n  default: boolean;\n  selected: any;\n  focused: boolean;\n\n  init(): void {\n    this._config = this._scope._config;\n\n    this.iconUrl = require('./arrow-down.png');\n    this.label = this._config.label || 'Select';\n    this.clearOption = { label: this._config.clear || 'Unselect', clear: true };\n    this.options = this._scope.options || [];\n    this.callback = this._scope.onselect;\n    this.default = !('clear' in this._config);\n\n    if (this.default) {\n      this.selectedOption = typeof this.options[0] === 'object' ? this.options[0].label : this.options[0];\n    }\n  }\n\n  updateOptions(options: any[]) {\n    this.update({ options: this.default ? options : [this.clearOption, ...options] });\n  }\n\n  selectLabel(): string {\n    return this.selectedOption || (this.selected ? this.clearOption : this.label);\n  }\n\n  prepFocus() {\n    return this.focused = false;\n  }\n\n  selectButton() {\n    return this.tags['gb-custom-select'].tags['gb-select-button'].root;\n  }\n\n  nativeSelect() {\n    if (this.tags['gb-native-select']) {\n      return this.tags['gb-native-select'].selector;\n    } else {\n      return this.root.querySelector('select');\n    }\n  }\n\n  unfocus() {\n    this.focused = this._config.hover || !this.focused;\n    if (!this.focused) this.selectButton().blur();\n  }\n\n  selectOption(selectedOption: string, value: any): void {\n    this.update({ selectedOption });\n    if (this.callback) {\n      try {\n        this.callback(JSON.parse(value));\n      } catch (e) {\n        this.callback(value || '*');\n      }\n    }\n  }\n\n  selectNative(event: Event) {\n    const [option] = Array.from((<HTMLSelectElement>event.target).selectedOptions);\n    const selected = option.value;\n    this.nativeSelect().options[0].disabled = !selected;\n    this.update({ selected });\n    this.selectOption(option.text, selected);\n  }\n\n  selectCustom({ value, label }: { value: string, label: string }) {\n    this.selectButton().blur();\n    this.selectOption(label, value);\n  }\n\n  clearSelection() {\n    return this.selectOption(undefined, '*');\n  }\n\n  static optionValue(option: any) {\n    return typeof option === 'object' ? JSON.stringify(option.value) : option;\n  }\n\n  static optionLabel(option: any) {\n    return typeof option === 'object' ? option.label : option;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/select/gb-select.ts","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAPFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQLyYwAAAAE3RSTlMADQ46Ozw9SElKS0y5x+zz9Pj5WslQRAAAAQdJREFUeJztzlcOwkAQBFFyxjbM/e9KFsbrNGK3V6Cq/1a/yYSIiIiIiIiIiIiIfqRp8kF/q2LtG+yLedT/yk4uwf5sZUTBsjJzCa7/FlFw//cI7v/xBMvSzCV4/scSLF7/ZueN6z+OoPY/TlD7jyI4mLkEH/9mh68Bs6NL0Pg/zr4G+AQJ/l2CJP8OQaL/ULAV/48UJPwfJUj6P0KQ+H9QkPx/QCD4DwU78X+PQPTfKZD9dwiE/60C6X+LQPwfCtT/gUD+3yfQ/HcLVP9dAt1/u0D53ybQ/ocC9X9ToP//FOT4rwvy/L8Fuf5fgnz/D0HO/5sg7/9VkPmfiIiIiIiIiIiIiP6gC0vzP5P1npi3AAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tags/select/arrow-down.png\n// module id = 49\n// module chunks = 0","import './gb-select-button.tag.html';\nimport './gb-option-list.tag.html';\nimport './gb-option.tag.html';\nriot.tag2('gb-custom-select', '<div class=\"gb-select {_scope._config.hover ? \\'hoverable\\' : \\'clickable\\'} {_style}\"> <button data-is=\"gb-select-button\" type=\"button\"></button> <gb-option-list> <yield> <gb-option option=\"{option}\" send=\"{option.clear ? _scope.clearSelection : _scope.selectCustom}\"></gb-option> </yield> </gb-option-list> </div>', 'gb-custom-select .gb-select,[riot-tag=\"gb-custom-select\"] .gb-select,[data-is=\"gb-custom-select\"] .gb-select{ position: relative; display: inline-block; } gb-custom-select gb-option-list,[riot-tag=\"gb-custom-select\"] gb-option-list,[data-is=\"gb-custom-select\"] gb-option-list{ display: none; z-index: 100; position: absolute; min-width: 160px; background-color: #f6f6f6; box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); max-height: 300px; overflow-y: scroll; } gb-custom-select .gb-select.hoverable:hover gb-option-list,[riot-tag=\"gb-custom-select\"] .gb-select.hoverable:hover gb-option-list,[data-is=\"gb-custom-select\"] .gb-select.hoverable:hover gb-option-list,gb-custom-select .gb-select.clickable button:focus + gb-option-list,[riot-tag=\"gb-custom-select\"] .gb-select.clickable button:focus + gb-option-list,[data-is=\"gb-custom-select\"] .gb-select.clickable button:focus + gb-option-list,gb-custom-select gb-option-list:hover,[riot-tag=\"gb-custom-select\"] gb-option-list:hover,[data-is=\"gb-custom-select\"] gb-option-list:hover{ display: block; } gb-custom-select .gb-stylish.gb-select:hover button,[riot-tag=\"gb-custom-select\"] .gb-stylish.gb-select:hover button,[data-is=\"gb-custom-select\"] .gb-stylish.gb-select:hover button,gb-custom-select .gb-stylish.gb-select button:focus,[riot-tag=\"gb-custom-select\"] .gb-stylish.gb-select button:focus,[data-is=\"gb-custom-select\"] .gb-stylish.gb-select button:focus{ border-color: #aaa; } gb-custom-select button,[riot-tag=\"gb-custom-select\"] button,[data-is=\"gb-custom-select\"] button{ overflow-x: hidden; display: flex; align-items: center; font-size: 14px; border: none; cursor: pointer; padding: 8px 16px; width: 100%; background-color: #eee; border: 2px solid #ddd; border-radius: 4px; white-space: nowrap; } gb-custom-select .gb-stylish button:focus,[riot-tag=\"gb-custom-select\"] .gb-stylish button:focus,[data-is=\"gb-custom-select\"] .gb-stylish button:focus{ outline: none; }', '', function(opts) {\n    this._scopeTo('gb-select');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-custom-select.tag.html","riot.tag2('gb-select-button', '<yield> <span class=\"gb-button__label\">{_scope.selectLabel()}</span> <img riot-src=\"{_scope.iconUrl}\" alt=\"\"> </yield>', 'gb-select-button img,[riot-tag=\"gb-select-button\"] img,[data-is=\"gb-select-button\"] img{ margin-left: 10px; margin-top: 2px; height: 24px; }', '', function(opts) {\n    this.root.addEventListener('focus', this._scope.prepFocus);\n    this.root.addEventListener('click', this._scope.unFocus);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-select-button.tag.html","riot.tag2('gb-option-list', '<ul> <li each=\"{option in _scope.options}\" class=\"gb-select__option {clear: option.clear}\" if=\"{option.clear ? _scope.selectedOption : true}\"> <yield></yield> </li> </ul>', 'gb-option-list ul,[riot-tag=\"gb-option-list\"] ul,[data-is=\"gb-option-list\"] ul{ margin: 0; padding: 0; list-style: none; } gb-option-list ul:hover,[riot-tag=\"gb-option-list\"] ul:hover,[data-is=\"gb-option-list\"] ul:hover{ display: block; } gb-option-list a,[riot-tag=\"gb-option-list\"] a,[data-is=\"gb-option-list\"] a{ cursor: pointer; display: block; text-decoration: none; color: black; padding: 10px 12px; } gb-option-list a:hover,[riot-tag=\"gb-option-list\"] a:hover,[data-is=\"gb-option-list\"] a:hover{ background-color: #eee; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-option-list.tag.html","import { Select } from './gb-select';\nriot.tag2('gb-option', '<a onclick=\"{send}\">{label}</a>', '', '', function(opts) {\n    this.label = Select.optionLabel(opts.option);\n    this.value = Select.optionValue(opts.option);\n    this.send = () => opts.send(this);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/select/gb-option.tag.html","import { COLLECTIONS_UPDATED_EVENT } from '../../services/collections';\nimport { SelectConfig, SelectTag } from '../select/gb-select';\n\nexport interface CollectionOption {\n  label: string;\n  value: string;\n}\n\nexport interface CollectionsConfig extends SelectConfig {\n  options: string[] | CollectionOption[];\n  counts?: boolean;\n  dropdown?: boolean;\n}\n\nexport const DEFAULT_CONFIG: CollectionsConfig = {\n  options: [],\n  counts: true,\n  dropdown: false\n};\n\nexport interface Collections extends SelectTag<CollectionsConfig> { }\n\nexport class Collections {\n\n  collections: string[];\n  counts: any;\n  labels: any;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.options = this._config.options;\n    const collectionsService = this.services.collections;\n    this.collections = collectionsService.collections;\n    this.labels = collectionsService.isLabeled\n      ? (<CollectionOption[]>this._config.options).reduce(this.extractLabels, {})\n      : {};\n\n    this.flux.on(COLLECTIONS_UPDATED_EVENT, this.updateCounts);\n  }\n\n  updateCounts(counts: any) {\n    this.update({ counts });\n  }\n\n  switchCollection(event: MouseEvent) {\n    let element = <HTMLElement>event.target;\n    while (element.tagName !== 'A') element = element.parentElement;\n    this.onselect(element.dataset['collection']);\n  }\n\n  onselect(collection: string) {\n    this.flux.switchCollection(collection);\n  }\n\n  private extractLabels(labels: any, collection: { value: string; label: string; }) {\n    return Object.assign(labels, { [collection.value]: collection.label });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/collections/gb-collections.ts","import { Details } from './gb-details';\nriot.tag2('gb-details', '<div class=\"gb-details\"> <yield></yield> </div>', '', '', function(opts) {\n    this._mixin(Details);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/details/gb-details.tag.html","import { getParam } from '../../utils/common';\nimport { ProductMeta, ProductTransformer } from '../../utils/product-transformer';\nimport { FluxTag } from '../tag';\nimport * as clone from 'clone';\nimport { Events, Record } from 'groupby-api';\n\nexport interface DetailsConfig {\n  idParam: string;\n}\n\nexport const DEFAULT_CONFIG: DetailsConfig = {\n  idParam: 'id'\n};\n\nexport interface Details extends FluxTag<DetailsConfig> { }\n\nexport class Details {\n\n  query: string;\n  struct: any;\n  allMeta: any;\n  transformer: ProductTransformer;\n  productMeta: ProductMeta;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.query = getParam(this._config.idParam);\n    this.struct = this.config.structure || {};\n    this.transformer = new ProductTransformer(this.struct);\n\n    this.flux.on(Events.DETAILS, this.updateRecord);\n    if (this.query) this.flux.details(this.query, this.transformer.idField);\n  }\n\n  updateRecord({ allMeta }: Record) {\n    const productMeta = this.transformer.transform(clone(allMeta, false));\n    this.update({ productMeta, allMeta: productMeta() });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/details/gb-details.ts","module.exports = require(\"clone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"clone\"\n// module id = 57\n// module chunks = 0","import '../list/gb-list.tag.html';\nimport { DidYouMean } from './gb-did-you-mean';\nriot.tag2('gb-did-you-mean', '<yield> <gb-list class=\"{_style}\" items=\"{didYouMean}\" scope=\"gb-did-you-mean\" inline> <a onclick=\"{_scope.send}\">{item}</a> </gb-list> </yield>', '', '', function(opts) {\n    this._mixin(DidYouMean);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/did-you-mean/gb-did-you-mean.tag.html","import { FluxTag } from '../tag';\nimport { Events, Results } from 'groupby-api';\n\nexport interface DidYouMean extends FluxTag<any> { }\n\nexport class DidYouMean {\n\n  init() {\n    this.flux.on(Events.RESULTS, this.updateDidYouMean);\n  }\n\n  send(event: Event) {\n    this.flux.rewrite((<HTMLAnchorElement>event.target).text)\n      .then(() => this.services.tracker.didYouMean());\n  }\n\n  updateDidYouMean({ didYouMean }: Results) {\n    this.update({ didYouMean });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/did-you-mean/gb-did-you-mean.ts","import '../select/gb-select.tag.html';\nimport { Filter } from './gb-filter';\nriot.tag2('gb-filter', '<yield> <gb-select scope=\"gb-filter\"> </gb-select> </yield>', '', '', function(opts) {\n    this._mixin(Filter);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/filter/gb-filter.tag.html","import { FILTER_UPDATED_EVENT } from '../../services/filter';\nimport { toRefinement } from '../../utils/common';\nimport { SelectConfig, SelectTag } from '../select/gb-select';\nimport { Results } from 'groupby-api';\n\nexport interface FilterConfig extends SelectConfig {\n  field: string;\n}\n\nexport const DEFAULT_CONFIG: FilterConfig = {\n  field: undefined,\n  label: 'Filter',\n  clear: 'Unfiltered'\n};\n\nexport interface Filter extends SelectTag<FilterConfig> { }\n\nexport class Filter {\n\n  _config: FilterConfig;\n  selected: any;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.flux.on(FILTER_UPDATED_EVENT, this.updateValues);\n  }\n\n  convertRefinements(navigations: any[]): any[] {\n    const found = navigations.find(({ name }) => this.services.filter.isTargetNav(name));\n    return found ? found.refinements.map((ref) => ({ label: ref.value, value: ref })) : [];\n  }\n\n  updateValues(res: Results) {\n    const converted = this.convertRefinements(res.availableNavigation);\n    if (this.tags['gb-select']) {\n      this.tags['gb-select'].updateOptions(converted);\n    } else {\n      this.update({ options: converted });\n    }\n  }\n\n  onselect(value: any | '*') {\n    if (this.selected) this.flux.unrefine(this.selected, { skipSearch: true });\n    if (value === '*') {\n      this.flux.reset();\n    } else {\n      this.flux.refine(this.selected = toRefinement(value, <any>{ name: this._config.field }));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/filter/gb-filter.ts","import './gb-refinement-list.tag.html';\nimport './gb-available-refinement.tag.html';\nimport './gb-selected-refinement.tag.html';\nimport { Navigation } from './gb-navigation';\nriot.tag2('gb-navigation', '<yield> <div class=\"gb-side-nav {_style}\"> <gb-refinement-list each=\"{nav in processed}\"></gb-refinement-list> </div> </yield>', 'gb-navigation .gb-stylish.gb-side-nav,[riot-tag=\"gb-navigation\"] .gb-stylish.gb-side-nav,[data-is=\"gb-navigation\"] .gb-stylish.gb-side-nav{ padding: 12px; }', '', function(opts) {\n    this._mixin(Navigation);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/navigation/gb-navigation.tag.html","riot.tag2('gb-refinement-list', '<div id=\"{nav.name}\" class=\"{_style}\"> <h4 class=\"gb-navigation-title\">{nav.displayName}</h4> <ul> <gb-selected-refinement if=\"{_config.showSelected}\" each=\"{ref in nav.selected}\"></gb-selected-refinement> <gb-available-refinement each=\"{ref in nav.refinements}\"></gb-available-refinement> <li class=\"gb-more-refinements\" if=\"{nav.moreRefinements}\"> <a href=\"#\" onclick=\"{moreRefinements}\">More</a> </li> </ul> </div>', 'gb-refinement-list .gb-stylish.gb-refinement-list .gb-navigation-title,[riot-tag=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list .gb-navigation-title,[data-is=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list .gb-navigation-title{ font-size: 18px; margin: 10px 0; } gb-refinement-list .gb-stylish.gb-refinement-list ul,[riot-tag=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list ul,[data-is=\"gb-refinement-list\"] .gb-stylish.gb-refinement-list ul{ margin: 0; padding-left: 8px; }', '', function(opts) {\n    this.moreRefinements = () => {\n      this.flux.refinements(this.nav.name);\n      this.nav.moreRefinements = false;\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/navigation/gb-refinement-list.tag.html","import '../badge/gb-badge.tag.html';\nimport { AvailableRefinement } from './gb-refinement';\nriot.tag2('gb-available-refinement', '<li class=\"gb-ref {_style}\"> <a class=\"gb-ref__link\" onclick=\"{send}\"> <span class=\"gb-ref__title\">{toView(ref)}</span> <span class=\"gb-filler\"></span> <gb-badge if=\"{_config.badge}\">{ref.count}</gb-badge> </a> </li>', 'gb-available-refinement .gb-stylish,[riot-tag=\"gb-available-refinement\"] .gb-stylish,[data-is=\"gb-available-refinement\"] .gb-stylish{ list-style: none; } gb-available-refinement .gb-stylish .gb-filler,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-filler,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-filler{ flex-grow: 1; } gb-available-refinement .gb-stylish .gb-ref__link,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-ref__link,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-ref__link{ cursor: pointer; display: flex; padding: 4px 6px; border-radius: 4px; color: black; font-size: 14px; text-decoration: none; align-items: baseline; } gb-available-refinement .gb-stylish .gb-ref__link:hover,[riot-tag=\"gb-available-refinement\"] .gb-stylish .gb-ref__link:hover,[data-is=\"gb-available-refinement\"] .gb-stylish .gb-ref__link:hover{ background-color: #ddd; }', '', function(opts) {\n    this._mixin(AvailableRefinement);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/navigation/gb-available-refinement.tag.html","import { displayRefinement } from '../../utils/common';\nimport { FluxTag } from '../tag';\n\nexport interface Refinement extends FluxTag<any> { }\n\nexport class Refinement {\n\n  ref: any;\n  nav: any;\n  toView: typeof displayRefinement;\n\n  init() {\n    this._scopeTo('gb-navigation');\n    this.toView = displayRefinement;\n  }\n}\n\nexport class AvailableRefinement extends Refinement {\n  send() {\n    return this._scope.send(this.ref, this.nav);\n  }\n}\n\nexport class SelectedRefinement extends Refinement {\n  remove() {\n    return this._scope.remove(this.ref, this.nav);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/navigation/gb-refinement.ts","import { SelectedRefinement } from './gb-refinement';\nriot.tag2('gb-selected-refinement', '<li class=\"gb-ref {_style}\"> <a class=\"gb-ref__link\" onclick=\"{remove}\">&times;</a> <span class=\"gb-ref__value\">{toView(ref)}</span> </li>', 'gb-selected-refinement .gb-stylish,[riot-tag=\"gb-selected-refinement\"] .gb-stylish,[data-is=\"gb-selected-refinement\"] .gb-stylish{ position: relative; list-style: none; padding: 4px 6px; font-size: 14px; } gb-selected-refinement .gb-stylish .gb-ref__link,[riot-tag=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link,[data-is=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link{ cursor: pointer; left: -8px; position: absolute; color: black; text-decoration: none; } gb-selected-refinement .gb-stylish .gb-ref__link:hover,[riot-tag=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link:hover,[data-is=\"gb-selected-refinement\"] .gb-stylish .gb-ref__link:hover{ color: red; font-weight: bold; }', '', function(opts) {\n    this._mixin(SelectedRefinement);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/navigation/gb-selected-refinement.tag.html","import { toRefinement } from '../../utils/common';\nimport { FluxTag } from '../tag';\nimport * as clone from 'clone';\nimport { Events, Navigation as NavModel, NavigationInfo, RefinementResults, Results } from 'groupby-api';\n\nexport { NavigationInfo }\n\nexport interface NavigationConfig {\n  badge?: boolean;\n  showSelected?: boolean;\n}\n\nexport const DEFAULT_CONFIG: NavigationConfig = {\n  badge: true,\n  showSelected: true\n};\n\nexport interface Navigation extends FluxTag<NavigationConfig> { }\n\nexport class Navigation {\n\n  processed: SelectionNavigation[];\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.flux.on(Events.RESULTS, this.updateNavigations);\n    this.flux.on(Events.REFINEMENT_RESULTS, this.updateRefinements);\n  }\n\n  updateNavigations(res: Results) {\n    this.update({ processed: this.processNavigations(res) });\n  }\n\n  updateRefinements(res: RefinementResults) {\n    this.update({ processed: this.replaceRefinements(res) });\n  }\n\n  replaceRefinements(res: RefinementResults) {\n    const found = this.processed.find((nav) => nav.name === res.navigation.name);\n    if (found) {\n      found.refinements = res.navigation.refinements;\n    }\n    return this.processed;\n  }\n\n  processNavigations({ selectedNavigation, availableNavigation }: Results) {\n    const processed = <SelectionNavigation[]>clone(availableNavigation);\n    selectedNavigation.forEach((selNav) => {\n      const availNav = processed.find((nav) => nav.name === selNav.name);\n      if (availNav) {\n        availNav.selected = selNav.refinements;\n      } else {\n        processed.unshift(Object.assign({}, selNav, { selected: selNav.refinements, refinements: [] }));\n      }\n    });\n    return processed;\n  }\n\n  send(ref: any, nav: any) {\n    return this.flux.refine(toRefinement(ref, nav));\n  }\n\n  remove(ref: any, nav: any) {\n    return this.flux.unrefine(toRefinement(ref, nav));\n  }\n}\n\nexport interface SelectionNavigation extends NavModel {\n  selected: any[];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/navigation/gb-navigation.ts","import '../select/gb-select.tag.html';\nimport { PageSize } from './gb-page-size';\nriot.tag2('gb-page-size', '<yield> <gb-select scope=\"gb-page-size\"> </gb-select> </yield>', '', '', function(opts) {\n    this._mixin(PageSize);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/page-size/gb-page-size.tag.html","import { SelectConfig, SelectTag } from '../select/gb-select';\n\nexport interface PageSizeConfig extends SelectConfig {\n  resetOffset?: boolean;\n}\n\nexport const DEFAULT_CONFIG = {\n  resetOffset: false\n};\n\nexport interface PageSize extends SelectTag<PageSizeConfig> { }\n\nexport class PageSize {\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.options = this.config.pageSizes || [10, 25, 50, 100];\n  }\n\n  onselect(value: number) {\n    this.flux.resize(value, this._config.resetOffset)\n      .then(() => this.services.tracker.search());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/page-size/gb-page-size.ts","import '../icon/gb-icon.tag.html';\nimport { Pager } from './gb-pager';\nriot.tag2('gb-pager', '<div class=\"gb-pager {_style}\"> <a class=\"gb-pager__link prev {disabled: _scope.backDisabled}\" onclick=\"{_scope.pager.prev}\"> <gb-icon if=\"{_config.icons}\" value=\"{_config.prev_icon}\"></gb-icon> <span if=\"{_config.labels}\">{_config.prev_label}</span> </a> <yield></yield> <a class=\"gb-pager__link next {disabled: _scope.forwardDisabled}\" onclick=\"{_scope.pager.next}\"> <span if=\"{_config.labels}\">{_config.next_label}</span> <gb-icon if=\"{_config.icons}\" value=\"{_config.next_icon}\"></gb-icon> </a> </div>', 'gb-pager .gb-stylish a,[riot-tag=\"gb-pager\"] .gb-stylish a,[data-is=\"gb-pager\"] .gb-stylish a{ cursor: pointer; } gb-pager .gb-stylish.gb-pager,[riot-tag=\"gb-pager\"] .gb-stylish.gb-pager,[data-is=\"gb-pager\"] .gb-stylish.gb-pager{ display: flex; } gb-pager .gb-stylish .gb-pager__link,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link{ display: flex; text-decoration: none; color: #888; padding: 5px 14px; } gb-pager .gb-stylish .gb-pager__link:hover,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link:hover,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link:hover{ color: black; } gb-pager .gb-stylish .gb-pager__link.disabled,[riot-tag=\"gb-pager\"] .gb-stylish .gb-pager__link.disabled,[data-is=\"gb-pager\"] .gb-stylish .gb-pager__link.disabled{ color: #ddd; cursor: not-allowed; } gb-pager .gb-stylish gb-pages,[riot-tag=\"gb-pager\"] .gb-stylish gb-pages,[data-is=\"gb-pager\"] .gb-stylish gb-pages{ flex: 1; } gb-pager .gb-stylish gb-icon img,[riot-tag=\"gb-pager\"] .gb-stylish gb-icon img,[data-is=\"gb-pager\"] .gb-stylish gb-icon img{ width: 20px; }', '', function(opts) {\n    this._mixin(Pager);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/paging/gb-pager.tag.html","import { Icon } from './gb-icon';\nriot.tag2('gb-icon', '<i if=\"{classes}\" class=\"{classes}\"></i> <img if=\"{url}\" riot-src=\"{url}\"></img>', '', '', function(opts) {\n    this._mixin(Icon);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/icon/gb-icon.tag.html","import { FluxTag } from '../tag';\n\nexport const IMAGE_PATTERN = /.*\\..*/;\nexport const DATA_URL_PREFIX = 'data:image/';\n\nexport interface IconConfig {\n  value: string;\n}\n\nexport interface Icon extends FluxTag<IconConfig> { }\n\nexport class Icon {\n\n  url: string;\n  classes: string;\n\n  init() {\n    this.configure();\n    if (this.isImage(this._config.value)) {\n      this.url = this._config.value;\n    } else {\n      this.classes = this._config.value;\n    }\n  }\n\n  private isImage(value: string) {\n    const matches = value.match(IMAGE_PATTERN);\n    return (matches && matches.length > 0) || value.startsWith(DATA_URL_PREFIX);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/icon/gb-icon.ts","import { FluxTag } from '../tag';\nimport { PagingConfig } from './gb-paging';\n\nexport interface Pager extends FluxTag<PagingConfig> { }\n\nexport class Pager {\n\n  init() {\n    this._scopeTo('gb-paging');\n    this._config = this._scope._config;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/paging/gb-pager.ts","import { Pages } from './gb-pages';\nriot.tag2('gb-pages', '<ul class=\"gb-pages {_style}\" if=\"{_config.pages}\"> <span class=\"gb-pages__ellipsis\" if=\"{_scope.lowOverflow}\">&hellip;</span> <li each=\"{pageNumber in _scope.pageNumbers}\"> <a class=\"gb-pages__page {selected: _scope.currentPage === pageNumber}\" onclick=\"{jumpTo}\">{pageNumber}</a> </li> <span class=\"gb-pages__ellipsis\" if=\"{_scope.highOverflow}\">&hellip;</span> </ul>', 'gb-pages .gb-stylish a,[riot-tag=\"gb-pages\"] .gb-stylish a,[data-is=\"gb-pages\"] .gb-stylish a{ cursor: pointer; } gb-pages .gb-stylish.gb-pages,[riot-tag=\"gb-pages\"] .gb-stylish.gb-pages,[data-is=\"gb-pages\"] .gb-stylish.gb-pages{ margin: 0; padding: 0; list-style: none; display: flex; align-items: center; justify-content: center; height: 100%; } gb-pages .gb-stylish.gb-pages li,[riot-tag=\"gb-pages\"] .gb-stylish.gb-pages li,[data-is=\"gb-pages\"] .gb-stylish.gb-pages li{ display: inline; } gb-pages .gb-stylish .gb-pages__page,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page,gb-pages .gb-stylish .gb-pages__ellipsis,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__ellipsis,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__ellipsis{ text-decoration: none; color: #888; } gb-pages .gb-stylish .gb-pages__page,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page{ padding: 0 4px; } gb-pages .gb-stylish .gb-pages__page:hover,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page:hover,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page:hover,gb-pages .gb-stylish .gb-pages__page.selected,[riot-tag=\"gb-pages\"] .gb-stylish .gb-pages__page.selected,[data-is=\"gb-pages\"] .gb-stylish .gb-pages__page.selected{ color: black; }', '', function(opts) {\n    this._mixin(Pages);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/paging/gb-pages.tag.html","import { FluxTag } from '../tag';\nimport { PagingConfig } from './gb-paging';\n\nexport interface Pages extends FluxTag<PagingConfig> { }\n\nexport class Pages {\n\n  init() {\n    this._scopeTo('gb-paging');\n    this._config = this._scope._config;\n  }\n\n  jumpTo({ target }: any) {\n    this._scope.pager.switchPage(Number(target.text));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/paging/gb-pages.ts","import './gb-terminal-pager.tag.html';\nimport './gb-pager.tag.html';\nimport './gb-pages.tag.html';\nimport { Paging } from './gb-paging';\nriot.tag2('gb-paging', '<yield> <gb-terminal-pager> <gb-pager> <gb-pages></gb-pages> </gb-pager> </gb-terminal-pager> </yield>', '', '', function(opts) {\n    this._mixin(Paging);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/paging/gb-paging.tag.html","import '../icon/gb-icon.tag.html';\nimport { TerminalPager } from './gb-terminal-pager';\nriot.tag2('gb-terminal-pager', '<div class=\"gb-terminal-pager {_style}\"> <a class=\"gb-terminal__link first {disabled: _scope.backDisabled}\" if=\"{_scope._config.terminals}\" onclick=\"{_scope.pager.first}\"> <gb-icon if=\"{_config.icons}\" value=\"{_config.first_icon}\"></gb-icon> <span if=\"{_config.labels}\">{_config.numeric ? 1 : _config.first_label}</span> </a> <yield></yield> <a class=\"gb-terminal__link last {disabled: _scope.forwardDisabled}\" if=\"{_config.terminals}\" onclick=\"{_scope.pager.last}\"> <span if=\"{_config.labels}\">{_config.numeric ? _scope.lastPage : _config.last_label}</span> <gb-icon if=\"{_config.icons}\" value=\"{_config.last_icon}\"></gb-icon> </a> </div>', 'gb-terminal-pager .gb-stylish a,[riot-tag=\"gb-terminal-pager\"] .gb-stylish a,[data-is=\"gb-terminal-pager\"] .gb-stylish a{ cursor: pointer; } gb-terminal-pager .gb-stylish.gb-terminal-pager,[riot-tag=\"gb-terminal-pager\"] .gb-stylish.gb-terminal-pager,[data-is=\"gb-terminal-pager\"] .gb-stylish.gb-terminal-pager{ display: flex; width: 100%; } gb-terminal-pager .gb-stylish .gb-terminal__link,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link{ display: flex; text-decoration: none; color: #888; padding: 5px 14px; } gb-terminal-pager .gb-stylish .gb-terminal__link:hover,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link:hover,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link:hover{ color: black; } gb-terminal-pager .gb-stylish .gb-terminal__link.disabled,[riot-tag=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link.disabled,[data-is=\"gb-terminal-pager\"] .gb-stylish .gb-terminal__link.disabled{ color: #ddd; cursor: not-allowed; } gb-terminal-pager .gb-stylish gb-pager,[riot-tag=\"gb-terminal-pager\"] .gb-stylish gb-pager,[data-is=\"gb-terminal-pager\"] .gb-stylish gb-pager{ flex: 1; } gb-terminal-pager .gb-stylish gb-icon img,[riot-tag=\"gb-terminal-pager\"] .gb-stylish gb-icon img,[data-is=\"gb-terminal-pager\"] .gb-stylish gb-icon img{ width: 20px; }', '', function(opts) {\n    this._mixin(TerminalPager);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/paging/gb-terminal-pager.tag.html","import { FluxTag } from '../tag';\nimport { PagingConfig } from './gb-paging';\n\nexport interface TerminalPager extends FluxTag<PagingConfig> { }\n\nexport class TerminalPager {\n\n  init() {\n    this._scopeTo('gb-paging');\n    this._config = this._scope._config;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/paging/gb-terminal-pager.ts","import { FluxTag } from '../tag';\nimport { Events, Pager } from 'groupby-api';\n\nexport interface PagingConfig {\n  limit?: number;\n  pages?: boolean;\n  numeric?: boolean;\n  terminals?: boolean;\n  labels?: boolean;\n  icons?: boolean;\n\n  prev_label?: string;\n  next_label?: string;\n  first_label?: string;\n  last_label?: string;\n\n  prev_icon?: string;\n  next_icon?: string;\n  first_icon?: string;\n  last_icon?: string;\n}\n\nexport const DEFAULT_CONFIG: PagingConfig = {\n  limit: 5,\n  pages: false,\n  numeric: false,\n  terminals: true,\n  labels: true,\n  icons: true,\n\n  first_label: 'First',\n  prev_label: 'Prev',\n  next_label: 'Next',\n  last_label: 'Last',\n\n  first_icon: require('./double-arrow-left.png'),\n  prev_icon: require('./arrow-left.png'),\n  next_icon: require('./arrow-right.png'),\n  last_icon: require('./double-arrow-right.png')\n};\n\nexport interface FluxPager {\n  first: () => void;\n  prev: () => void;\n  next: () => void;\n  last: () => void;\n  switchPage: (page: number) => void;\n}\n\nexport interface Paging extends FluxTag<PagingConfig> { }\n\nexport class Paging {\n\n  forwardDisabled: boolean;\n  backDisabled: boolean;\n  lowOverflow: boolean;\n  highOverflow: boolean;\n  currentPage: number;\n  lastPage: number;\n  pageNumbers: number[];\n  pager: FluxPager;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    // default initial state\n    this.backDisabled = true;\n    this.currentPage = 1;\n\n    this.pager = this.wrapPager(this.flux.page);\n\n    this.flux.on(Events.PAGE_CHANGED, this.updateCurrentPage);\n    this.flux.on(Events.RESULTS, this.pageInfo);\n  }\n\n  pageInfo() {\n    const pageNumbers = this.flux.page.pageNumbers(this._config.limit);\n    const lastPage = this.flux.page.finalPage;\n    const currentPage = this.flux.page.currentPage;\n    this.updatePageInfo(pageNumbers, currentPage, lastPage);\n  }\n\n  updatePageInfo(pageNumbers: number[], currentPage: number, lastPage: number) {\n    this.update({\n      pageNumbers,\n      currentPage,\n      lastPage,\n      lowOverflow: pageNumbers[0] !== 1,\n      highOverflow: pageNumbers[pageNumbers.length - 1] !== lastPage,\n      backDisabled: currentPage === 1,\n      forwardDisabled: currentPage === lastPage\n    });\n  }\n\n  updateCurrentPage({ pageNumber }: { pageNumber: number }) {\n    this.update({ currentPage: pageNumber });\n  }\n\n  wrapPager(pager: Pager): any {\n    return {\n      first: () => !this.backDisabled && pager.reset().then(this.emitEvent),\n      prev: () => !this.backDisabled && pager.prev().then(this.emitEvent),\n      next: () => !this.forwardDisabled && pager.next().then(this.emitEvent),\n      last: () => !this.forwardDisabled && pager.last().then(this.emitEvent),\n      switchPage: (page) => pager.switchPage(page).then(this.emitEvent)\n    };\n  }\n\n  emitEvent() {\n    this.services.tracker.search();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/paging/gb-paging.ts","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABYmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgIHRpZmY6T3JpZW50YXRpb249IjEiLz4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9InIiPz60J7anAAABhWlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kbtLA0EQhz8TxeADCwNaWKQQBYmiUYJ2miA+CEGigq8mOfMQcslxd0HE0sI2hYUPbBSxsdZO/AcEQVArEWzFQsFG5JxNhIiYWXb329/OzO7Ogmshq+lWbT/oOduMTYR8C4tLvvonPLThpRt/XLOMsZmZCFXt444aNd/2qlzV/f61xtWkpUGNR3hUM0xbeFI4um4bineFvVomvip8Juw35YLCD0pPlPlFcbrELpXTa87FwsJeYV/6Fyd+sZYxdeEh4U49W9B+7qNe0pTMzc8qXXoHFjEmCOFjinHCBBlgRMYgvQTokxVV4gOl+Ch5idVkNNjAZI00GWz8ohYke1LmlOhJaVnxEFN/8Le2VmowUD6haRrqnh3nvQfqD+Br23E+jxzn6xjcUpernUp8fgeGX0UvVrTOQ2jZgvPLipY4gYsitD8acTNektzSXakUvJ1C8yK03kDDcrluP/sc38PcJkSuYW8fusS/ZeUbWh5nYM1tRxkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAGBSURBVHic7d0xblNhEIXRS3qyoCT0QLJhVpDNpDMFVFBZspBj8vxmnm3NOdJrR5a+6/pPAAAAAAAAAAAAAAAAAAAAAK7TfZIfSR5v5C6F7pO8JvmTZJe6WF13KXQYaf/tkjxd6V0KHYtUEavrLoVORdp/P7M8VtddCn0k0mGsLxe+S6ElkZbE6rpLoXMi7b+3JJ83vkuhNZF+Jfm68V0KiT+Y+IOJP9iaSL/TE//UXQqtjfRt47sUEn8w8QcTfzDxBxN/MPEHWxvp+8Z3KST+YOIPJv5g4g8m/mBrIz1vfJdC4g8m/mDiDyb+YOJfgbtL/4AVPt3YXY5Y+2992fguDYwAI8AIiBEQIyBGQIyAGAExAmIExAiIERAjIEZAjIAYATECYgTECIgRECMgRkA8GEHOi7VL8nChuzRYEmtJpK67NPhIrHMidd2lwf8eeDw3UtddGrz3xOvaSF13afDvI89Vkbru0mD/zHt1pK67AAAAAAAAAAAAAAAAAAAAwGB/AYR4hXFo7p5xAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tags/paging/double-arrow-left.png\n// module id = 80\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACrklEQVR4Ae3dvXLTQBQF4IQeHihAD0leOE+Ql0kHBVSwKjzjIj9er65GZ/V5RpXlq7vfOeOk882NFwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgLoEv7ThP7fo617Gc5hKBJfzndv1r1692KUFDOMrrPPylAKcSfDsKwJHP+Vr4SnCQRrwX/qkEv5uFb4IJC3FJ+Ocl+D6hwWGP1BO+EkxWk2vCP5XgpVl8nszjUMcZCf9Pk/pxKK3JDiv8yQLtOY7we7Qmu1f4kwXac5yR8P+2B/mb36O9s3tHw/+5s/NYp0NA+B1Ys90q/NkS7TiP8DuwZrtV+LMl2nEe4XdgzXar8GdLtOM8o+HfdzzLrTsTEP7OAtlyHeFvqb2zZwl/Z4FsuY7wt9Te2bOEv7NAtlxnNPyHLZf1rHUFhL+uZ9Q04UfFte6ywl/XM2qa8KPiWndZ4a/o+WnFWSmjblMWtefbAqPfAo9vj/ZOioASpCRVuKcSFOKmjFaClKQK91SCQtyU0UqQklThnkpQiJsyWglSkircUwkKcVNGK0FKUoV7KkEhbspoJUhJqnBPJSjETRmtBClJFe6pBIW4KaOVICWpwj2VoBA3ZbQSpCRVuKcSFOKmjFaClKQK91SCQtyU0UqQklThnkpQiJsyeqQEfjAiJeUP9rymBMtvCd59MNfbQQI9JRB+ULA9q15SAuH3iAbe+14JhB8Y6DUrv1YC4V8jGfyZ8xIIPzjIkdWXEiw/H++//RFFnyVAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgS6BP4DIgpCusyEaeEAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tags/paging/arrow-left.png\n// module id = 81\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACtklEQVR4Ae3dQW7UQBAF0Ch7OFCAPQQunBNwGXawgBUpLywhFEFc3Ym7ym8kK5uU3f3+z8QjZTI3Nx4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgdcTuItLPcTx9vUu6UqrCGzhf4/jdxxf41CCQLjK48/wtwIowVWSj30+Fb4SXKQA/wpfCZqX4DnhK0HTEhwJXwmaleBN7OdbHHuwR756ddCkDF9iH7+UoEmayW0oQRKu05gSdEozuRclSMJ1GlOCTmkm96IESbhOY0rQKc3kXpQgCddpTAk6pZncixIk4TqNKUGnNJN7UYIkXKcxJeiUZnIvSpCE6zSmBJ3STO5FCZJwncaUoFOayb0oQRKu05gSdEozuRclSMJ1GlOCTmkm96IESbhOY0rQKc3kXi5XgtskVNex7Y0mHhcV+Bz79oYT4R9+25m3nBUvjZ/84gGOLF/4I3rFZ4VfPMCR5d/HsBu+EcHCs8IvHN7o0oU/Klh4XviFwxtduvBHBQvPC79weKNL/xQncLc/qlh0XvhFg5uxbOHPUCx6DuEXDW7GsoU/Q7HoOYRfNLgZyxb+DMWi5/gY6/ZSr2h4o8vewv8Zx5F/Gr1/r7/kGdU/eV74Jwdw5uWFf6b+ydcW/skBnHl5Hxhxpv4i1/4Q6/gRx34z95yvbvgWCW/WMo6UQPiz1Bc7z/tYz/+eCYS/WGizl7OVYP/I2L9/FQh/tvai53uqBMJfNKyXWta7OPH+TCD8l1Je/LxbCR7i8MnhiwdleQQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMAxgUc/cUO5Y0FtKQAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tags/paging/arrow-right.png\n// module id = 82\n// module chunks = 0","module.exports = \"data:image/png;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tags/paging/double-arrow-right.png\n// module id = 83\n// module chunks = 0","import './gb-search-box.tag.html';\nimport '../submit/gb-submit.tag.html';\nimport '../reset/gb-reset.tag.html';\nimport '../sayt/gb-sayt.tag.html';\nimport { Query } from './gb-query';\nriot.tag2('gb-query', '<yield> <div class=\"gb-query {_style}\"> <gb-search-box></gb-search-box> <gb-submit></gb-submit> <gb-reset></gb-reset> <gb-sayt if=\"{_config.sayt}\"></gb-sayt> </div> </yield>', 'gb-query .gb-stylish.gb-query,[riot-tag=\"gb-query\"] .gb-stylish.gb-query,[data-is=\"gb-query\"] .gb-stylish.gb-query{ position: relative; display: flex; align-items: baseline; } gb-query .gb-stylish.gb-query gb-sayt,[riot-tag=\"gb-query\"] .gb-stylish.gb-query gb-sayt,[data-is=\"gb-query\"] .gb-stylish.gb-query gb-sayt{ top: 31px; left: 0; z-index: 10; position: absolute; min-width: 175px; background-color: #fff; box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); }', '', function(opts) {\n    this._mixin(Query);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/query/gb-query.tag.html","riot.tag2('gb-search-box', '<input name=\"searchBox\" class=\"{_style}\" type=\"text\" placeholder=\"Search...\" autofocus>', 'gb-search-box input.gb-stylish,[riot-tag=\"gb-search-box\"] input.gb-stylish,[data-is=\"gb-search-box\"] input.gb-stylish{ padding: 6px 12px; font-size: 14px; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/query/gb-search-box.tag.html","import { Submit } from './gb-submit';\nriot.tag2('gb-submit', '<yield> <a class=\"gb-submit {_style}\">&#128269;</a> </yield>', 'gb-submit .gb-stylish.gb-submit,[riot-tag=\"gb-submit\"] .gb-stylish.gb-submit,[data-is=\"gb-submit\"] .gb-stylish.gb-submit{ padding: 4px; } gb-submit .gb-stylish.gb-submit:hover,[riot-tag=\"gb-submit\"] .gb-stylish.gb-submit:hover,[data-is=\"gb-submit\"] .gb-stylish.gb-submit:hover{ cursor: pointer; }', '', function(opts) {\n    this._mixin(Submit);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/submit/gb-submit.tag.html","import { findSearchBox } from '../../utils/common';\nimport { FluxTag } from '../tag';\nimport * as riot from 'riot';\n\nexport interface SubmitConfig {\n  label?: string;\n  staticSearch?: boolean;\n}\n\nexport const DEFAULT_CONFIG: SubmitConfig = {\n  label: 'Search',\n  staticSearch: false\n};\n\nexport interface Submit extends FluxTag<SubmitConfig> {\n  root: riot.TagElement & { value: any };\n}\n\nexport class Submit {\n\n  searchBox: HTMLInputElement;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    if (this.root.tagName === 'INPUT') {\n      this.root.value = this._config.label;\n    }\n\n    this.on('mount', this.setSearchBox);\n    this.root.addEventListener('click', this.submitQuery);\n  }\n\n  setSearchBox() {\n    this.searchBox = findSearchBox();\n  }\n\n  submitQuery() {\n    const inputValue = this.searchBox.value;\n\n    if (this._config.staticSearch && this.services.url.active()) {\n      this.services.url.update(inputValue, []);\n    } else {\n      this.flux.reset(inputValue)\n        .then(() => this.services.tracker.search());\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/submit/gb-submit.ts","import { Reset } from './gb-reset';\nriot.tag2('gb-reset', '<yield> <a class=\"gb-reset {_style}\">&times;</a> </yield>', 'gb-reset .gb-stylish.gb-reset,[riot-tag=\"gb-reset\"] .gb-stylish.gb-reset,[data-is=\"gb-reset\"] .gb-stylish.gb-reset{ color: #888; padding: 4px; } gb-reset .gb-stylish.gb-reset:hover,[riot-tag=\"gb-reset\"] .gb-stylish.gb-reset:hover,[data-is=\"gb-reset\"] .gb-stylish.gb-reset:hover{ color: black; cursor: pointer; }', '', function(opts) {\n    this._mixin(Reset);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/reset/gb-reset.tag.html","import { findSearchBox } from '../../utils/common';\nimport { FluxTag } from '../tag';\n\nexport interface Reset extends FluxTag<any> { }\n\nexport class Reset {\n\n  searchBox: HTMLInputElement;\n\n  init() {\n    this.on('mount', this.setSearchBox);\n    this.root.addEventListener('click', this.clearQuery);\n  }\n\n  setSearchBox() {\n    this.searchBox = findSearchBox();\n  }\n\n  clearQuery() {\n    this.flux.reset(this.searchBox.value = '')\n      .then(() => this.services.tracker.search());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/reset/gb-reset.ts","import './gb-sayt-autocomplete.tag.html';\nimport './gb-sayt-products.tag.html';\nimport { Sayt } from './gb-sayt';\nimport { SaytTag } from '../tag';\nriot.tag2('gb-sayt', '<yield> <div class=\"{_style}\" if=\"{(queries && queries.length) || (navigations && navigations.length)}\"> <gb-sayt-autocomplete></gb-sayt-autocomplete> <gb-sayt-products if=\"{showProducts}\"></gb-sayt-products> </div> </yield>', 'gb-sayt div.gb-stylish,[riot-tag=\"gb-sayt\"] div.gb-stylish,[data-is=\"gb-sayt\"] div.gb-stylish{ display: flex; } gb-sayt .gb-stylish ul,[riot-tag=\"gb-sayt\"] .gb-stylish ul,[data-is=\"gb-sayt\"] .gb-stylish ul{ list-style: none; margin: 0; padding: 0; } gb-sayt .gb-stylish gb-sayt-link:hover,[riot-tag=\"gb-sayt\"] .gb-stylish gb-sayt-link:hover,[data-is=\"gb-sayt\"] .gb-stylish gb-sayt-link:hover,gb-sayt .gb-stylish gb-sayt-link.active,[riot-tag=\"gb-sayt\"] .gb-stylish gb-sayt-link.active,[data-is=\"gb-sayt\"] .gb-stylish gb-sayt-link.active{ background-color: #f1f1f1; display: block; } gb-sayt .gb-stylish gb-list li,[riot-tag=\"gb-sayt\"] .gb-stylish gb-list li,[data-is=\"gb-sayt\"] .gb-stylish gb-list li{ margin: 0px; }', '', function(opts) {\n    this._mixin(SaytTag, Sayt);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt.tag.html","import './gb-sayt-categories.tag.html';\nimport './gb-sayt-search-terms.tag.html';\nimport './gb-sayt-refinements.tag.html';\nimport './gb-sayt-divider.tag.html';\nriot.tag2('gb-sayt-autocomplete', '<yield> <gb-sayt-categories></gb-sayt-categories> <gb-sayt-divider></gb-sayt-divider> <gb-sayt-search-terms></gb-sayt-search-terms> <gb-sayt-divider></gb-sayt-divider> <gb-sayt-refinements each=\"{navigations}\"></gb-sayt-refinements> </yield>', '.gb-stylish gb-sayt-autocomplete,.gb-stylish [riot-tag=\"gb-sayt-autocomplete\"],.gb-stylish [data-is=\"gb-sayt-autocomplete\"]{ min-width: 210px; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-autocomplete.tag.html","import '../list/gb-list.tag.html';\nimport './gb-sayt-link.tag.html';\nimport '../raw/gb-raw.tag.html';\nriot.tag2('gb-sayt-categories', '<gb-list items=\"{categoryResults}\"> <gb-sayt-link send=\"{_scope.searchCategory}\" data-value=\"{item.value}\" data-refinement=\"{item.category}\" data-field=\"{_scope.categoryField}\" data-norefine=\"{item.noRefine}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item.value, \\'<b>$&</b>\\')}\"></gb-raw> in <span class=\"gb-category-query\">{item.category}</span> </yield> </gb-sayt-link> </gb-list>', '.gb-stylish gb-sayt-categories .gb-category-query,.gb-stylish [riot-tag=\"gb-sayt-categories\"] .gb-category-query,.gb-stylish [data-is=\"gb-sayt-categories\"] .gb-category-query{ font-weight: bold; color: darkorange; }', '', function(opts) {\n\n    this._scopeTo('gb-sayt');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-categories.tag.html","riot.tag2('gb-sayt-link', '<a onclick=\"{opts.send}\"> <yield></yield> </a>', '.gb-stylish gb-sayt-link a,.gb-stylish [riot-tag=\"gb-sayt-link\"] a,.gb-stylish [data-is=\"gb-sayt-link\"] a{ padding: 5px 15px; text-decoration: none; display: block; }', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-link.tag.html","import { Raw } from './gb-raw';\nriot.tag2('gb-raw', '<span></span>', '', '', function(opts) {\n    this._mixin(Raw);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/raw/gb-raw.tag.html","import { FluxTag } from '../tag';\n\nexport interface RawConfig {\n  content: string;\n}\n\nexport interface Raw extends FluxTag<RawConfig> { }\n\nexport class Raw {\n\n  init() {\n    this.configure();\n\n    this.on('update', this.updateContent);\n    this.on('mount', this.updateContent);\n  }\n\n  updateContent() {\n    this.root.innerHTML = this._config.content;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/raw/gb-raw.ts","import '../list/gb-list.tag.html';\nimport './gb-sayt-link.tag.html';\nimport '../raw/gb-raw.tag.html';\nriot.tag2('gb-sayt-search-terms', '<gb-list items=\"{_scope.queries}\"> <gb-sayt-link send=\"{_scope.search}\" data-value=\"{item.value}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item.value, \\'<b>$&</b>\\')}\"></gb-raw> </yield> </gb-sayt-link> </gb-list>', '', '', function(opts) {\n\n    this._scopeTo('gb-sayt');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-search-terms.tag.html","import '../list/gb-list.tag.html';\nimport './gb-sayt-link.tag.html';\nimport '../raw/gb-raw.tag.html';\nriot.tag2('gb-sayt-refinements', '<h4>{displayName}</h4> <gb-list items=\"{values}\"> <gb-sayt-link send=\"{_scope.searchRefinement}\" data-value=\"{displayName}: {item}\" data-refinement=\"{item}\" data-field=\"{name}\"> <yield> <gb-raw content=\"{_scope.highlightCurrentQuery(item, \\'<b>$&</b>\\')}\"></gb-raw> </yield> </gb-sayt-link> </gb-list>', '.gb-stylish gb-sayt-refinements h4,.gb-stylish [riot-tag=\"gb-sayt-refinements\"] h4,.gb-stylish [data-is=\"gb-sayt-refinements\"] h4{ margin: 4px; }', '', function(opts) {\n\n    this._scopeTo('gb-sayt');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-refinements.tag.html","riot.tag2('gb-sayt-divider', '<div if=\"{isVisible()}\"></div>', '.gb-stylish gb-sayt-divider div,.gb-stylish [riot-tag=\"gb-sayt-divider\"] div,.gb-stylish [data-is=\"gb-sayt-divider\"] div{ display: block; margin: 3px 10%; border-top: 1px solid #777; }', '', function(opts) {\n    this.isVisible = () => this.root.nextElementSibling &&\n      this.root.nextElementSibling.querySelector('li') &&\n      this.root.previousElementSibling &&\n      this.root.previousElementSibling.querySelector('li');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-divider.tag.html","import '../product/gb-product.tag.html';\nimport '../product/gb-product-image.tag.html';\nriot.tag2('gb-sayt-products', '<ul class=\"{_style}\"> <li class=\"gb-sayt-product\" each=\"{products}\"> <yield> <gb-product all_meta=\"{allMeta}\"> <gb-product-image thumbnail></gb-product-image> </gb-product> </yield> </li> </ul>', '.gb-stylish gb-sayt-products,.gb-stylish [riot-tag=\"gb-sayt-products\"],.gb-stylish [data-is=\"gb-sayt-products\"]{ min-width: 300px; } gb-sayt-products ul.gb-stylish,[riot-tag=\"gb-sayt-products\"] ul.gb-stylish,[data-is=\"gb-sayt-products\"] ul.gb-stylish{ display: flex; flex-wrap: wrap; align-items: center; width: calc(86px * 4); align-content: flex-start; } gb-sayt-products .gb-stylish gb-product-image img,[riot-tag=\"gb-sayt-products\"] .gb-stylish gb-product-image img,[data-is=\"gb-sayt-products\"] .gb-stylish gb-product-image img{ vertical-align: bottom; margin: 3px; } gb-sayt-products .gb-stylish gb-product-image img:hover,[riot-tag=\"gb-sayt-products\"] .gb-stylish gb-product-image img:hover,[data-is=\"gb-sayt-products\"] .gb-stylish gb-product-image img:hover{ box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); }', '', function(opts) {\n    this._scopeTo('gb-sayt')\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sayt/gb-sayt-products.tag.html","import './gb-product-image.tag.html';\nimport './gb-product-info.tag.html';\nimport './gb-variant-switcher.tag.html';\nimport { Product } from './gb-product';\nriot.tag2('gb-product', '<yield> <gb-product-image></gb-product-image> <gb-product-info></gb-product-info> <gb-variant-switcher></gb-variant-switcher> </yield>', '', '', function(opts) {\n    this._mixin(Product);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/product/gb-product.tag.html","riot.tag2('gb-product-image', '<a class=\"gb-product-image {_style}\" href=\"{_scope.link()}\"> <img class=\"{thumbnail: opts.thumbnail !== undefined}\" riot-src=\"{imageLink()}\" alt=\"\"> </a>', 'gb-product-image .gb-product-image.gb-stylish img,[riot-tag=\"gb-product-image\"] .gb-product-image.gb-stylish img,[data-is=\"gb-product-image\"] .gb-product-image.gb-stylish img{ width: 380px; } gb-product-image .gb-product-image.gb-stylish img.thumbnail,[riot-tag=\"gb-product-image\"] .gb-product-image.gb-stylish img.thumbnail,[data-is=\"gb-product-image\"] .gb-product-image.gb-stylish img.thumbnail{ width: 80px; }', '', function(opts) {\n    this._scopeTo('gb-product');\n    const _scope = this._scope;\n    this.imageLink = () => _scope.image(_scope.productMeta().image);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/product/gb-product-image.tag.html","riot.tag2('gb-product-info', '<a href=\"{_scope.link()}\"> <p class=\"gb-product__title\">{_scope.productMeta().title}</p> <p class=\"gb-product__price\">{_scope.productMeta().price}</p> </a>', '', '', function(opts) {\n    this._scopeTo('gb-product');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/product/gb-product-info.tag.html","riot.tag2('gb-variant-switcher', '<a if=\"{_scope.variants.length > 1}\" each=\"{variant, i in _scope.variants}\" class=\"gb-product__variant-link\" onclick=\"{_scope.switchVariant}\" data-index=\"{i}\"> {i} </a>', '', '', function(opts) {\n    this._scopeTo('gb-product');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/product/gb-variant-switcher.tag.html","import { ProductMeta, ProductTransformer } from '../../utils/product-transformer';\nimport { FluxTag } from '../tag';\nimport * as clone from 'clone';\nimport oget = require('oget');\n\nexport interface Product extends FluxTag<any> { }\n\nexport class Product {\n\n  variantIndex: number;\n  variants: any[];\n  detailsUrl: string;\n  allMeta: any;\n  struct: any;\n  productMeta: ProductMeta;\n  transformer: ProductTransformer;\n\n  init() {\n    this.variantIndex = 0;\n    this.detailsUrl = oget(this.services, 'url.urlConfig.detailsUrl', 'details.html');\n    this.struct = this._scope.struct || this.config.structure || {};\n    this.transformer = new ProductTransformer(this.struct);\n\n    this.transformRecord(this.opts.all_meta);\n  }\n\n  transformRecord(allMeta: any) {\n    const productMeta = this.transformer.transform(clone(allMeta, false));\n    this.update({\n      productMeta: () => productMeta(this.variantIndex),\n      variants: productMeta.variants || [],\n      allMeta: productMeta.transformedMeta\n    });\n  }\n\n  link() {\n    return this.productMeta().url || `${this.detailsUrl}?id=${this.productMeta().id}`;\n  }\n\n  image(imageObj: string | string[]) {\n    return Array.isArray(imageObj) ? imageObj[0] : imageObj;\n  }\n\n  switchVariant(event: MouseEvent) {\n    const variantIndex = (<HTMLElement>event.target).dataset['index'];\n    this.update({ variantIndex });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/product/gb-product.ts","import { debounce } from '../../utils/common';\nimport { ProductStructure } from '../../utils/product-transformer';\nimport { Query } from '../query/gb-query';\nimport { SaytTag } from '../tag';\nimport { Autocomplete, AUTOCOMPLETE_HIDE_EVENT } from './autocomplete';\nimport { Events, Navigation, Record, SelectedValueRefinement } from 'groupby-api';\nimport escapeStringRegexp = require('escape-string-regexp');\n\nexport interface SaytConfig {\n  structure?: ProductStructure;\n  categoryField?: string;\n  allCategoriesLabel?: string;\n  collection?: string;\n  area?: string;\n  language?: string;\n  products?: number;\n  queries?: number;\n  minimumCharacters?: number;\n  delay?: number;\n  autoSearch?: boolean;\n  staticSearch?: boolean;\n  https?: boolean;\n  highlight?: boolean;\n  navigationNames?: { [name: string]: string };\n  allowedNavigations?: string[];\n}\n\nexport const DEFAULT_CONFIG: SaytConfig = {\n  allCategoriesLabel: 'All Departments',\n  products: 4,\n  queries: 5,\n  minimumCharacters: 1,\n  delay: 100,\n  autoSearch: true,\n  staticSearch: false,\n  highlight: true,\n  https: false,\n  navigationNames: {},\n  allowedNavigations: []\n};\nexport const MIN_DELAY = 100;\n\nexport interface Sayt extends SaytTag<SaytConfig> { }\n\nexport class Sayt {\n\n  products: Record[];\n  navigations: Navigation[];\n  struct: any;\n  autocomplete: Autocomplete;\n  autocompleteList: HTMLUListElement;\n  originalQuery: string;\n  showProducts: boolean;\n  matchesInput: boolean;\n  queries: any[];\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.struct = Object.assign({}, this.config.structure, this._config.structure);\n    this.showProducts = this._config.products > 0;\n\n    this.sayt.configure(this.generateSaytConfig());\n\n    this.on('mount', this.initializeAutocomplete);\n    this.flux.on(AUTOCOMPLETE_HIDE_EVENT, this.reset);\n  }\n\n  initializeAutocomplete() {\n    this.autocomplete = new Autocomplete(this);\n  }\n\n  generateSaytConfig() {\n    return {\n      subdomain: this.config.customerId,\n      collection: this._config.collection || this.config.collection,\n      autocomplete: {\n        numSearchTerms: this._config.queries,\n        language: this._config.language\n      },\n      productSearch: {\n        area: this._config.area || this.config.area,\n        numProducts: this._config.products,\n        language: this._config.language\n      },\n      https: this._config.https\n    };\n  }\n\n  reset() {\n    this.autocomplete.reset();\n    this.update({ queries: null, navigations: null, products: null });\n  }\n\n  fetchSuggestions(originalQuery: string) {\n    this.sayt.autocomplete(originalQuery)\n      .then(({ result }) => ({ result, originalQuery }))\n      .then(this.handleSuggestions)\n      .catch((err) => console.error(err));\n  }\n\n  handleSuggestions({ result, originalQuery }: { result: any, originalQuery: string }) {\n    this.update({ originalQuery });\n    this.processResults(result);\n    if (this.queries && this.showProducts) {\n      const query = this.matchesInput ? originalQuery : this.queries[0].value;\n      this.searchProducts(query);\n    }\n  }\n\n  searchProducts(query: string = '', refinements?: string) {\n    if (this.showProducts) {\n      this.sayt.productSearch(query, { refinements })\n        .then((res) => this.update({ products: res.result.products }));\n    }\n  }\n\n  rewriteQuery(query: string) {\n    this.flux.emit(Events.REWRITE_QUERY, query);\n  }\n\n  notifier(query: string, refinement?: string, field?: string) {\n    const isRefinement = refinement && refinement !== this._config.allCategoriesLabel;\n    const refinementString = `~${field || this._config.categoryField}=${refinement}`;\n    if (this._config.autoSearch) this.searchProducts(field ? '' : query, isRefinement ? refinementString : undefined);\n    this.rewriteQuery(query);\n  }\n\n  processResults(result: any) {\n    let categoryResults = [];\n\n    this.matchesInput = result.searchTerms\n      && result.searchTerms[0].value.toLowerCase() === this.originalQuery.toLowerCase();\n\n    if (this.matchesInput) {\n      const [categoryQuery] = result.searchTerms.splice(0, 1);\n      categoryResults = this.extractCategoryResults(categoryQuery);\n    }\n\n    const navigations = result.navigations ? result.navigations\n      .map((nav) => Object.assign(nav, { displayName: this._config.navigationNames[nav.name] || nav.name }))\n      .filter(({name}) => this._config.allowedNavigations.includes(name)) : [];\n    this.update({\n      results: result,\n      navigations,\n      queries: result.searchTerms,\n      categoryResults\n    });\n  }\n\n  extractCategoryResults({ additionalInfo, value }: any) {\n    let categoryResults = [];\n    const categoryField = this._config.categoryField;\n    if (additionalInfo && categoryField && categoryField in additionalInfo) {\n      categoryResults = additionalInfo[categoryField]\n        .map((category) => ({ category, value }))\n        .slice(0, 3);\n      categoryResults.unshift({ category: this._config.allCategoriesLabel, value, noRefine: true });\n    }\n    return categoryResults;\n  }\n\n  searchRefinement(event: Event) {\n    this.flux.resetRecall();\n    this.refine(<HTMLElement>event.target, '');\n  }\n\n  searchCategory(event: Event) {\n    this.flux.resetRecall();\n    this.refine(<HTMLElement>event.target, this.originalQuery);\n  }\n\n  highlightCurrentQuery(value: string, regexReplacement: string) {\n    return this._config.highlight\n      ? value.replace(new RegExp(escapeStringRegexp(this.originalQuery), 'i'), regexReplacement)\n      : value;\n  }\n\n  enhanceCategoryQuery(query: any) {\n    return `<b>${query.value}</b> in <span class=\"gb-category-query\">${query.category}</span>`;\n  }\n\n  refine(node: HTMLElement, query: string) {\n    while (node.tagName !== 'GB-SAYT-LINK') node = node.parentElement;\n\n    const doRefinement = !node.dataset['norefine'];\n    const refinement: SelectedValueRefinement = {\n      navigationName: node.dataset['field'] || this._config.categoryField,\n      value: node.dataset['refinement'],\n      type: 'Value'\n    };\n\n    if (this._config.staticSearch && this.services.url.active()) {\n      this.services.url.update(query, doRefinement ? [refinement] : []);\n    } else if (doRefinement) {\n      this.flux.rewrite(query, { skipSearch: true });\n      this.flux.refine(refinement)\n        .then(() => this.services.tracker.sayt());\n    } else {\n      this.flux.reset(query)\n        .then(() => this.services.tracker.sayt());\n    }\n  }\n\n  search(event: Event) {\n    let node = <HTMLElement>event.target;\n    while (node.tagName !== 'GB-SAYT-LINK') node = node.parentElement;\n\n    const query = node.dataset['value'];\n\n    if (this._config.staticSearch && this.services.url.active()) {\n      this.services.url.update(query, []);\n    } else {\n      this.rewriteQuery(query);\n      this.flux.reset(query)\n        .then(() => this.services.tracker.sayt());\n    }\n  }\n\n  listenForInput(tag: Query) {\n    const input = <HTMLInputElement>tag.searchBox;\n    input.autocomplete = 'off';\n    const debouncedSearch = debounce(this.debouncedSearch(input), Math.max(this._config.delay, MIN_DELAY));\n    input.addEventListener('input', debouncedSearch);\n    document.addEventListener('click', this.reset);\n  }\n\n  debouncedSearch(input: HTMLInputElement) {\n    return () => {\n      if (input.value.length >= this._config.minimumCharacters) {\n        this.fetchSuggestions(input.value);\n      } else {\n        this.reset();\n      }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/sayt/gb-sayt.ts","import { findSearchBox } from '../../utils/common';\nimport { Sayt } from './gb-sayt';\n\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ENTER = 13;\nconst KEY_ESCAPE = 27;\nconst ACTIVE = 'active';\n\nexport const AUTOCOMPLETE_HIDE_EVENT = 'autocomplete:hide';\n\nexport class Autocomplete {\n\n  selected: HTMLElement;\n  searchInput: HTMLInputElement;\n  preautocompleteValue: string;\n\n  constructor(public tag: Sayt) {\n    this.selected = this.searchInput = findSearchBox();\n  }\n\n  indexOfSelected() {\n    return this.links().indexOf(this.selected);\n  }\n\n  selectLink(link: HTMLElement) {\n    if (link) this.selected = this.swapAttributes(link);\n  }\n\n  linkAbove() {\n    return <HTMLElement>this.links()[this.indexOfSelected() - 1];\n  }\n\n  linkBelow() {\n    return <HTMLElement>this.links()[this.indexOfSelected() + 1];\n  }\n\n  links() {\n    return Array.from(this.tag.root.querySelectorAll('gb-sayt-autocomplete gb-sayt-link'));\n  }\n\n  isSelectedInAutocomplete() {\n    return this.links().indexOf(this.selected) !== -1;\n  }\n\n  swapAttributes(next: HTMLElement) {\n    this.removeActiveClass();\n    next.classList.add(ACTIVE);\n    const value = next.dataset['value'];\n    const refinement = next.dataset['refinement'];\n    const field = next.dataset['field'];\n    if (value || refinement) this.tag.notifier(value, refinement, field);\n    return next;\n  }\n\n  resetSelected() {\n    this.selected = this.searchInput;\n  }\n\n  removeActiveClass() {\n    this.links().forEach((element) => element.classList.remove(ACTIVE));\n  }\n\n  reset() {\n    this.removeActiveClass();\n    this.resetSelected();\n  }\n\n  keyboardListener(event: KeyboardEvent, submitDefault: Function) {\n    switch (event.keyCode) {\n      case KEY_UP:\n        // prevent cursor from moving to front of text box\n        event.preventDefault();\n\n        if (this.isSelectedInAutocomplete()) {\n          const linkAbove = this.linkAbove();\n          if (linkAbove) {\n            this.selectLink(linkAbove);\n          } else {\n            this.searchInput.value = this.preautocompleteValue;\n            this.reset();\n          }\n        } else {\n          this.tag.flux.emit(AUTOCOMPLETE_HIDE_EVENT);\n        }\n        break;\n      case KEY_DOWN:\n        if (!this.isSelectedInAutocomplete()) {\n          this.preautocompleteValue = this.searchInput.value;\n        }\n        this.selectLink(this.linkBelow());\n        break;\n      case KEY_ENTER:\n        if (this.isSelectedInAutocomplete()) {\n          this.selected.querySelector('a').click();\n          this.reset();\n        } else {\n          submitDefault();\n        }\n        break;\n      case KEY_ESCAPE:\n        this.tag.flux.emit(AUTOCOMPLETE_HIDE_EVENT);\n        break;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/sayt/autocomplete.ts","module.exports = require(\"escape-string-regexp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"escape-string-regexp\"\n// module id = 107\n// module chunks = 0","import { findTag } from '../../utils/common';\nimport { AUTOCOMPLETE_HIDE_EVENT } from '../sayt/autocomplete';\nimport { Sayt } from '../sayt/gb-sayt';\nimport '../sayt/gb-sayt.tag.html';\nimport { FluxTag } from '../tag';\nimport { Events } from 'groupby-api';\nimport * as riot from 'riot';\n\nconst KEY_ENTER = 13;\n\nexport interface QueryConfig {\n  sayt?: boolean;\n  autoSearch?: boolean;\n  staticSearch?: boolean;\n}\n\nexport const DEFAULT_CONFIG: QueryConfig = {\n  sayt: true,\n  autoSearch: true,\n  staticSearch: false\n};\n\nexport interface Query extends FluxTag<QueryConfig> {\n  root: riot.TagElement & HTMLInputElement;\n}\n\nexport class Query {\n\n  searchBox: HTMLInputElement;\n  enterKeyHandlers: Function[];\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.enterKeyHandlers = [];\n\n    this.on('mount', this.attachListeners);\n    this.flux.on(Events.REWRITE_QUERY, this.rewriteQuery);\n  }\n\n  attachListeners() {\n    this.searchBox = this.findSearchBox();\n    this.searchBox.addEventListener('keydown', this.keydownListener);\n    if (this._config.sayt) this.tags['gb-sayt'].listenForInput(this);\n\n    if (this._config.autoSearch) {\n      this.listenForInput();\n    } else if (this._config.staticSearch) {\n      this.listenForStaticSearch();\n    } else {\n      this.listenForSubmit();\n    }\n  }\n\n  rewriteQuery(query: string) {\n    this.searchBox.value = query;\n  }\n\n  listenForInput() {\n    this.searchBox.addEventListener('input', this.resetToInputValue);\n  }\n\n  listenForSubmit() {\n    this.enterKeyHandlers.push(this.resetToInputValue);\n  }\n\n  resetToInputValue() {\n    this.flux.reset(this.inputValue())\n      .then(() => this.services.tracker.search());\n  }\n\n  listenForStaticSearch() {\n    this.enterKeyHandlers.push(this.setLocation);\n  }\n\n  keydownListener(event: KeyboardEvent) {\n    const sayt = findTag('gb-sayt');\n    if (sayt) {\n      const autocomplete = (<Sayt>sayt['_tag']).autocomplete;\n      autocomplete.keyboardListener(event, this.onSubmit);\n    } else if (event.keyCode === KEY_ENTER) {\n      this.onSubmit();\n    }\n  }\n\n  onSubmit() {\n    this.enterKeyHandlers.forEach((f) => f());\n    this.flux.emit(AUTOCOMPLETE_HIDE_EVENT);\n  }\n\n  findSearchBox() {\n    if (this.tags['gb-search-box']) {\n      return this.tags['gb-search-box'].searchBox;\n    } else {\n      return this.root.querySelector('input');\n    }\n  }\n\n  setLocation() {\n    if (this.services.url.active()) {\n      this.services.url.update(this.inputValue());\n    } else {\n      this.flux.reset(this.inputValue());\n    }\n  }\n\n  private inputValue() {\n    return this.searchBox.value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/query/gb-query.ts","import { RecordCount } from './gb-record-count';\nriot.tag2('gb-record-count', '<yield> <h2>{first} - {last} of {total} Products</h2> </yield>', '', '', function(opts) {\n    this._mixin(RecordCount);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/record-count/gb-record-count.tag.html","import { FluxTag } from '../tag';\nimport { Events, PageInfo } from 'groupby-api';\n\nexport interface RecordCount extends FluxTag<any> { }\n\nexport class RecordCount {\n\n  first: number;\n  last: number;\n  total: number;\n\n  init() {\n    this.flux.on(Events.RESULTS, this.updatePageInfo);\n  }\n\n  updatePageInfo({ pageInfo, totalRecordCount }: { pageInfo: PageInfo, totalRecordCount: number }) {\n    this.update({\n      first: pageInfo.recordStart,\n      last: pageInfo.recordEnd,\n      total: totalRecordCount\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/record-count/gb-record-count.ts","import '../list/gb-list.tag.html';\nimport { RelatedQueries } from './gb-related-queries';\nriot.tag2('gb-related-queries', '<yield> <gb-list class=\"{_style}\" items=\"{relatedQueries}\" scope=\"gb-related-queries\" inline> <a onclick=\"{_scope.send}\">{item}</a> </gb-list> </yield>', '', '', function(opts) {\n    this._mixin(RelatedQueries);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/related-queries/gb-related-queries.tag.html","import { FluxTag } from '../tag';\nimport { Events, Results } from 'groupby-api';\n\nexport interface RelatedQueries extends FluxTag<any> { }\n\nexport class RelatedQueries {\n\n  relatedQueries: string[];\n\n  init() {\n    this.flux.on(Events.RESULTS, this.updatedRelatedQueries);\n  }\n\n  updatedRelatedQueries({ relatedQueries }: Results) {\n    this.update({ relatedQueries });\n  }\n\n  send(event: Event) {\n    return this.flux.rewrite((<HTMLAnchorElement>event.target).text);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/related-queries/gb-related-queries.ts","import '../list/gb-list.tag.html';\nimport '../product/gb-product.tag.html';\nimport { Results } from './gb-results';\nriot.tag2('gb-results', '<yield> <gb-list items=\"{records}\"> <gb-product all_meta=\"{item.allMeta}\"></gb-product> </gb-list> </yield>', 'gb-results .gb-stylish gb-list,[riot-tag=\"gb-results\"] .gb-stylish gb-list,[data-is=\"gb-results\"] .gb-stylish gb-list{ padding: 0; list-style: none; display: flex; flex-wrap: wrap; justify-content: space-around; } gb-results .gb-stylish gb-product,[riot-tag=\"gb-results\"] .gb-stylish gb-product,[data-is=\"gb-results\"] .gb-stylish gb-product{ display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }', '', function(opts) {\n    this._mixin(Results);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/results/gb-results.tag.html","import { getPath, unless } from '../../utils/common';\nimport { ProductStructure } from '../../utils/product-transformer';\nimport { FluxTag } from '../tag';\nimport { Events, Record, Results as ResultsModel } from 'groupby-api';\n\nexport interface Results extends FluxTag<any> { }\n\nexport class Results {\n\n  struct: ProductStructure;\n  variantStruct: ProductStructure;\n  records: Record[];\n  collection: string;\n  getPath: typeof getPath;\n\n  init() {\n    this.struct = this.config.structure;\n    this.variantStruct = unless(this.struct._variantStructure, this.struct);\n    this.getPath = getPath;\n\n    this.flux.on(Events.RESULTS, this.updateRecords);\n  }\n\n  updateRecords({ records }: ResultsModel) {\n    this.update({ records, collection: this.flux.query.raw.collection });\n  }\n\n  userStyle(key: string) {\n    return this.opts.css ? this.opts.css[key] : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/results/gb-results.ts","import { Snippet } from '../snippet/gb-snippet';\nriot.tag2('gb-snippet', '<div class=\"gb-snippet\"> {responseText} </div>', '', '', function(opts) {\n    this._mixin(Snippet);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/snippet/gb-snippet.tag.html","import { FluxTag } from '../tag';\n\nexport interface SnippetConfig {\n  raw?: boolean;\n  url: string;\n}\n\nexport const DEFAULT_CONFIG: SnippetConfig & any = {\n  raw: false\n};\n\nexport interface Snippet extends FluxTag<SnippetConfig> { }\n\nexport class Snippet {\n\n  responseText: string;\n\n  init() {\n    this.configure(DEFAULT_CONFIG);\n\n    this.on('mount', this.loadFile);\n  }\n\n  loadFile() {\n    const req = new XMLHttpRequest();\n    req.onload = () => {\n      const { responseText } = req;\n      if (this._config.raw) {\n        this.root.innerHTML = responseText;\n      } else {\n        this.update({ responseText });\n      }\n    };\n    req.open('get', this._config.url, true);\n    req.send();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/snippet/gb-snippet.ts","import '../select/gb-select.tag.html';\nimport { Sort } from './gb-sort';\nriot.tag2('gb-sort', '<yield> <gb-select scope=\"gb-sort\"> </gb-select> </yield>', '', '', function(opts) {\n    this._mixin(Sort);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/sort/gb-sort.tag.html","import { SelectConfig, SelectTag } from '../select/gb-select';\nimport { Results, Sort as SortModel } from 'groupby-api';\n\nexport const DEFAULT_SORTS = [\n  { label: 'Name Descending', value: { field: 'title', order: 'Descending' } },\n  { label: 'Name Ascending', value: { field: 'title', order: 'Ascending' } }\n];\n\nexport interface SortConfig extends SelectConfig {\n  options: any[];\n}\n\nexport interface Sort extends SelectTag<SortConfig> { }\n\nexport class Sort {\n\n  init() {\n    this.configure();\n\n    this.options = this._config.options || DEFAULT_SORTS;\n  }\n\n  sortValues() {\n    return this.options.map((option) => option.value);\n  }\n\n  onselect(value: SortModel): Promise<Results> {\n    return this.flux.sort(value, this.sortValues());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/sort/gb-sort.ts","import './gb-content-zone.tag.html';\nimport './gb-rich-content-zone.tag.html';\nimport './gb-record-zone.tag.html';\nimport { Template } from './gb-template';\nriot.tag2('gb-template', '<div if=\"{isActive}\"> <yield> <div each=\"{zone in zones}\" class=\"gb-zone-{zone.name}\"> <gb-content-zone if=\"{zone.type === \\'Content\\'}\"></gb-content-zone> <gb-rich-content-zone if=\"{zone.type === \\'Rich_Content\\'}\"></gb-rich-content-zone> <gb-record-zone if=\"{zone.type === \\'Record\\'}\"></gb-record-zone> </div> </yield> </div>', '', '', function(opts) {\n    this._mixin(Template);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/template/gb-template.tag.html","riot.tag2('gb-content-zone', '<span>{zone.content}</span>', '', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/template/gb-content-zone.tag.html","import '../raw/gb-raw.tag.html';\nriot.tag2('gb-rich-content-zone', '<gb-raw content=\"{zone.richContent}\"></gb-raw>', '', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/template/gb-rich-content-zone.tag.html","import '../list/gb-list.tag.html';\nriot.tag2('gb-record-zone', '<gb-list items=\"{zone.records}\"> <gb-product all_meta=\"{item.allMeta}\"></gb-product> </gb-list>', '', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tags/template/gb-record-zone.tag.html","import { FluxTag } from '../tag';\nimport { Events, Results } from 'groupby-api';\n\nexport interface TemplateConfig {\n  target: string;\n}\n\nexport interface Template extends FluxTag<TemplateConfig> { }\n\nexport class Template {\n\n  isActive: boolean;\n  zones: any[];\n  zoneMap: any;\n\n  init() {\n    this.configure();\n\n    this.flux.on(Events.RESULTS, this.updateActive);\n  }\n\n  updateActive({ template }: Results) {\n    this.update({\n      isActive: template.name === this._config.target,\n      zoneMap: template.zones,\n      zones: this.sortZones(template.zones)\n    });\n  }\n\n  sortZones(zones: any) {\n    return Object.keys(zones).map((key) => zones[key])\n      .reduce((list, zone) => {\n        if (zone.type === 'Record') {\n          list.push(zone);\n        } else {\n          list.unshift(zone);\n        }\n        return list;\n      }, []);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/source-map-loader!./src/tags/template/gb-template.ts"],"sourceRoot":""}